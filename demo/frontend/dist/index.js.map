{
  "version": 3,
  "sources": ["<define:__slib_info>", "../../../node_modules/regex-parser/lib/index.js", "../src/index.js", "../../../node_modules/chalk/source/index.js", "../../../node_modules/chalk/source/vendor/ansi-styles/index.js", "../../../node_modules/chalk/source/vendor/supports-color/browser.js", "../../../node_modules/chalk/source/utilities.js", "../../../node_modules/@randajan/simple-lib/src/tools/logger.js", "../../../node_modules/@randajan/simple-lib/src/info/index.js", "../../../node_modules/@randajan/simple-lib/src/web/index.js", "../../../node_modules/socket.io-client/build/esm/index.js", "../../../node_modules/socket.io-client/build/esm/url.js", "../../../node_modules/engine.io-client/build/esm/index.js", "../../../node_modules/engine.io-client/build/esm/socket.js", "../../../node_modules/engine.io-client/build/esm/transports/index.js", "../../../node_modules/engine.io-client/build/esm/transports/polling-xhr.js", "../../../node_modules/engine.io-client/build/esm/transports/polling.js", "../../../node_modules/engine.io-client/build/esm/transport.js", "../../../node_modules/engine.io-parser/build/esm/index.js", "../../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js", "../../../node_modules/engine.io-parser/build/esm/commons.js", "../../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js", "../../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js", "../../../node_modules/@socket.io/component-emitter/lib/esm/index.js", "../../../node_modules/engine.io-client/build/esm/util.js", "../../../node_modules/engine.io-client/build/esm/globals.js", "../../../node_modules/engine.io-client/build/esm/contrib/parseqs.js", "../../../node_modules/engine.io-client/build/esm/contrib/has-cors.js", "../../../node_modules/engine.io-client/build/esm/transports/websocket.js", "../../../node_modules/engine.io-client/build/esm/transports/webtransport.js", "../../../node_modules/engine.io-client/build/esm/contrib/parseuri.js", "../../../node_modules/engine.io-client/build/esm/transports/polling-fetch.js", "../../../node_modules/socket.io-client/build/esm/manager.js", "../../../node_modules/socket.io-client/build/esm/socket.js", "../../../node_modules/socket.io-parser/build/esm/index.js", "../../../node_modules/socket.io-parser/build/esm/binary.js", "../../../node_modules/socket.io-parser/build/esm/is-binary.js", "../../../node_modules/socket.io-client/build/esm/on.js", "../../../node_modules/socket.io-client/build/esm/contrib/backo2.js", "../../../node_modules/@randajan/queue/src/tools.js", "../../../node_modules/@randajan/queue/src/index.js", "../../../node_modules/@randajan/bifrost/src/arc/tools.js", "../../../node_modules/@randajan/bifrost/src/arc/beam/helpers.js", "../../../node_modules/@randajan/bifrost/src/arc/beam/Beam.js", "../../../node_modules/@randajan/bifrost/src/client/router/ClientRouter.js", "../../../node_modules/@randajan/bifrost/src/client/index.js", "../../../node_modules/@randajan/jet-core/dist/index.js", "../../../node_modules/@randajan/jet-core/src/class/extra/Plex.js", "../../../node_modules/@randajan/jet-core/src/defs/base.js", "../../../node_modules/@randajan/jet-core/src/defs/methods.js", "../../../node_modules/@randajan/jet-core/src/defs/define.js", "../../../node_modules/@randajan/jet-core/src/defs/extra/props.js", "../../../node_modules/@randajan/jet-core/src/defs/extra/pile.js", "../../../node_modules/@randajan/jet-core/src/defs/extra/dot.js", "../../../node_modules/@randajan/jet-core/src/defs/index.js", "../../../node_modules/@randajan/jet-core/src/class/native/Number.js", "../../../node_modules/@randajan/jet-core/src/class/native/Array.js", "../../../node_modules/@randajan/jet-core/src/class/native/Boolean.js", "../../../node_modules/@randajan/jet-core/src/class/native/Date.js", "../../../node_modules/@randajan/jet-core/src/class/native/Error.js", "../../../node_modules/@randajan/jet-core/src/class/native/Function.js", "../../../node_modules/@randajan/jet-core/src/class/native/Map.js", "../../../node_modules/@randajan/jet-core/src/class/native/NaN.js", "../../../node_modules/@randajan/jet-core/src/class/native/Object.js", "../../../node_modules/@randajan/jet-core/src/class/native/Promise.js", "../../../node_modules/@randajan/jet-core/src/class/native/RegExp.js", "../../../node_modules/@randajan/jet-core/src/class/native/Set.js", "../../../node_modules/@randajan/jet-core/src/class/native/String.js", "../../../node_modules/@randajan/jet-core/src/class/native/Symbol.js", "../../../node_modules/@randajan/jet-core/src/class/native/WeakMap.js", "../../../node_modules/@randajan/jet-core/src/index.js", "../../../src/components/uni/tools.js", "../../../src/components/uni/consts.js", "../../../src/components/uni/Table.js", "../../../node_modules/@randajan/jet-core/src/each/each.js", "../../../node_modules/@randajan/jet-core/src/each/eachSync.js", "../../../node_modules/@randajan/props/src/props/solid.js", "../../../node_modules/@randajan/props/src/props/virtual.js", "../../../node_modules/@randajan/props/src/props/safe.js", "../../../node_modules/@randajan/props/src/props/cached.js", "../../../node_modules/@randajan/function-parser/src/main/_tools.js", "../../../node_modules/@randajan/function-parser/src/main/arguments.js", "../../../node_modules/@randajan/function-parser/src/main/toStr.js", "../../../node_modules/@randajan/function-parser/src/main/toFn.js", "../../../src/components/sync/tools.js", "../../../src/components/sync/interfaces/DB.js", "../../../src/components/sync/privates/Chop.js", "../../../src/components/sync/privates/Bundle.js", "../../../src/components/sync/privates/Transactions.js", "../../../src/components/sync/interfaces/Rows.js", "../../../src/components/sync/privates/Step.js", "../../../src/components/sync/interfaces/Wrap.js", "../../../src/components/sync/interfaces/Row.js", "../../../src/components/sync/interfaces/Cols.js", "../../../src/components/sync/traits.js", "../../../src/components/sync/interfaces/Col.js", "../../../src/components/uni/formats.js", "../../../src/components/v3/effects/_bits.js", "../../../src/components/v3/effects/afterRemove.js", "../../../src/components/v3/effects/afterReset.js", "../../../src/components/v3/effects/afterUpdate.js", "../../../src/components/v3/effects/eventHandlers.js", "../../../src/components/v3/effects/afterAdd.js", "../../../src/components/v3/class/Chops/Chop.js", "../../../src/components/v3/traits/functions.js", "../../../src/components/v3/class/Exceptions.js", "../../../src/components/v3/traits/regexp.js", "../../../src/components/v3/traits/booleans.js", "../../../src/components/v3/traits/numbers.js", "../../../src/components/v3/traits/string.js", "../../../src/components/v3/traits/objects.js", "../../../src/components/v3/traits/dates.js", "../../../src/components/v3/metaData/interface.js", "../../../src/components/v3/class/Records/_columns.js", "../../../src/components/v3/class/Records/_ents.js", "../../../src/components/v3/class/Records/RecordPrivate.js", "../../../src/components/v3/class/Records/Turn.js", "../../../src/components/v3/class/Records/Result.js", "../../../src/components/v3/class/Records/Record.js", "../../../src/components/v3/class/Records/_records.js", "../../../src/components/v3/class/Chops/DB.js", "../../../src/index.js"],
  "sourcesContent": ["", "\"use strict\";\n\n/**\n * RegexParser\n * Parses a string input.\n *\n * @name RegexParser\n * @function\n * @param {String} input The string input that should be parsed as regular\n * expression.\n * @return {RegExp} The parsed regular expression.\n */\nvar RegexParser = module.exports = function (input) {\n    // Validate input\n    if (typeof input !== \"string\") {\n        throw new Error(\"Invalid input. Input must be a string\");\n    }\n\n    // Parse input\n    var m = input.match(/(\\/?)(.+)\\1([a-z]*)/i);\n\n    // If there's no match, throw an error\n    if (!m) {\n        throw new Error(\"Invalid regular expression format.\");\n    }\n\n    // Filter valid flags: 'g', 'i', 'm', 's', 'u', and 'y'\n    var validFlags = Array.from(new Set(m[3])).filter(function (flag) {\n        return \"gimsuy\".includes(flag);\n    }).join(\"\");\n\n    // Create the regular expression\n    return new RegExp(m[2], validFlags);\n};", "import { info } from \"@randajan/simple-lib/web\";\n\nimport socketIOClient from \"socket.io-client\";\nimport { BifrostRouter } from \"@randajan/bifrost/client\";\n\nimport { DBv3 } from \"../../../dist/index\";\n\nconst socket = socketIOClient(`localhost:${info.port+1}`);\nexport const bifrost = new BifrostRouter(socket);\n\nconst beam = window.beam = bifrost.createBeam(\"data\");\n\nbeam.get().then(records=>{\n    const db =  window.db = new DBv3(\"db\", {\n        init:(load, ctx)=>{\n            for (const rec of records) { load(rec, ctx); }\n        }\n    });\n    \n    db.on((event, res, ctx)=>{\n        if (res) {\n            //console.log(event);\n            //beam.set(db.exportAll());\n        }\n    });\n});\n\n\n", "import ansiStyles from '#ansi-styles';\nimport supportsColor from '#supports-color';\nimport { // eslint-disable-line import/order\n\tstringReplaceAll,\n\tstringEncaseCRLFWithFirstIndex,\n} from './utilities.js';\n\nconst {stdout: stdoutColor, stderr: stderrColor} = supportsColor;\n\nconst GENERATOR = Symbol('GENERATOR');\nconst STYLER = Symbol('STYLER');\nconst IS_EMPTY = Symbol('IS_EMPTY');\n\n// `supportsColor.level` \u2192 `ansiStyles.color[name]` mapping\nconst levelMapping = [\n\t'ansi',\n\t'ansi',\n\t'ansi256',\n\t'ansi16m',\n];\n\nconst styles = Object.create(null);\n\nconst applyOptions = (object, options = {}) => {\n\tif (options.level && !(Number.isInteger(options.level) && options.level >= 0 && options.level <= 3)) {\n\t\tthrow new Error('The `level` option should be an integer from 0 to 3');\n\t}\n\n\t// Detect level if not set manually\n\tconst colorLevel = stdoutColor ? stdoutColor.level : 0;\n\tobject.level = options.level === undefined ? colorLevel : options.level;\n};\n\nexport class Chalk {\n\tconstructor(options) {\n\t\t// eslint-disable-next-line no-constructor-return\n\t\treturn chalkFactory(options);\n\t}\n}\n\nconst chalkFactory = options => {\n\tconst chalk = (...strings) => strings.join(' ');\n\tapplyOptions(chalk, options);\n\n\tObject.setPrototypeOf(chalk, createChalk.prototype);\n\n\treturn chalk;\n};\n\nfunction createChalk(options) {\n\treturn chalkFactory(options);\n}\n\nObject.setPrototypeOf(createChalk.prototype, Function.prototype);\n\nfor (const [styleName, style] of Object.entries(ansiStyles)) {\n\tstyles[styleName] = {\n\t\tget() {\n\t\t\tconst builder = createBuilder(this, createStyler(style.open, style.close, this[STYLER]), this[IS_EMPTY]);\n\t\t\tObject.defineProperty(this, styleName, {value: builder});\n\t\t\treturn builder;\n\t\t},\n\t};\n}\n\nstyles.visible = {\n\tget() {\n\t\tconst builder = createBuilder(this, this[STYLER], true);\n\t\tObject.defineProperty(this, 'visible', {value: builder});\n\t\treturn builder;\n\t},\n};\n\nconst getModelAnsi = (model, level, type, ...arguments_) => {\n\tif (model === 'rgb') {\n\t\tif (level === 'ansi16m') {\n\t\t\treturn ansiStyles[type].ansi16m(...arguments_);\n\t\t}\n\n\t\tif (level === 'ansi256') {\n\t\t\treturn ansiStyles[type].ansi256(ansiStyles.rgbToAnsi256(...arguments_));\n\t\t}\n\n\t\treturn ansiStyles[type].ansi(ansiStyles.rgbToAnsi(...arguments_));\n\t}\n\n\tif (model === 'hex') {\n\t\treturn getModelAnsi('rgb', level, type, ...ansiStyles.hexToRgb(...arguments_));\n\t}\n\n\treturn ansiStyles[type][model](...arguments_);\n};\n\nconst usedModels = ['rgb', 'hex', 'ansi256'];\n\nfor (const model of usedModels) {\n\tstyles[model] = {\n\t\tget() {\n\t\t\tconst {level} = this;\n\t\t\treturn function (...arguments_) {\n\t\t\t\tconst styler = createStyler(getModelAnsi(model, levelMapping[level], 'color', ...arguments_), ansiStyles.color.close, this[STYLER]);\n\t\t\t\treturn createBuilder(this, styler, this[IS_EMPTY]);\n\t\t\t};\n\t\t},\n\t};\n\n\tconst bgModel = 'bg' + model[0].toUpperCase() + model.slice(1);\n\tstyles[bgModel] = {\n\t\tget() {\n\t\t\tconst {level} = this;\n\t\t\treturn function (...arguments_) {\n\t\t\t\tconst styler = createStyler(getModelAnsi(model, levelMapping[level], 'bgColor', ...arguments_), ansiStyles.bgColor.close, this[STYLER]);\n\t\t\t\treturn createBuilder(this, styler, this[IS_EMPTY]);\n\t\t\t};\n\t\t},\n\t};\n}\n\nconst proto = Object.defineProperties(() => {}, {\n\t...styles,\n\tlevel: {\n\t\tenumerable: true,\n\t\tget() {\n\t\t\treturn this[GENERATOR].level;\n\t\t},\n\t\tset(level) {\n\t\t\tthis[GENERATOR].level = level;\n\t\t},\n\t},\n});\n\nconst createStyler = (open, close, parent) => {\n\tlet openAll;\n\tlet closeAll;\n\tif (parent === undefined) {\n\t\topenAll = open;\n\t\tcloseAll = close;\n\t} else {\n\t\topenAll = parent.openAll + open;\n\t\tcloseAll = close + parent.closeAll;\n\t}\n\n\treturn {\n\t\topen,\n\t\tclose,\n\t\topenAll,\n\t\tcloseAll,\n\t\tparent,\n\t};\n};\n\nconst createBuilder = (self, _styler, _isEmpty) => {\n\t// Single argument is hot path, implicit coercion is faster than anything\n\t// eslint-disable-next-line no-implicit-coercion\n\tconst builder = (...arguments_) => applyStyle(builder, (arguments_.length === 1) ? ('' + arguments_[0]) : arguments_.join(' '));\n\n\t// We alter the prototype because we must return a function, but there is\n\t// no way to create a function with a different prototype\n\tObject.setPrototypeOf(builder, proto);\n\n\tbuilder[GENERATOR] = self;\n\tbuilder[STYLER] = _styler;\n\tbuilder[IS_EMPTY] = _isEmpty;\n\n\treturn builder;\n};\n\nconst applyStyle = (self, string) => {\n\tif (self.level <= 0 || !string) {\n\t\treturn self[IS_EMPTY] ? '' : string;\n\t}\n\n\tlet styler = self[STYLER];\n\n\tif (styler === undefined) {\n\t\treturn string;\n\t}\n\n\tconst {openAll, closeAll} = styler;\n\tif (string.includes('\\u001B')) {\n\t\twhile (styler !== undefined) {\n\t\t\t// Replace any instances already present with a re-opening code\n\t\t\t// otherwise only the part of the string until said closing code\n\t\t\t// will be colored, and the rest will simply be 'plain'.\n\t\t\tstring = stringReplaceAll(string, styler.close, styler.open);\n\n\t\t\tstyler = styler.parent;\n\t\t}\n\t}\n\n\t// We can move both next actions out of loop, because remaining actions in loop won't have\n\t// any/visible effect on parts we add here. Close the styling before a linebreak and reopen\n\t// after next line to fix a bleed issue on macOS: https://github.com/chalk/chalk/pull/92\n\tconst lfIndex = string.indexOf('\\n');\n\tif (lfIndex !== -1) {\n\t\tstring = stringEncaseCRLFWithFirstIndex(string, closeAll, openAll, lfIndex);\n\t}\n\n\treturn openAll + string + closeAll;\n};\n\nObject.defineProperties(createChalk.prototype, styles);\n\nconst chalk = createChalk();\nexport const chalkStderr = createChalk({level: stderrColor ? stderrColor.level : 0});\n\nexport {\n\tmodifierNames,\n\tforegroundColorNames,\n\tbackgroundColorNames,\n\tcolorNames,\n\n\t// TODO: Remove these aliases in the next major version\n\tmodifierNames as modifiers,\n\tforegroundColorNames as foregroundColors,\n\tbackgroundColorNames as backgroundColors,\n\tcolorNames as colors,\n} from './vendor/ansi-styles/index.js';\n\nexport {\n\tstdoutColor as supportsColor,\n\tstderrColor as supportsColorStderr,\n};\n\nexport default chalk;\n", "const ANSI_BACKGROUND_OFFSET = 10;\n\nconst wrapAnsi16 = (offset = 0) => code => `\\u001B[${code + offset}m`;\n\nconst wrapAnsi256 = (offset = 0) => code => `\\u001B[${38 + offset};5;${code}m`;\n\nconst wrapAnsi16m = (offset = 0) => (red, green, blue) => `\\u001B[${38 + offset};2;${red};${green};${blue}m`;\n\nconst styles = {\n\tmodifier: {\n\t\treset: [0, 0],\n\t\t// 21 isn't widely supported and 22 does the same thing\n\t\tbold: [1, 22],\n\t\tdim: [2, 22],\n\t\titalic: [3, 23],\n\t\tunderline: [4, 24],\n\t\toverline: [53, 55],\n\t\tinverse: [7, 27],\n\t\thidden: [8, 28],\n\t\tstrikethrough: [9, 29],\n\t},\n\tcolor: {\n\t\tblack: [30, 39],\n\t\tred: [31, 39],\n\t\tgreen: [32, 39],\n\t\tyellow: [33, 39],\n\t\tblue: [34, 39],\n\t\tmagenta: [35, 39],\n\t\tcyan: [36, 39],\n\t\twhite: [37, 39],\n\n\t\t// Bright color\n\t\tblackBright: [90, 39],\n\t\tgray: [90, 39], // Alias of `blackBright`\n\t\tgrey: [90, 39], // Alias of `blackBright`\n\t\tredBright: [91, 39],\n\t\tgreenBright: [92, 39],\n\t\tyellowBright: [93, 39],\n\t\tblueBright: [94, 39],\n\t\tmagentaBright: [95, 39],\n\t\tcyanBright: [96, 39],\n\t\twhiteBright: [97, 39],\n\t},\n\tbgColor: {\n\t\tbgBlack: [40, 49],\n\t\tbgRed: [41, 49],\n\t\tbgGreen: [42, 49],\n\t\tbgYellow: [43, 49],\n\t\tbgBlue: [44, 49],\n\t\tbgMagenta: [45, 49],\n\t\tbgCyan: [46, 49],\n\t\tbgWhite: [47, 49],\n\n\t\t// Bright color\n\t\tbgBlackBright: [100, 49],\n\t\tbgGray: [100, 49], // Alias of `bgBlackBright`\n\t\tbgGrey: [100, 49], // Alias of `bgBlackBright`\n\t\tbgRedBright: [101, 49],\n\t\tbgGreenBright: [102, 49],\n\t\tbgYellowBright: [103, 49],\n\t\tbgBlueBright: [104, 49],\n\t\tbgMagentaBright: [105, 49],\n\t\tbgCyanBright: [106, 49],\n\t\tbgWhiteBright: [107, 49],\n\t},\n};\n\nexport const modifierNames = Object.keys(styles.modifier);\nexport const foregroundColorNames = Object.keys(styles.color);\nexport const backgroundColorNames = Object.keys(styles.bgColor);\nexport const colorNames = [...foregroundColorNames, ...backgroundColorNames];\n\nfunction assembleStyles() {\n\tconst codes = new Map();\n\n\tfor (const [groupName, group] of Object.entries(styles)) {\n\t\tfor (const [styleName, style] of Object.entries(group)) {\n\t\t\tstyles[styleName] = {\n\t\t\t\topen: `\\u001B[${style[0]}m`,\n\t\t\t\tclose: `\\u001B[${style[1]}m`,\n\t\t\t};\n\n\t\t\tgroup[styleName] = styles[styleName];\n\n\t\t\tcodes.set(style[0], style[1]);\n\t\t}\n\n\t\tObject.defineProperty(styles, groupName, {\n\t\t\tvalue: group,\n\t\t\tenumerable: false,\n\t\t});\n\t}\n\n\tObject.defineProperty(styles, 'codes', {\n\t\tvalue: codes,\n\t\tenumerable: false,\n\t});\n\n\tstyles.color.close = '\\u001B[39m';\n\tstyles.bgColor.close = '\\u001B[49m';\n\n\tstyles.color.ansi = wrapAnsi16();\n\tstyles.color.ansi256 = wrapAnsi256();\n\tstyles.color.ansi16m = wrapAnsi16m();\n\tstyles.bgColor.ansi = wrapAnsi16(ANSI_BACKGROUND_OFFSET);\n\tstyles.bgColor.ansi256 = wrapAnsi256(ANSI_BACKGROUND_OFFSET);\n\tstyles.bgColor.ansi16m = wrapAnsi16m(ANSI_BACKGROUND_OFFSET);\n\n\t// From https://github.com/Qix-/color-convert/blob/3f0e0d4e92e235796ccb17f6e85c72094a651f49/conversions.js\n\tObject.defineProperties(styles, {\n\t\trgbToAnsi256: {\n\t\t\tvalue(red, green, blue) {\n\t\t\t\t// We use the extended greyscale palette here, with the exception of\n\t\t\t\t// black and white. normal palette only has 4 greyscale shades.\n\t\t\t\tif (red === green && green === blue) {\n\t\t\t\t\tif (red < 8) {\n\t\t\t\t\t\treturn 16;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (red > 248) {\n\t\t\t\t\t\treturn 231;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Math.round(((red - 8) / 247) * 24) + 232;\n\t\t\t\t}\n\n\t\t\t\treturn 16\n\t\t\t\t\t+ (36 * Math.round(red / 255 * 5))\n\t\t\t\t\t+ (6 * Math.round(green / 255 * 5))\n\t\t\t\t\t+ Math.round(blue / 255 * 5);\n\t\t\t},\n\t\t\tenumerable: false,\n\t\t},\n\t\thexToRgb: {\n\t\t\tvalue(hex) {\n\t\t\t\tconst matches = /[a-f\\d]{6}|[a-f\\d]{3}/i.exec(hex.toString(16));\n\t\t\t\tif (!matches) {\n\t\t\t\t\treturn [0, 0, 0];\n\t\t\t\t}\n\n\t\t\t\tlet [colorString] = matches;\n\n\t\t\t\tif (colorString.length === 3) {\n\t\t\t\t\tcolorString = [...colorString].map(character => character + character).join('');\n\t\t\t\t}\n\n\t\t\t\tconst integer = Number.parseInt(colorString, 16);\n\n\t\t\t\treturn [\n\t\t\t\t\t/* eslint-disable no-bitwise */\n\t\t\t\t\t(integer >> 16) & 0xFF,\n\t\t\t\t\t(integer >> 8) & 0xFF,\n\t\t\t\t\tinteger & 0xFF,\n\t\t\t\t\t/* eslint-enable no-bitwise */\n\t\t\t\t];\n\t\t\t},\n\t\t\tenumerable: false,\n\t\t},\n\t\thexToAnsi256: {\n\t\t\tvalue: hex => styles.rgbToAnsi256(...styles.hexToRgb(hex)),\n\t\t\tenumerable: false,\n\t\t},\n\t\tansi256ToAnsi: {\n\t\t\tvalue(code) {\n\t\t\t\tif (code < 8) {\n\t\t\t\t\treturn 30 + code;\n\t\t\t\t}\n\n\t\t\t\tif (code < 16) {\n\t\t\t\t\treturn 90 + (code - 8);\n\t\t\t\t}\n\n\t\t\t\tlet red;\n\t\t\t\tlet green;\n\t\t\t\tlet blue;\n\n\t\t\t\tif (code >= 232) {\n\t\t\t\t\tred = (((code - 232) * 10) + 8) / 255;\n\t\t\t\t\tgreen = red;\n\t\t\t\t\tblue = red;\n\t\t\t\t} else {\n\t\t\t\t\tcode -= 16;\n\n\t\t\t\t\tconst remainder = code % 36;\n\n\t\t\t\t\tred = Math.floor(code / 36) / 5;\n\t\t\t\t\tgreen = Math.floor(remainder / 6) / 5;\n\t\t\t\t\tblue = (remainder % 6) / 5;\n\t\t\t\t}\n\n\t\t\t\tconst value = Math.max(red, green, blue) * 2;\n\n\t\t\t\tif (value === 0) {\n\t\t\t\t\treturn 30;\n\t\t\t\t}\n\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tlet result = 30 + ((Math.round(blue) << 2) | (Math.round(green) << 1) | Math.round(red));\n\n\t\t\t\tif (value === 2) {\n\t\t\t\t\tresult += 60;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\tenumerable: false,\n\t\t},\n\t\trgbToAnsi: {\n\t\t\tvalue: (red, green, blue) => styles.ansi256ToAnsi(styles.rgbToAnsi256(red, green, blue)),\n\t\t\tenumerable: false,\n\t\t},\n\t\thexToAnsi: {\n\t\t\tvalue: hex => styles.ansi256ToAnsi(styles.hexToAnsi256(hex)),\n\t\t\tenumerable: false,\n\t\t},\n\t});\n\n\treturn styles;\n}\n\nconst ansiStyles = assembleStyles();\n\nexport default ansiStyles;\n", "/* eslint-env browser */\n\nconst level = (() => {\n\tif (navigator.userAgentData) {\n\t\tconst brand = navigator.userAgentData.brands.find(({brand}) => brand === 'Chromium');\n\t\tif (brand && brand.version > 93) {\n\t\t\treturn 3;\n\t\t}\n\t}\n\n\tif (/\\b(Chrome|Chromium)\\//.test(navigator.userAgent)) {\n\t\treturn 1;\n\t}\n\n\treturn 0;\n})();\n\nconst colorSupport = level !== 0 && {\n\tlevel,\n\thasBasic: true,\n\thas256: level >= 2,\n\thas16m: level >= 3,\n};\n\nconst supportsColor = {\n\tstdout: colorSupport,\n\tstderr: colorSupport,\n};\n\nexport default supportsColor;\n", "// TODO: When targeting Node.js 16, use `String.prototype.replaceAll`.\nexport function stringReplaceAll(string, substring, replacer) {\n\tlet index = string.indexOf(substring);\n\tif (index === -1) {\n\t\treturn string;\n\t}\n\n\tconst substringLength = substring.length;\n\tlet endIndex = 0;\n\tlet returnValue = '';\n\tdo {\n\t\treturnValue += string.slice(endIndex, index) + substring + replacer;\n\t\tendIndex = index + substringLength;\n\t\tindex = string.indexOf(substring, endIndex);\n\t} while (index !== -1);\n\n\treturnValue += string.slice(endIndex);\n\treturn returnValue;\n}\n\nexport function stringEncaseCRLFWithFirstIndex(string, prefix, postfix, index) {\n\tlet endIndex = 0;\n\tlet returnValue = '';\n\tdo {\n\t\tconst gotCR = string[index - 1] === '\\r';\n\t\treturnValue += string.slice(endIndex, (gotCR ? index - 1 : index)) + prefix + (gotCR ? '\\r\\n' : '\\n') + postfix;\n\t\tendIndex = index + 1;\n\t\tindex = string.indexOf('\\n', endIndex);\n\t} while (index !== -1);\n\n\treturnValue += string.slice(endIndex);\n\treturn returnValue;\n}\n", "import chalkNative from \"chalk\";\r\n\r\nconst chalkProps = Object.getOwnPropertyNames(Object.getPrototypeOf(chalkNative)).filter(v=>v!==\"constructor\");\r\n\r\nclass Logger extends Function {\r\n    constructor(formater, chalkInit) {\r\n        super();\r\n        const chalk = chalkInit||chalkNative;\r\n\r\n        const log = (...msgs)=>{ console.log(chalk(formater(msgs))); }\r\n        const self = Object.setPrototypeOf(log.bind(), new.target.prototype);\r\n\r\n        for (const prop of chalkProps) {\r\n            Object.defineProperty(self, prop, { get: _=>new Logger(formater, chalk[prop]), enumerable:false });\r\n        }\r\n        \r\n        return self;\r\n    }\r\n}\r\n\r\nexport const logger = (...prefixes)=>{\r\n    const now = _=>(new Date()).toLocaleTimeString(\"cs-CZ\");\r\n    prefixes = prefixes.filter(v=>!!v).join(\" \");\r\n\r\n    return new Logger(msgs=>`${prefixes} | ${now()} | ${msgs.join(\" \")}`);\r\n}", "const enumerable = true;\r\nconst lockObject = o=>{\r\n    if (typeof o !== \"object\") { return o; }\r\n\r\n    const r = {};\r\n    for (const i in o) {\r\n        const descriptor = { enumerable };\r\n        let val = o[i];\r\n        if (val instanceof Array) { descriptor.get = _=>[...val]; }\r\n        else { descriptor.value = lockObject(val); }\r\n        Object.defineProperty(r, i, descriptor);\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\nexport const info = lockObject(__slib_info);\r\nexport default info;", "import { info } from \"../info\";\r\nimport { logger } from \"../tools/logger\";\r\n\r\nexport default info;\r\n\r\nexport const log = logger(info.name, info.version, info.env);\r\n\r\nexport {\r\n    info,\r\n}", "import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n", "import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n", "import { Socket } from \"./socket.js\";\nexport { Socket };\nexport { SocketWithoutUpgrade, SocketWithUpgrade, } from \"./socket.js\";\nexport const protocol = Socket.protocol;\nexport { Transport, TransportError } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nexport { installTimerFunctions } from \"./util.js\";\nexport { parse } from \"./contrib/parseuri.js\";\nexport { nextTick } from \"./globals.node.js\";\nexport { Fetch } from \"./transports/polling-fetch.js\";\nexport { XHR as NodeXHR } from \"./transports/polling-xhr.node.js\";\nexport { XHR } from \"./transports/polling-xhr.js\";\nexport { WS as NodeWebSocket } from \"./transports/websocket.node.js\";\nexport { WS as WebSocket } from \"./transports/websocket.js\";\nexport { WT as WebTransport } from \"./transports/webtransport.js\";\n", "import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n", "import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n", "import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n", "import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n", "import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n", "import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n", "import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n", "const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n", "import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n", "// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n", "/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n", "import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n", "export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n", "// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n", "// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n", "import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n", "import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n", "// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n", "import { Polling } from \"./polling.js\";\n/**\n * HTTP long-polling based on the built-in `fetch()` method.\n *\n * Usage: browser, Node.js (since v18), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/fetch\n * @see https://caniuse.com/fetch\n * @see https://nodejs.org/api/globals.html#fetch\n */\nexport class Fetch extends Polling {\n    doPoll() {\n        this._fetch()\n            .then((res) => {\n            if (!res.ok) {\n                return this.onError(\"fetch read error\", res.status, res);\n            }\n            res.text().then((data) => this.onData(data));\n        })\n            .catch((err) => {\n            this.onError(\"fetch read error\", err);\n        });\n    }\n    doWrite(data, callback) {\n        this._fetch(data)\n            .then((res) => {\n            if (!res.ok) {\n                return this.onError(\"fetch write error\", res.status, res);\n            }\n            callback();\n        })\n            .catch((err) => {\n            this.onError(\"fetch write error\", err);\n        });\n    }\n    _fetch(data) {\n        var _a;\n        const isPost = data !== undefined;\n        const headers = new Headers(this.opts.extraHeaders);\n        if (isPost) {\n            headers.set(\"content-type\", \"text/plain;charset=UTF-8\");\n        }\n        (_a = this.socket._cookieJar) === null || _a === void 0 ? void 0 : _a.appendCookies(headers);\n        return fetch(this.uri(), {\n            method: isPost ? \"POST\" : \"GET\",\n            body: isPost ? data : null,\n            headers,\n            credentials: this.opts.withCredentials ? \"include\" : \"omit\",\n        }).then((res) => {\n            var _a;\n            // @ts-ignore getSetCookie() was added in Node.js v19.7.0\n            (_a = this.socket._cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(res.headers.getSetCookie());\n            return res;\n        });\n    }\n}\n", "import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n", "import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n", "import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n", "import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n", "const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n", "export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n", "/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n", "export const numOrZero = num=>{ \r\n    const n = Number(num);\r\n    return isNaN(n) ? 0 : Math.max(0, n);\r\n}\r\n\r\nexport const toArray = any=>{\r\n    if (any == null) { return []; }\r\n    if (Array.isArray(any)) { return any; }\r\n    return [ any ];\r\n}", "import { numOrZero, toArray } from \"./tools\";\n\nconst _pass = [\"all\", \"first\", \"last\"];\n\nexport const fakePromise = ()=>{\n    const prom = {};\n    prom.result = new Promise((res, rej)=>{\n        prom.resolve = res;\n        prom.reject = rej;\n    });\n    return prom;\n}\n\nexport class Queue extends Function {\n\n    constructor(processTasks, opt={}) {\n        super();\n\n        opt = typeof opt === \"object\" ? opt : {};\n\n        if (typeof processTasks !== \"function\") { throw Error(\"Queue(...) expect first argument to be function\"); }\n\n        const onInit = opt.onInit;\n        if (onInit && typeof onInit !== \"function\") { throw Error(\"Queue(...) expect opt.onInit to be function\"); }\n\n        const pass = opt.pass != null ? opt.pass : \"all\";\n        if (!_pass.includes(pass)) { throw Error(`Queue(...) expect opt.pass to be one of: '${_pass.join(\"|\")}'`); }\n        \n        const args = toArray(opt.args);\n        const softMs = numOrZero(opt.softMs);\n        const hardMs = numOrZero(opt.hardMs);\n        const maxSize = numOrZero(opt.maxSize);\n        const hardMsActive = hardMs > softMs;\n        \n        let pcq, intA, intB, startAt, prom, tasks = [];\n\n        if (pass === \"all\") { pcq = async q=>processTasks(...args, q); }\n        else if (pass === \"first\") { pcq = async q=>processTasks(...args, ...q[0]); }\n        else if (pass === \"last\") { pcq = async q=>processTasks(...args, ...q[q.length-1]); }\n\n        const init = _=>{\n            startAt = Date.now();\n            prom = fakePromise();\n            if (onInit) { onInit(); }\n            if (hardMsActive) { intB = setTimeout(execute, hardMs); }\n        }\n\n        const execute = async _=>{\n            clearTimeout(intA);\n            clearTimeout(intB);\n            const q = tasks;\n            tasks = [];\n            startAt = undefined;\n            pcq(q).then(prom.resolve).catch(prom.reject);\n        };\n\n        const call = async (...args)=>{\n            clearTimeout(intA);\n            tasks.push(args);\n\n            if (tasks.length === 1) {init();}\n            if (maxSize && tasks.length >= maxSize) { execute(); }\n            else { intA = setTimeout(execute, softMs); }\n\n            if (opt.returnResult) { return prom.result; }\n        }\n\n        const self = Object.setPrototypeOf(call, new.target.prototype);\n\n        Object.defineProperties(self, {\n            isPending:{ enumerable:true, get:_=>!!startAt },\n            size:{ enumerable:true, get:_=>tasks.length },\n            startAt:{ enumerable:true, get:_=>startAt },\n            softEndAt:{ enumerable:true, get:_=>!startAt ? undefined : (startAt + softMs) },\n            hardEndAt:{ enumerable:true, get:_=>(!startAt || !hardMsActive) ? undefined : (startAt + hardMs) }\n        });\n\n        return self;\n    }\n}\n\nexport const createQueue = (processTasks, opt={})=>new Queue(processTasks, opt);\n\nexport default createQueue;", "const _bifrostEvent = \"__$$BifrostDataChannel__\"; ///do not change\r\n\r\nexport const msg = (method, text, descObj={})=>{\r\n    let desc = \"\";\r\n    for (let i in descObj) { desc += (desc ? \", \" : \"\") + ` ${i} '${descObj[i]}'`; }\r\n    return `Bifrost${method}${desc} ${text}`;\r\n};\r\n\r\nconst packError = err=>{\r\n    if (!(err instanceof Error)) { return err; }\r\n    const e = {};\r\n    for (let prop in Object.getOwnPropertyDescriptors(err)) { e[prop] = err[prop]; }\r\n    const { channel } = err;\r\n    const extend = msg(\"\", \"remote\", {channel});\r\n    e.message = extend+\" \"+e.message;\r\n    e.stack = extend+\" \"+e.stack;\r\n    return e;\r\n}\r\n\r\nconst unpackError = err=>{\r\n    if (!err?.message) { return err; }\r\n    const e = new Error(err.message);\r\n    for (let prop in err) { e[prop] = err[prop]; }\r\n    return e;\r\n}\r\n\r\nexport const validateOnError = (onError)=>{\r\n    if (typeof onError === \"function\") { return onError; }\r\n    return ()=>{};\r\n}\r\n\r\nexport const emit = async (socket, channel, body, onError)=>{\r\n    return new Promise((res, rej)=>{\r\n        socket.emit(_bifrostEvent, {channel, body}, (ok, response)=>{\r\n            if (ok) { return res(response); }\r\n            const err = unpackError(response);\r\n            rej(err);\r\n            onError(err);\r\n        });\r\n    });\r\n}\r\n\r\nexport const hear = (socket, getChannel, onError)=>{\r\n    const listener = async ({channel, body}, ack)=>{\r\n        const receiver = getChannel(channel);\r\n        try { await ack(true, !receiver ? undefined : await receiver(socket, body)); }\r\n        catch (err) {\r\n            err.channel = channel;\r\n            await ack(false, packError(err));\r\n            onError(err);\r\n        }\r\n    }\r\n\r\n    socket.on(_bifrostEvent, listener);\r\n    return _=>socket.off(_bifrostEvent, listener);\r\n}\r\n\r\n\r\nexport const unregisterExe = (list, exe)=>{\r\n    const x = list.indexOf(exe);\r\n    if (x < 0) { return false; }\r\n    list.splice(x, 1);\r\n    return true;\r\n}\r\n\r\nexport const registerExe = (list, exe)=>{\r\n    list.unshift(exe);\r\n    return _=>unregisterExe(list, exe);\r\n}\r\n\r\nexport const mapList = async (map, list, ...args)=>{\r\n    for (let i=list.length-1; i>=0; i--) {\r\n        try { \r\n            const res = await list[i](...args);\r\n            if (map && typeof res === \"function\") { map.push(res); }\r\n        }\r\n        catch(err) { console.warn(err); }\r\n    }\r\n}\r\n\r\nexport const mapSockets = (sockets, execute, except)=>{\r\n    const result = [];\r\n    for (const socket of sockets) {\r\n        if (socket === except) { continue; }\r\n        result.push(execute(socket));\r\n    }\r\n    return result;\r\n}", "import { createQueue } from \"@randajan/queue\";\r\nimport { msg } from \"../tools\";\r\n\r\nexport const wrapWithQueue = (exe, queue)=>!queue ? exe : createQueue(exe, queue);\r\nconst wrapWithTrait = (exe, trait)=>!trait ? exe : async (s, ...a)=>exe(await trait(s, ...a), ...a);\r\n\r\nexport const stateExtract = (stateProperty, reply)=>{\r\n    if (stateProperty == null) { return reply; }\r\n    if (reply != null) { return reply[stateProperty]; }\r\n}\r\nexport const stateAttach = (stateProperty, reply, state)=>{\r\n    if (stateProperty == null) { return state; }\r\n    if (reply == null) { return {[stateProperty]:state}; }\r\n    reply[stateProperty] = state;\r\n    return reply;\r\n}\r\n\r\nconst defaultStateAdapter = opt=>{\r\n    let state;\r\n    opt.get = _=>state;\r\n    opt.set = newState=>state=newState;\r\n}\r\n\r\nconst defaultStatesAdapter = opt=>{\r\n    const states = new Map();\r\n    opt.get = (groupId)=>states.get(groupId);\r\n    opt.set = (state, groupId)=>{\r\n        if (state == null) { states.delete(groupId); }\r\n        else { states.set(groupId, state); }\r\n        return state;\r\n    }\r\n}\r\n\r\nconst formatReact = reactions=>{\r\n    if (!reactions) { return; }\r\n    return (state, args)=>{\r\n        const { action, actionArguments } = (state || {});\r\n        if (!action) { throw Error(msg(\".Beam\", `undefined action`)); }\r\n        if (!reactions[action]) { throw Error(msg(\".Beam\", `unknown action '${action}'`)); }\r\n        return reactions[action](...(actionArguments || []), ...args);\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const formatOpt = (channel, opt, isMultiState)=>{\r\n    if (!opt) { opt = {}; }\r\n    if (!opt.set) {\r\n        if (opt.get) { opt.allowChanges = \"none\"; }\r\n        opt.set = opt.get;\r\n    }\r\n    if (!opt.get) {\r\n        if (opt.set) { throw Error(msg(\".Beam(opt)\", \"contain set property without get\", {channel})); }\r\n        if (!isMultiState) { defaultStateAdapter(opt); }\r\n        else { defaultStatesAdapter(opt); }\r\n    }\r\n    if (opt.queue) {\r\n        opt.queue.pass = \"last\";\r\n        opt.queue.returnResult = true;\r\n    }\r\n    if (!opt.actions) { opt.actions = []; }\r\n    opt.react = formatReact(opt.reactions);\r\n    \r\n    opt.set = wrapWithTrait(opt.set, opt.trait);\r\n    \r\n    return opt;\r\n}", "import { mapList, msg, registerExe } from \"../tools\";\r\nimport { wrapWithQueue, stateExtract, stateAttach, formatOpt } from \"./helpers\";\r\n\r\nconst enumerable = true;\r\nconst _privates = new WeakMap();\r\n\r\nexport class Beam {\r\n\r\n    constructor(router, channel, routerAdapter, opt={}) {\r\n        const { pull:pullRaw, push:pushRaw, register, isMultiState } = routerAdapter;\r\n        const {\r\n            get,\r\n            set:setRaw,\r\n            remoteStateProp,\r\n            localStateProp,\r\n            allowChanges:ac,\r\n            queue,\r\n            actions,\r\n            react,\r\n            onError\r\n        } = formatOpt(channel, opt, isMultiState);\r\n\r\n        const _p = {\r\n            channel,\r\n            status:\"init\", // [\"init\", \"error\", \"push\", \"pull\", \"ready\"]\r\n            watchers:[],\r\n            error:null,\r\n            pending:null,\r\n            remoteStateProp,\r\n            localStateProp,\r\n            get,\r\n            actions,\r\n        }\r\n\r\n        const propagate = (state, args)=>{ mapList(undefined, _p.watchers, state, ...args); }\r\n        const set = async (state, args)=>{\r\n            let local;\r\n            try {\r\n                if (react) { state = await react(state, args); }\r\n                local = await setRaw(state, ...args);\r\n            } catch(error) {\r\n                if (!onError) { throw error; }\r\n                local = await onError(error, ...args);\r\n            }\r\n            propagate(stateExtract(localStateProp, local), args); //should propagate only state!!!\r\n            return local;\r\n        }\r\n\r\n        const setRx = async (state, ...args)=>{ //client beam called push\r\n            if (ac && ac != \"remote\") { throw Error(msg(\".Beam\", \"doesn't allow remote changes\", {channel})); }\r\n            return set(state, args);\r\n        };\r\n\r\n        const push = async (state, args)=>{\r\n            if (ac && ac != \"local\") { throw Error(msg(\".Beam\", \"doesn't allow local changes\", {channel})); }\r\n            if (!pushRaw) { return set(state, args); }\r\n            const remote = await pushRaw(state, ...args);\r\n            const local = await set(stateExtract(remoteStateProp, remote), args);\r\n            return stateAttach(remoteStateProp, remote, stateExtract(localStateProp, local));\r\n        }\r\n\r\n        const pull = !pullRaw ? async args=>propagate(await get(...args), args) : async args=>set(await pullRaw(...args), args);\r\n\r\n        const processWithStatus = async (status, pending)=>{\r\n            let state;\r\n            _p.status = status;\r\n            _p.pending = pending;\r\n\r\n            try {\r\n                state = await _p.pending;\r\n                _p.status = \"ready\";\r\n            } catch(err) {\r\n                console.error(err);\r\n                _p.error = err;\r\n                _p.status = \"error\";\r\n            }\r\n\r\n            delete _p.pending;\r\n            return state;\r\n        }\r\n\r\n        _p.pull = args=>processWithStatus(\"pull\", pull(args));\r\n        _p.push = wrapWithQueue((state, args)=>processWithStatus(\"push\", push(state, args)), queue);\r\n\r\n\r\n        Object.defineProperties(this, {\r\n            router:{ value:router},\r\n            channel:{ enumerable, value:channel },\r\n            isPending:{ enumerable, get:_=>!!_p.pending },\r\n            isDone:{ enumerable, get:_=>_p.status === \"ready\" || _p.status === \"error\" },\r\n            status:{ enumerable, get:_=>_p.status },\r\n            allowChanges:{ enumerable, value:ac },\r\n        });\r\n\r\n        _privates.set(this, _p);\r\n\r\n        this.applyActions(this.set.bind(this), this);\r\n\r\n        register(this, setRx);\r\n    }\r\n\r\n    async refresh(...args) {\r\n        const { pending, pull} = _privates.get(this);\r\n        if (pending) { await pending; } else { await pull(args); }\r\n    }\r\n\r\n    getRaw(...args) {\r\n        const { status, pull, get } = _privates.get(this);\r\n        if (status === \"init\") { pull(args); }\r\n        return get(...args);\r\n    }\r\n\r\n    async get(...args) {\r\n        const { pending, status, pull, get } = _privates.get(this);\r\n        if (pending) { await pending; }\r\n        else if (status === \"init\") { await pull(args); }\r\n        return get(...args);\r\n    }\r\n\r\n    async set(state, ...args) {\r\n        const { pending, push } = _privates.get(this);\r\n        if (pending) { await pending; }\r\n        return push(state, args);\r\n    }\r\n\r\n    watch(watcher) {\r\n        const { channel, watchers } = _privates.get(this);\r\n\r\n        if (typeof watcher !== \"function\") { throw Error(msg(\".Beam.watch(...)\", \"expect function\", {channel})); }\r\n        \r\n        return registerExe(watchers, watcher);\r\n    }\r\n\r\n    extractRemoteState(reply) {\r\n        const { remoteStateProp } = _privates.get(this);\r\n        return stateExtract(remoteStateProp, reply);\r\n    }\r\n\r\n    extractLocalState(reply) {\r\n        const { localStateProp } = _privates.get(this);\r\n        return stateExtract(localStateProp, reply);\r\n    }\r\n\r\n    applyActions(setMethod, target={}) {\r\n        const { actions } = _privates.get(this);\r\n        for (let action of actions) {\r\n            const act = (...a)=>setMethod({action, actionArguments:a});\r\n            Object.defineProperty(target, action, { value:act });\r\n        }\r\n        return target;\r\n    }\r\n}", "import { emit, hear, msg, validateOnError } from \"../../arc/tools\";\r\nimport { Beam } from \"../../arc/beam/Beam\";\r\n\r\nconst _privates = new WeakMap();\r\n\r\nexport class ClientRouter {\r\n\r\n    constructor(socket, onError) {\r\n        onError = validateOnError(onError);\r\n        \r\n        const _p = {\r\n            socket,\r\n            channels:new Map(),\r\n            onError\r\n        }\r\n\r\n        Object.defineProperties(this, {\r\n            socket:{ value:socket }\r\n        });\r\n\r\n        hear(socket, channel=>_p.channels.get(channel), onError);\r\n\r\n        _privates.set(this, _p);\r\n    }\r\n    \r\n    async tx(channel, transceiver) {\r\n        const { socket, onError } = _privates.get(this);\r\n        const rnbl = typeof transceiver === \"function\";\r\n\r\n        if (!rnbl) { return emit(socket, channel, transceiver, onError); }\r\n        return transceiver(body=>emit(socket, channel, body, onError));\r\n    }\r\n\r\n    rx(channel, receiver) {\r\n        const { channels } = _privates.get(this);\r\n        if (channels.has(channel)) { throw Error(msg(\"Router\", `allready exist!`, {channel})); }\r\n\r\n        channels.set(channel, receiver);\r\n\r\n        return _=>{\r\n            if (!channels.has(channel)) { return false; }\r\n            channels.delete(channel);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    createBeam(channel, opt={}) {\r\n        return new Beam(this, channel, {\r\n            pull:async _=>{\r\n                return this.tx(channel, {isSet:false});\r\n            },\r\n            push:(state)=>{\r\n                return this.tx(channel, {isSet:true, state});\r\n            },\r\n            register:(beam, set)=>{\r\n                this.rx(channel, (socket, state)=>set(state));\r\n            }\r\n        }, opt);\r\n    }\r\n\r\n}", "import { ClientRouter as BifrostRouter } from \"./router/ClientRouter\";\n\nexport {\n    BifrostRouter\n}\n\nexport default BifrostRouter;\n\n", "import {\n  src_default\n} from \"./chunk-UOVKGED6.js\";\nimport \"./chunk-MQZZBFQG.js\";\nimport \"./chunk-C7UZX2AX.js\";\nexport {\n  src_default as default\n};\n//# sourceMappingURL=index.js.map\n", "class Plex extends Function {\r\n\r\n    static extend(self, props={}) {\r\n        for (let i in props) {\r\n            Object.defineProperty(self, i, {value:props[i], enumerable:true});\r\n        }\r\n        return self;\r\n    }\r\n\r\n    constructor(fce, props={}) {\r\n        super();\r\n        return Plex.extend(Object.setPrototypeOf(fce ? fce.bind() : this, new.target.prototype), props);\r\n    }\r\n}\r\n\r\nexport default Plex;", "import Plex from \"../class/extra/Plex\";\r\n\r\nconst byName = {};\r\nconst byPrototype = new Map();\r\nconst constructorByName = {};\r\n\r\nconst defaultThrow = (msg, name)=>`jet${name ? ` type '${name}'` : \"\"} ${msg}`;\r\nexport const throwError = (msg, name)=>{ throw defaultThrow(msg, name); }\r\nexport const throwWarn = (msg, name)=>{ console.warn(defaultThrow(msg, name)); }\r\n\r\nexport const getDefByName = name=>byName[name];\r\nexport const getDefByProto = prototype=>{\r\n    const list = byPrototype.get(prototype);\r\n    return list ? list[0] : undefined;\r\n}\r\n\r\nconst getByInst = (any, def, withDef=true)=>{\r\n    if (!def.is || def.is(any)) { return withDef ? def : def.name; }\r\n}\r\n\r\nconst findByProto = (any, proto, withDef=true)=>{\r\n    const list = byPrototype.get(proto);\r\n    if (!list) { return; }\r\n    if (list.length === 1) { return getByInst(any, list[0], withDef); }\r\n    for (const def of list) {\r\n        const r = getByInst(any, def, withDef);\r\n        if (r) { return r; }\r\n    }\r\n}\r\n\r\nconst findByInst = (any, strict, withDef=true)=>{\r\n    if (any == null) { return; }\r\n    if (strict) { return findByProto(any, any.__proto__, withDef); }\r\n    let r, p = any;\r\n    do { r = findByProto(any, p = p.__proto__, withDef); }\r\n    while (p && r === undefined);\r\n    return r;\r\n}\r\n\r\nexport const getDefByInst = (any, strict=true)=>findByInst(any, strict, true);\r\n\r\nexport const getNameByInst = (any, strict=true)=>findByInst(any, strict, false);\r\n\r\n\r\nexport const register = def=>{\r\n    byName[def.name] = def;\r\n    Object.defineProperty(constructorByName, def.name, {enumerable:true, value:def.constructor});\r\n    const list = byPrototype.get(def.prototype);\r\n    if (list) { list.unshift(def); }\r\n    else { byPrototype.set(def.prototype, [def]); }\r\n}\r\n\r\nexport default new Plex(getNameByInst, {\r\n    types:constructorByName,\r\n});\r\n", "import jet, { throwError, getDefByName, getDefByInst } from \"./base.js\";\r\n\r\nconst enumerable = true;\r\nconst _magic = [\"only\", \"full\", \"tap\", \"pull\", \"is\", \"to\", \"copy\", \"rnd\"];\r\n\r\nexport const isInstance = any=>{\r\n    const t = typeof any;\r\n    return any != null && (t === \"function\" || t === \"object\");\r\n}\r\nexport const isInstanceOf = (constructor, any)=>any instanceof constructor; //is instance comparing\r\n\r\nexport const is = (name, any, strict=true)=>{\r\n    if (!name) { return false; }\r\n    const def = getDefByName(name);\r\n    if (def) {\r\n        if (any == null) { return false; }\r\n        if (strict && any.__proto__ !== def.prototype) { return false; }\r\n        if (!strict && !(any instanceof def.constructor)) { return false; }\r\n        return !def.is || def.is(any);\r\n    }\r\n    const nt = typeof name;\r\n    if (nt === \"string\") { return typeof any === name; }\r\n    if (any == null || (nt !== \"function\" && nt !== \"object\")) { return false; }\r\n    return strict ? any.constructor === name : any instanceof name;\r\n}\r\n\r\nexport const isFull = (any, vals)=>{\r\n    if (!vals) { return (any === false || any === 0 || !!any); }\r\n    for (let v of vals(any)) { if (v != null) { return true; }}\r\n    return false;\r\n}\r\n\r\n\r\nconst _touch = (def, op, err, ...args)=>{\r\n    if (def[op]) { return def[op](...args); }\r\n    if (err) { throwError(`undefined operation '${op}' - unavailable for this type`, def.name); }\r\n}\r\nexport const touch = (name, op, err, ...args)=>{\r\n    const def = getDefByName(name);\r\n    if (def) { return _touch(def, op, err, ...args); }\r\n    if (err) { throwError(`unable execute '${op}' - type unknown`, name); }\r\n}\r\nexport const touchBy = (any, op, err, ...args)=>{\r\n    const def = getDefByInst(any, false);\r\n    if (def) { return _touch(def, op, err, any, ...args); }\r\n    if (err) { throwError(`unable execute '${op}' - missing type of '${any}'`); }\r\n}\r\n\r\n//0 = only, 1 = full, 2 = tap, 3 = pull\r\nexport const factory = (name, mm, ...args)=>{\r\n    const def = getDefByName(name);\r\n    const n = isInstance(name);\r\n\r\n    if (n && mm > 0) { throwError(`unable execute '${_magic[mm]}' - unavailable for plain constructors`); }\r\n    if (name && !n && !def) { throwError(`unable execute '${_magic[mm]}' - type unknown`, name); }\r\n    if (!name && mm !== 1) { throwError(`unable execute '${_magic[mm]}' - type missing`); }\r\n\r\n    for (const a of args) {\r\n        if (!n) {\r\n            const at = getDefByInst(a);\r\n            if ((!name || (at && at.name === name)) && (mm !== 1 || (at && at.isFull(a) || (!at && isFull(a))))) {\r\n                return mm === 3 ? at.copy(a) : a;\r\n            }\r\n        }\r\n        else if (isInstanceOf(name, a)) { return a; }\r\n    }\r\n    if (mm > 1) { return def.create(); }\r\n}\r\n\r\nexport const to = (name, any, ...args)=>{\r\n    const def = getDefByName(name);\r\n    if (!def) { throwError(`unable execute 'to' - type unknown`, name); }\r\n    const at = getDefByInst(any, false);\r\n    if (!at) { return def.create(); }\r\n    if (def.name === at.name) { return any; }\r\n    const exe = at.to[name] || at.to[\"*\"]; \r\n    return exe ? to(name, exe(any, ...args), ...args) : def.create(any);\r\n}\r\n\r\nexport const defineTo = (from, to, exe)=>{\r\n    const tt = typeof to;\r\n    const def = getDefByName(from);\r\n    if (!def) { throwError(`unable define 'to' - type unknown`, from); }\r\n    const conv = def.to;\r\n    if (tt === \"function\") { conv[\"*\"] = to; }\r\n    else if (tt === \"object\" && Array.isArray(to)) { for (let i in to) { conv[to[i]] = exe; } }\r\n    else if (tt === \"object\") { for (let i in to) { conv[i] = to[i]; } }\r\n    else { conv[to] = exe; }\r\n}\r\n\r\nexport const getRND = (arr, min, max, sqr)=>{ //get random element from array or string\r\n    if (!arr) { return; }\r\n    arr = Array.from(arr);\r\n    const l = arr.length;\r\n    return arr[Math.floor(Number.jet.rnd(Number.jet.frame(min||0, 0, l), Number.jet.frame(max||l, 0, l), sqr))];\r\n};\r\n\r\n\r\nexport const extend = (def, extender, isNative=false)=>{\r\n    const { name, constructor } = def;\r\n\r\n    for (const key in extender) {\r\n        const value = extender[key];\r\n        Object.defineProperty(constructor.jet, key, {enumerable, value});\r\n\r\n        if (isNative && jet[key]) { Object.defineProperty(jet[key], name, {enumerable, value}); }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nexport const defineExtend = (name, extender={})=>{\r\n    const def = getDefByName(name);\r\n    if (!def) { throwError(`unable define 'extend' - type unknown`, name); }\r\n    if (typeof extender !== \"object\") { throwError(`unable define 'extend' - require object`, name); }\r\n\r\n    if (!def.constructor.jet) { Object.defineProperty(def.constructor, \"jet\", {value:{}, writable:true }); }\r\n\r\n    return extend(def, extender, false);\r\n}", "import { throwError, register, getDefByName, throwWarn, getDefByProto } from \"./base.js\";\r\nimport * as _ from \"./methods.js\";\r\n\r\n\r\nconst accepts = [ \"create\", \"is\", \"isFull\", \"copy\", \"rnd\", \"keys\", \"vals\", \"entries\", \"get\", \"set\", \"rem\", \"to\", \"extend\" ];\r\n\r\nconst define = (name, constructor, options={})=>{\r\n    if (getDefByName(name)) { throwError(\"is allready defined\", name);}\r\n    if (!constructor) { throwError(\"constructor missing\", name); }\r\n\r\n    let { create, is, isFull, copy, rnd, keys, vals, entries, get, set, rem, to, extend } = options;\r\n    const unknownOptions = Object.keys(options).filter(opt => !accepts.includes(opt)); // validate options\r\n\r\n    if (unknownOptions.length) { throwWarn(`unknown options appeared at definition. '${unknownOptions.join(\"', '\")}'`, name); }\r\n    if ((keys || vals || entries) && !(keys && vals && entries)) { throwError(\"keys, vals or entries missing\", name); }\r\n\r\n    const prototype = constructor.prototype;\r\n    const ancestor = getDefByProto(prototype);\r\n    create = create || ((...a)=>new constructor(...a));\r\n    copy = copy || (any=>any);\r\n    rnd = rnd || create;\r\n    isFull = isFull || (any=>_.isFull(any, vals));\r\n\r\n    if (entries) {\r\n        get = get || ((x, k) => x[k]);\r\n        set = set || ((x, k, v) => x[k] = v);\r\n        rem = rem || ((x, k) => delete x[k]);\r\n    }\r\n    \r\n    const def = { name, constructor, prototype, is, create, isFull, copy, rnd, keys, vals, entries, get, set, rem, to:{} };\r\n    register(def);    \r\n    _.defineTo(name, to);\r\n\r\n    if (extend !== false) {\r\n        if (ancestor) { throwWarn(`constructor allready extended as '${ancestor.name}'. Use option 'extend:false'`, name); }\r\n        Object.defineProperty(constructor, \"jet\", { value:{}, writable:true });\r\n        \r\n        _.extend(def, {\r\n            create,\r\n            rnd,\r\n            isFull,\r\n            is: (any, strict = true) => _.is(name, any, strict),\r\n            to: (any, ...a) => _.to(name, any, ...a),\r\n            only: (...a) => _.factory(name, 0, ...a),\r\n            full: (...a) => _.factory(name, 1, ...a),\r\n            tap: (...a) => _.factory(name, 2, ...a),\r\n            pull: (...a) => _.factory(name, 3, ...a)\r\n        }, true);\r\n\r\n        if (entries) {\r\n            _.extend(def, {\r\n                keys,\r\n                vals,\r\n                entries,\r\n                get,\r\n                set,\r\n                rem,\r\n                getRND: (any, min, max, sqr) => _.getRND(vals(any), min, max, sqr)\r\n            }, true);\r\n        }\r\n\r\n        if (typeof extend === \"object\") { _.extend(def, extend); }\r\n    }\r\n\r\n    return constructor;\r\n};\r\n\r\nexport default define;", "import Plex from \"../../class/extra/Plex\";\r\n\r\nexport const solid = new Plex(\r\n    (obj, name, value, enumerable=true)=>Object.defineProperty(obj, name, { enumerable, value }),\r\n    {\r\n        all:(obj, namedValues, enumerable=true)=>{\r\n            for (const [name, value] of Object.entries(namedValues)) {\r\n                solid(obj, name, value, enumerable);\r\n            }\r\n            return obj;\r\n        }\r\n    }\r\n);\r\n\r\nexport const virtual = new Plex(\r\n    (obj, name, get, enumerable=true)=>Object.defineProperty(obj, name, { enumerable, get }),\r\n    {\r\n        all:(obj, namedGets, enumerable=true)=>{\r\n            for (const [name, get] of Object.entries(namedGets)) {\r\n                virtual(obj, name, get, enumerable);\r\n            }\r\n            return obj;\r\n        }\r\n    }\r\n);\r\n\r\nexport const safe = new Plex(\r\n    (obj, priv, name, set, get, enumerable=true)=>{\r\n        return Object.defineProperty(obj, name, {\r\n            set:set ? v=>priv[name] = set(v, priv[name], name) : undefined,\r\n            get:get ? _=>get(priv[name], name) : _=>priv[name],\r\n            enumerable\r\n        });\r\n    },\r\n    {\r\n        all:(obj, priv, namedSetsAndGets, enumerable=true)=>{\r\n            for (const [name, { set, get }] of Object.entries(namedSetsAndGets)) {\r\n                safe(obj, priv, name, set, get, enumerable);\r\n            }\r\n            return obj;\r\n        }\r\n    }\r\n);\r\n\r\nexport const cached = new Plex(\r\n    (obj, priv, name, set, enumerable=true)=>{\r\n        return safe(obj, priv, name, null, v=>v != null ? v : (priv[name] = set(name)), enumerable)\r\n    },\r\n    {\r\n        all:(obj, priv, namedSets, enumerable=true)=>{\r\n            for (const [name, set] of Object.entries(namedSets)) {\r\n                cached(obj, priv, name, set, enumerable);\r\n            }\r\n            return obj;\r\n        }\r\n    }\r\n);\r\n", "import jet, { getDefByInst } from \"../base.js\";\r\nimport * as dot from \"./dot.js\";\r\n\r\n\r\nconst each = (any, fce, deep, init)=>{\r\n    let isPending = true;\r\n    const stop = _=>{ isPending = false; }\r\n\r\n    const dprun = jet.isRunnable(deep);\r\n\r\n    const exe = (ctx, skipDeep=false)=>{\r\n        const { parent, path, def } = ctx;\r\n        const de = def?.entries;\r\n\r\n        if (!de || (!deep && parent)) { fce(ctx); }\r\n        else if (dprun && !skipDeep) { deep(ctx, _=>{ exe(ctx, true); }); }\r\n        else {\r\n            for (let [key, val] of de(ctx.val)) {\r\n                exe({\r\n                    parent:ctx, val, key, stop, def:getDefByInst(val),\r\n                    path:dot.glue(path, dot.escape(String(key)))\r\n                });\r\n                if (!isPending) { break; }\r\n            };\r\n        }\r\n\r\n        return ctx.result;\r\n    }\r\n\r\n    const ctx = { val:any, stop, def:getDefByInst(any) };\r\n    if (init) { init(ctx); }\r\n    return exe(ctx, true);\r\n};\r\n\r\nexport const reducer = reductor=>{\r\n    let i=0, next;\r\n    return next = (...input)=>reductor(next, i++, ...input);\r\n}\r\n\r\nexport const dig = (any, path, reductor)=>{\r\n    path = dot.toArray(path);\r\n\r\n    const end = path.length-1;\r\n    return reducer((next, index, parent)=>{\r\n        return reductor(next, parent, path[index], index === end);\r\n    })(any);\r\n}\r\n\r\nexport const digOut = (any, path, def)=>{\r\n    path = dot.toArray(path);\r\n\r\n    for (let p of path) { if (null == (any = jet.get(any, p, false))) { return def; }}\r\n    return any;\r\n};\r\n\r\nexport const digIn = (any, path, val, force=true)=>{\r\n\r\n    const step = (next, parent, key, isEnd)=>{\r\n        let df = getDefByInst(parent);\r\n        if (!df || !df.entries) {\r\n            if (!force) { return parent; }\r\n            parent = String.jet.isNumeric(key) ? [] : {};\r\n            df = getDefByInst(parent);\r\n        }\r\n        const v = isEnd ? val : next(df.get(parent, key, false));\r\n        if (v != null) { df.set(parent, key, v, false); return parent; }\r\n        df.rem(parent, key);\r\n        if (df.isFull(parent)) { return parent; }\r\n    };\r\n\r\n    return dig(any, path, step);\r\n}\r\n\r\nexport const deflate = (any, includeMapable=false)=>{\r\n    const flat = {};\r\n    const add = ({ val, path }, next)=>{\r\n        flat[path] = val;\r\n        if (next) { next(); }\r\n    };\r\n    each(any, add, includeMapable ? add : true);\r\n    if (includeMapable) { flat[\"\"] = any; }\r\n    return flat;\r\n}\r\n\r\nexport const inflate = (flat, includeMapable=true)=>{\r\n    const r = {};\r\n    for (const e of Object.keys(flat).sort()) {\r\n        if (!includeMapable && jet.isMapable(flat[e])) { continue; }\r\n        digIn(r, \"to.\"+e, flat[e], true);\r\n    }\r\n    return r.to;\r\n};\r\n\r\n const _assign = (overwriteArray, to, ...any)=>{\r\n    const flat = deflate(to, true);\r\n\r\n    const add = ({ val, path })=>{ to = digIn(to, path, val); }\r\n    const acumulate = ({ val, path, def }, next)=>{\r\n        if (!flat[path]) { add(flat[path] = def.create(), path); }\r\n        if (Array.isArray(val) && Array.isArray(flat[path])) { flat[path].push(...val); }\r\n        else { next(val); }\r\n    }\r\n\r\n    for (const a of any) { each(a, add, !!overwriteArray || acumulate); }\r\n\r\n    return to;\r\n};\r\n\r\nexport const assign = (to, from, overwriteArray=true)=>_assign(overwriteArray, to, from);\r\nexport const merge = (...any)=>_assign(false, {}, ...any);\r\n\r\nexport const compare = (a, b, diffList=false)=>{\r\n    if (a === b) { return changeList ? [] : true; }\r\n\r\n    const res = [];\r\n    const flat = deflate(a);\r\n\r\n    each(b, ({ val, path, stop })=>{\r\n        if (flat[path] !== val) { res.push(path); }\r\n        delete flat[path];\r\n        if (!diffList && res.length) { stop(); }\r\n    }, true);\r\n\r\n    for (let path in flat) {\r\n        if (!diffList && res.length) { break; }\r\n        res.push(path);\r\n    }\r\n\r\n    return diffList ? res : !res.length;\r\n}\r\n\r\nexport const copy = (any, deep=false, copyUnmapable=false)=>{\r\n    return each(any, ctx=>{\r\n        const { parent, val, key, def } = ctx;\r\n        if (!parent) { return; }\r\n        parent.def.set(parent.result, key, ctx.result = copyUnmapable ? def.copy(val) : val);\r\n    }, !deep ? false : (ctx, next)=>{\r\n        const { parent, key, def } = ctx;\r\n        parent.def.set(parent.result, key, ctx.result = def.create());\r\n        next();\r\n    }, ctx=>{\r\n        const { val, def } = ctx;\r\n        ctx.result = def.entries ? def.create() : def.copy(val);\r\n    });\r\n}\r\n\r\nexport const melt = (any, comma, trait)=>{\r\n    if (any == null) { return \"\"; }\r\n    if (typeof any === \"string\") { return any; }\r\n    \r\n    let j = \"\", c = String.jet.to(comma);\r\n    if (!jet.isMapable(any)) { return String.jet.to(any, c); }\r\n    if (!jet.isRunnable(trait)) { trait = String.jet.to; }\r\n    each(any, ({ val })=>{\r\n        val = trait(val, c);\r\n        if (val) { j += (j?c:\"\")+val; }\r\n    }, true);\r\n    return j;\r\n}\r\n\r\nexport const run = (any, ...args)=>{\r\n    if (jet.isRunnable(any)) { return any(...args); }\r\n    if (!jet.isMapable(any)) { return undefined; }\r\n    const res = [];\r\n    each(any, ({val})=>{ res.push(jet.isRunnable(val) ? val(...args) : undefined); }, true);\r\n    return res;\r\n}\r\n\r\nexport const enumFactory = (enums, {before, after, def}={})=>(raw, ...args)=>{\r\n    const input = before ? before(raw, ...args) : raw;\r\n    const output = enums.includes(input) ? input : def;\r\n    \r\n    return after ? after(output, ...args) : output;\r\n}\r\n\r\nexport const json = {\r\n    from: (json, throwErr=false)=>{\r\n        if (jet.isMapable(json)) { return json; }\r\n        try { return JSON.parse(String.jet.to(json)); } catch(e) { if (throwErr === true) { throw e } }\r\n    },\r\n    to: (obj, prettyPrint=false)=>{\r\n        const spacing = Number.jet.only(prettyPrint === true ? 2 : prettyPrint);\r\n        return JSON.stringify(jet.isMapable(obj) ? obj : {}, null, spacing);\r\n    }\r\n}", "import jet from \"../base\";\r\n\r\nconst isBlank = str=>str == null || str === \"\";\r\nconst noBlank = str=>isBlank(str) ? \"\" : str;\r\n\r\nexport const escape = str=>typeof str !== \"string\" ? str : str.replaceAll(\".\", \"\\\\.\");\r\nexport const unescape = str=>typeof str !== \"string\" ? str : str.replaceAll(\"\\\\.\", \".\");\r\nexport const split = str=>(str.match(/(?:\\\\.|[^.])+/g) || []).map(unescape);\r\n\r\nexport const bite = (str, direction, position)=>{\r\n    const dir = direction !== false;\r\n    const x = dir ? str.indexOf(\".\", position) : str.lastIndexOf(\".\", position);\r\n    if (x <= 0) { return [str, \"\"]; }\r\n    if (x > 1 && str.charAt(x-1) === \"\\\\\") { return bite(str, dir, x+(dir*2-1)); }\r\n    return direction ? [str.slice(0, x), str.slice(x + 1)] : [str.slice(x + 1), str.slice(0, x)];\r\n}\r\n\r\nexport const biteLeft = (str, position)=>bite(str, true, position);\r\nexport const biteRight = (str, position)=>bite(str, false, position);\r\n\r\nexport const glue = (strA, strB)=>{\r\n    if (isBlank(strA)) { return noBlank(strB); }\r\n    if (isBlank(strB)) { return noBlank(strA); }\r\n\r\n    return strA + \".\" + strB;\r\n}\r\n\r\nexport const toString = any=>jet.melt(any, \".\");\r\nexport const toArray = any=>split(toString(any));\r\n", "import Plex from \"../class/extra/Plex.js\";\r\nimport jet, { getDefByInst } from \"./base.js\";\r\nimport * as _ from \"./methods.js\";\r\nimport define from \"./define.js\";\r\nimport * as prop from \"./extra/props.js\";\r\nimport * as pile from \"./extra/pile.js\";\r\nimport * as dot from \"./extra/dot.js\";\r\n\r\nexport default Plex.extend(jet, {\r\n    is:_.is,\r\n    to:_.to,\r\n    isFull:any=>{ const def = getDefByInst(any, false); return def ? def.isFull(any) : _.isFull(any); },\r\n    isMapable:(any, strict=true)=>{ const def = getDefByInst(any, strict); return def ? !!def.entries : false; },\r\n    isRunnable:any=>typeof any === \"function\",\r\n    full:(...a)=>_.factory(null, 1, ...a),\r\n    only:(name, ...a)=>_.factory(name, 0, ...a),\r\n    tap:(name, ...a)=>_.factory(name, 2, ...a),\r\n    pull:(name, ...a)=>_.factory(name, 3, ...a),\r\n    create:(name, ...a)=>_.touch(name, \"create\", true, ...a),\r\n    rnd:(name, ...a)=>_.touch(name, \"rnd\", true, ...a),\r\n    keys:(any, throwError=false)=>_.touchBy(any, \"keys\", throwError) || [],\r\n    vals:(any, throwError=false)=>_.touchBy(any, \"vals\", throwError) || [],\r\n    entries:(any, throwError=false)=>_.touchBy(any, \"entries\", throwError) || [],\r\n    get:(any, key, throwError=false)=>_.touchBy(any, \"get\", throwError, key),\r\n    set:(any, key, val, throwError=false)=>_.touchBy(any, \"set\", throwError, key, val),\r\n    rem:(any, key, throwError=true)=>_.touchBy(any, \"rem\", throwError, key),\r\n    uid:(length=12, pattern=\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\")=>{\r\n        let r = \"\"; pattern = String.jet.to(pattern) || \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\";\r\n        while (r.length < length) { r += jet.getRND(pattern); }\r\n        return r;\r\n    },\r\n    getRND:(any, min, max, sqr)=>{\r\n        const def = getDefByInst(any);\r\n        if (def && def.vals) { any = def.vals(any); }\r\n        else if (typeof any === \"string\") { return _.getRND(any, min, max, sqr); }\r\n    },\r\n    prop,\r\n    ...pile,\r\n    dot,\r\n    define:new Plex(define, {to:_.defineTo, extend:_.defineExtend})\r\n});\r\n\r\ndefine(\"Plex\", Plex, {\r\n    copy:x=>Object.defineProperties({}, Object.getOwnPropertyDescriptors(x)),\r\n    keys:x=>Object.keys(x),\r\n    vals:x=>Object.values(x),\r\n    entries:x=>Object.entries(x)\r\n});", "\r\nimport jet from \"../../defs\";\r\n\r\njet.define(\"Number\", Number, {\r\n    create:Number,\r\n    rnd:(min, max, sqr)=>{\r\n        let r = Math.random();\r\n        sqr = sqr === true ? 2 : sqr === false ? -2 : Number.jet.is(sqr) ? sqr : 0;\r\n        if (sqr) { r = Math.pow(r, sqr < 0 ? -sqr : 1/sqr); }\r\n        return Number.jet.fromRatio(r, min||0, max||min||1);\r\n    },\r\n    to:{\r\n        Function:num=>_=>num,\r\n        Boolean:num=>!!num,\r\n        Array:(num, comma)=>comma?[num]:Array(num), \r\n        Promise:async num=>num,\r\n        String:num=>String(num)\r\n    },\r\n    extend:{\r\n        x: (num1, symbol, num2)=>{\r\n            const s = symbol, nums = Number.jet.zoomIn(num1, num2), [n, m] = nums;\r\n            if (s === \"/\") { return n/m; }\r\n            if (s === \"*\") { return n*m/Math.pow(nums.zoom, 2); }\r\n            return (s === \"+\" ? n + m : s === \"-\" ? n - m : s === \"%\" ? n % m : NaN) / nums.zoom;\r\n        },\r\n        frame: (num, min, max)=>{\r\n            num = max == null ? num : Math.min(num, max); \r\n            return min == null ? num : Math.max(num, min);\r\n        },\r\n        round: (num, dec, kind)=>{\r\n            const k = Math.pow(10, dec || 0);\r\n            return Math[kind == null ? \"round\" : kind ? \"ceil\" : \"floor\"](num * k) / k;\r\n        },\r\n        len: (num, bol)=>{\r\n            const b = bol, s = String.jet.to(num), l = s.length, i = s.indexOf(\".\"), p = (i >= 0);\r\n            return (b === false ? (p ? l - i - 1 : 0) : ((!p || !b) ? l : i));\r\n        },\r\n        period: (val, min, max)=>{ const m = max - min; return (m + (val - min) % m) % m + min; },\r\n        toRatio: (num, min, max)=>{ const m = max - min; return m ? (num - min) / m : 0; },\r\n        fromRatio: (num, min, max)=>{ const m = max - min; return num * m + min; },\r\n        zoomIn: (...nums)=>{\r\n            const zoom = Math.pow(10, Math.max(...nums.map(num => Number.jet.len(num, false))));\r\n            return jet.prop.solid(nums.map(num => Math.round(num * zoom)), \"zoom\", zoom);\r\n        },\r\n        zoomOut: (...nums)=>nums.map(num => num / nums.zoom),\r\n        diffusion: (num, min, max, diffusion)=>{\r\n            const  d = num * diffusion;\r\n            return Number.jet.rnd(Math.max(min, num - d), Math.min(max, num + d));\r\n        },\r\n        snap: (num, step, min, max, ceil, frame=true)=>{\r\n            var v = num, s = step, n = min, m = max, ni = (n != null), mi = (m != null), c = ceil;\r\n            if (v == null || s == null || s <= 0 || !(ni || mi)) { return v; } else if (frame) { v = Number.jet.frame(v, n, m); }\r\n            var r = ni ? v - n : m - v; v = (r % s) ? ((ni ? n : m) + (Number.jet.round(r / s, 0, c == null ? null : c === ni) * s * (ni * 2 - 1))) : v; //snap\r\n            return (frame ? (Number.jet.frame(v, n, m)) : v); //frame\r\n        },\r\n        whatpow: (num, base)=>Math.log(num)/Math.log(Number.jet.to(base)),\r\n        toHex: num=>{var r = Math.round(num).toString(16); return r.length === 1 ? \"0\" + r : r;},\r\n        toLetter: (num, letters)=>{\r\n            letters = String.jet.to(letters) || \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\r\n            const len = letters.length;\r\n            return (num >= len ? Number.jet.toLetter(Math.floor(num / len) -1) : '') + letters[num % len];\r\n        }\r\n    }\r\n});\r\n", "import jet from \"../../defs\";\r\n\r\nconst fight = (a, b)=>{\r\n    if (a == b) { return; }\r\n    if (a == null) { return true; } else if (b == null) { return false; }\r\n    if (typeof a === \"string\" || typeof b === \"string\") { return a === String.jet.fight(a, b); }\r\n    if (isNaN(a)) { return true; } else if (isNaN(b)) { return false; }\r\n    return a < b;\r\n}\r\n\r\njet.define(\"Array\", Array, {\r\n    create:Array,\r\n    copy:x=>Array.from(x),\r\n    keys:x=>[...x.keys()],\r\n    vals:x=>[...x.values()],\r\n    entries:x=>[...x.entries()],\r\n    to:{\r\n        Function:arr=>_=>arr,\r\n        Boolean:arr=>Array.jet.isFull(arr),\r\n        Number:arr=>arr.length,\r\n        String:(arr, comma)=>jet.melt(arr, comma),\r\n        Object:arr=>Object.assign({}, arr),\r\n        Promise: async arr=>arr,\r\n        Error:(arr, comma)=>jet.melt(arr, comma != null ? comma : \" \"),\r\n        RegExp:(arr, comma)=>jet.melt(arr, comma != null ? comma : \"|\")\r\n    },\r\n    extend:{\r\n        swap:(arr, to, from)=>{//swap position of two items in array\r\n            [arr[to], arr[from]] = [arr[from], arr[to]];\r\n            return arr;\r\n        },\r\n        shuffle:(arr)=>{//shuffle whole array\r\n            for (let i = arr.length - 1; i > 0; i--) {Array.jet.swap(arr, Math.floor(Math.random() * (i + 1)), i);}\r\n            return arr;\r\n        },\r\n        clean:(arr, rekey, handler)=>{\r\n            handler = Function.jet.tap(handler, v=>v!=null);\r\n            return rekey !== false ? arr.filter(handler) : arr.map(v=>handler(v) ? v : undefined);\r\n        },\r\n        compare:(a, b, sameIndex=false)=>{\r\n            if (!Array.isArray(a) || !Array.isArray(b) || a.length !== b.length) { return false; }\r\n            const m = new Map();\r\n            const wr = (v, dir)=>{\r\n                const c = (m.get(v) || 0) + dir;\r\n                if (!c) { m.delete(v); } else { m.set(v, c); }\r\n            }\r\n        \r\n            for (let i=0; i < a.length; i++) {\r\n                if (a[i] === b[i]) { continue; }\r\n                if (sameIndex) { return false; }\r\n                wr(a[i], 1);\r\n                wr(b[i], -1);\r\n            }\r\n        \r\n            return !m.size;\r\n        },\r\n        sliceMap:(arr, size, callback)=>{\r\n            if (!jet.isRunnable(callback)) { callback = _=>_; }\r\n            size = Math.max(1, size) || 1;\r\n            const r = [];\r\n            if (!Array.isArray(arr)) { return r; }\r\n            for (let k = 0; k < arr.length; k += size) { r.push(callback(arr.slice(k, k + size), r.length, size, arr.length)); }\r\n            return r;\r\n        }\r\n    }\r\n});", "import jet from \"../../defs\";\r\n\r\njet.define(\"Boolean\", Boolean, {\r\n    create:Boolean,\r\n    rnd:(trueRatio=.5)=>Math.random() < trueRatio,\r\n    to:{\r\n        Function:bol=>_=>bol\r\n    }\r\n});\r\n\r\n", "import jet from \"../../defs\";\r\n\r\njet.define(\"Date\", Date, {\r\n    create:x=>!x ? new Date() : new Date(x),\r\n    rnd:(from, to)=>new Date(Number.jet.rnd((new Date(from)).getTime(), to ? (new Date(to)).getTime() : Date.now()*2)),\r\n    to:{\r\n        Function:date=>_=>date\r\n    }\r\n});", "import jet from \"../../defs\";\r\n\r\njet.define(\"Error\", Error, {\r\n    create:Error,\r\n    rnd:(...a)=>new Error(jet.rnd.String(...a)),\r\n    to:{\r\n        Function:err=>_=>err\r\n    }\r\n});\r\n", "import jet from \"../../defs\";\r\n\r\njet.define(\"Function\", Function, {\r\n    create: Function,\r\n    copy: x => Object.defineProperties(({ [x.name]: (...a) => x(...a) })[x.name], Object.getOwnPropertyDescriptors(x)),\r\n    extend: {\r\n        benchmark: (fces, inputs, iterations=100) => {\r\n            const results = [];\r\n            const args = [];\r\n            for (let i=0; i<iterations; i++) { args[i] = inputs.map(f=>f()); }\r\n\r\n            for (const key in fces) {\r\n                const fce = fces[key];\r\n                if (typeof fce !== 'function') { continue; }\r\n                const log = [];\r\n                const startTime = performance.now();\r\n                for (let i=0; i<iterations; i++) { log.push({inputs:args[i], output:fce(...args[i])}); }\r\n                const endTime = performance.now();\r\n                const duration = endTime - startTime;\r\n                results.push({ name:fce.name || key, duration, log });\r\n            }\r\n\r\n            return results.sort((a, b) => a.duration - b.duration);\r\n        }\r\n    },\r\n    to: {\r\n        \"*\": (fce, ...args) => fce(...args),\r\n        Promise: async (fce, ...args) => await fce(...args),\r\n    },\r\n});", "import jet from \"../../defs\";\r\n\r\njet.define(\"Map\", Map, {\r\n    copy:x=>new Map(x),\r\n    keys:x=>[...x.keys()],\r\n    vals:x=>[...x.values()],\r\n    entries:x=>[...x.entries()],\r\n    get:(x,k)=>x.get(k),\r\n    set:(x,k,v)=>x.set(k,v),\r\n    rem:(x,k)=>x.delete(k),\r\n    to:{\r\n        Function:map=>_=>map\r\n    }\r\n});", "import jet from \"../../defs\";\r\n\r\njet.define(\"NaN\", Number, {\r\n    create:_=>NaN,\r\n    is:isNaN,\r\n    extend:false,\r\n    to:_=>undefined\r\n});", "import jet from \"../../defs\";\r\n\r\nconst filter = (obj, callback)=>{\r\n    const r = {};\r\n    for (let i in obj) { if (callback(obj[i], i)) { r[i] = obj[i]; } }\r\n    return r;\r\n}\r\n\r\njet.define(\"Object\", Object, {\r\n    create:Object,\r\n    copy:x=>Object.defineProperties({}, Object.getOwnPropertyDescriptors(x)),\r\n    keys:x=>Object.keys(x),\r\n    vals:x=>Object.values(x),\r\n    entries:x=>Object.entries(x),\r\n    extend:{\r\n        filter,\r\n        exclude:(obj, mask=[])=>filter(obj, (v, k)=>!mask.includes(k)),\r\n        extract:(obj, mask=[])=>filter(obj, (v, k)=>mask.includes(k)),\r\n    },\r\n    to:{\r\n        Function:obj=>_=>obj,\r\n        Symbol:obj=>Symbol(jet.json.to(obj)),\r\n        Boolean:obj=>jet.isFull.Object(obj),\r\n        Number:obj=>Object.values(obj),\r\n        Array:obj=>Object.values(obj),\r\n        String:obj=>(obj.toString && obj.toString !== Object.prototype.toString) ? obj.toString() : jet.json.to(obj),\r\n        Promise:async obj=>obj,\r\n        Error:obj=>jet.json.to(obj),\r\n        RegExp:(obj, comma)=>jet.melt(obj, comma != null ? comma : \"|\")\r\n    }\r\n});\r\n", "import jet from \"../../defs\";\r\n\r\njet.define(\"Promise\", Promise, {\r\n    create:x=>new Promise(jet.only.Function(x, e=>e()))\r\n});", "import jet from \"../../defs\";\r\n\r\njet.define(\"RegExp\", RegExp, {\r\n    create:RegExp,\r\n    copy:x=>RegExp(x.source),\r\n    extend:{\r\n        lib:{\r\n            line:/[^\\n\\r]+/g, \r\n            number:/-?(\\d+(\\s+\\d+)*)*[,.]?\\d+/, \r\n            word:/[^\\s\\n\\r]+/g,\r\n            num:/-?[0-9]*[.,]?[0-9]+/,\r\n            email: /(?:[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/i,\r\n            ip:/((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))/i,\r\n            domain: /([a-z0-9]+\\.)+(cz|de|sk|au|com|eu|info|org|[a-z]+)/i,\r\n            hexadecimal: /[0-9a-fA-F]{6,6}/,\r\n        }\r\n    },\r\n    to:{\r\n        Function:regex=>_=>regex,\r\n        String:regex=>regex.source\r\n    }\r\n});", "import jet from \"../../defs\";\r\n\r\njet.define(\"Set\", Set, {\r\n    copy:x=>new Set(x),\r\n    keys:x=>[...x.keys()],\r\n    vals:x=>[...x.values()],\r\n    entries:x=>[...x.entries()],\r\n    get:(x,k)=>x.has(k)?k:undefined,\r\n    set:(x,k,v)=>x.add(v)?v:undefined,\r\n    rem:(x,k)=>x.delete(k),\r\n    to:{\r\n        \"*\":set=>Array.from(set),\r\n        Function:set=>_=>set,\r\n        Boolean:set=>Set.jet.isFull(set),\r\n        Object:set=>jet.merge(set),\r\n        Promise:async set=>set,\r\n    }\r\n});", "import jet from \"../../defs\";\r\n\r\nconst hidePats = {\r\n    point:\"\u2022\", cross:\"\u00D7\", flake:\"\u2600\", draft:\"\u232D\", power:\"\u26A1\", star:\"\u2605\", skull:\"\u2620\", card:\"\u2660\u2665\u2666\u2663\", notes:\"\u2669\u266A\u266B\u266C\u266D\u266E\u266F\", chess:\"\u2654\u2655\u2656\u2657\u2658\u2659\u265A\u265B\u265C\u265D\u265E\u265F\",\r\n    block:\"\u2596\u2597\u2598\u2599\u259A\u259B\u259C\u259D\u259E\u259F\", bar:\"\u2502\u2551 \u258C\u2590\u2588\", iting:\"\u2630\u2631\u2632\u2633\u2634\u2635\u2636\u2637\", astro:\"\u2648\u2649\u264A\u264B\u264C\u264D\u264E\u264F\u2650\u2651\u2652\u2653\", die:\"\u2680\u2681\u2682\u2683\u2684\u2685\",\r\n    runic:\"\u16A0\u16A1\u16A2\u16A3\u16A4\u16A5\u16A6\u16A7\u16A8\u16A9\u16AA\u16AB\u16AC\u16AD\u16AE\u16AF\u16B0\u16B1\u16B3\u16B4\u16B5\u16B6\u16B7\u16B8\u16B9\u16BA\u16BB\u16BC\u16BD\u16BE\u16BF\u16C0\u16C1\u16C2\u16C3\u16C4\u16C5\u16C6\u16C7\u16C8\u16C9\u16CA\u16CB\u16CF\u16D0\u16D1\u16D2\u16D3\u16D4\u16D5\u16D6\u16D7\u16D8\u16D9\u16DA\u16DB\u16DC\u16DD\u16DE\u16DF\u16E0\u16E1\u16E2\u16E3\u16E4\u16E5\u16E6\u16E8\u16E9\u16EA\u16EE\u16EF\u16F0\",\r\n    dots:\"\u2800\u2801\u2802\u2803\u2804\u2805\u2806\u2807\u2808\u2809\u280A\u280B\u280C\u280D\u280E\u280F\u2810\u2811\u2812\u2813\u2814\u2815\u2816\u2817\u2818\u2819\u281A\u281B\u281C\u281D\u281E\u281F\u2820\u2821\u2822\u2823\u2824\u2825\u2826\u2827\u2828\u2829\u282A\u282B\u282C\u282D\u282E\u282F\u2830\u2831\u2832\u2833\u2834\u2835\u2836\u2837\u2838\u2839\u283A\u283B\u283C\u283D\u283E\u283F\u2840\u2841\u2842\u2843\u2844\u2845\u2846\u2847\u2848\u2849\u284A\u284B\u284C\u284D\u284E\u284F\u2850\u2851\u2852\u2853\u2854\u2855\u2856\u2857\u2858\u2859\u285A\u285B\u285C\u285D\u285E\u285F\u2860\u2861\u2862\u2863\u2864\u2865\u2866\u2867\u2868\u2869\u286A\u286B\u286C\u286D\u286E\u286F\u2870\u2871\u2872\u2873\u2874\u2875\u2876\u2877\u2878\u2879\u287A\u287B\u287C\u287D\u287E\u287F\u2880\u2881\u2882\u2883\u2884\u2885\u2886\u2887\u2888\u2889\u288A\u288B\u288C\u288D\u288E\u288F\u2890\u2891\u2892\u2893\u2894\u2895\u2896\u2897\u2898\u2899\u289A\u289B\u289C\u289D\u289E\u289F\u28A0\u28A1\u28A2\u28A3\u28A4\u28A5\u28A6\u28A7\u28A8\u28A9\u28AA\u28AB\u28AC\u28AD\u28AE\u28AF\u28B0\u28B1\u28B2\u28B3\u28B4\u28B5\u28B6\u28B7\u28B8\u28B9\u28BA\u28BB\u28BC\u28BD\u28BE\u28BF\u28C0\u28C1\u28C2\u28C3\u28C4\u28C5\u28C6\u28C7\u28C8\u28C9\u28CA\u28CB\u28CC\u28CD\u28CE\u28CF\u28D0\u28D1\u28D2\u28D3\u28D4\u28D5\u28D6\u28D7\u28D8\u28D9\u28DA\u28DB\u28DC\u28DD\u28DE\u28DF\u28E0\u28E1\u28E2\u28E3\u28E4\u28E5\u28E6\u28E7\u28E8\u28E9\u28EA\u28EB\u28EC\u28ED\u28EE\u28EF\u28F0\u28F1\u28F2\u28F3\u28F4\u28F5\u28F6\u28F7\u28F8\u28F9\u28FA\u28FB\u28FC\u28FD\u28FE\u28FF\"\r\n}\r\n\r\nconst deloneMap = {\r\n    to:\"aaccdeeillnooorstuuuyrzzAACCDEEILLNOOORSTUUUYRZZ\",\r\n    from:\"\u00E1\u00E4\u010D\u0107\u010F\u00E9\u011B\u00ED\u013A\u013E\u0148\u00F3\u00F4\u00F6\u0155\u0161\u0165\u00FA\u016F\u00FC\u00FD\u0159\u017E\u017A\u00C1\u00C4\u010C\u0106\u010E\u00C9\u011A\u00CD\u0139\u013D\u0147\u00D3\u00D4\u00D6\u0154\u0160\u0164\u00DA\u016E\u00DC\u00DD\u0158\u017D\u0179\"\r\n};\r\n\r\nconst fight = (str1, str2)=>{\r\n    str1 = str1 == null ? \"\" : String(str1), str2 = str2 == null ? \"\" : String(str2);\r\n    for (let i=0; true; i++) {\r\n        const s1 = str1[i], s2 = str2[i];\r\n        if (!s1 || !s2) { return !s1; } else if (s1 === s2) { continue; }\r\n        const d1 = String.jet.delone(s1), d2 = String.jet.delone(s2);\r\n        if (d1 === d2) { return (s1.charCodeAt(0) || 0) < (s2.charCodeAt(0) || 0); }\r\n        const l1 = d1.toLowerCase(), l2 = d2.toLowerCase();\r\n        if (l1 === l2) { return (d1.charCodeAt(0) || 0) < (d2.charCodeAt(0) || 0); }\r\n        return (l1.charCodeAt(0) || 0) < (l2.charCodeAt(0) || 0);\r\n    }\r\n}\r\n\r\njet.define(\"String\", String, {\r\n    create:any=>any == null ? \"\" : String(any),\r\n    rnd:(min, max, sqr)=>{ //HOW TO GENERATE GREAT RANDOM STRING???\r\n        const c = [\"bcdfghjklmnpqrstvwxz\", \"aeiouy\"], p = c[0].length/(c[0].length+c[1].length);\r\n        const l = Number.jet.rnd(Math.max(min, 2), max, sqr);\r\n        let s = Boolean.jet.rnd(p), r = \"\";\r\n        while (r.length < l) {r += jet.getRND(c[+(s = !s)]);}\r\n        return r;\r\n    },\r\n    to:{\r\n        Function:str=>_=>str,\r\n        Boolean:str=>![\"0\", \"false\", \"null\", \"undefined\", \"NaN\"].includes(str.toLowerCase()),\r\n        Array:(str, comma)=>str ? str.split(comma) : [],\r\n        Object:str=>jet.json.from(str),\r\n        Promise:async str=>str,\r\n        Number:(str, strict)=>{\r\n            if (!str) { return 0; } else if (strict) { return Number(str); }\r\n            const match = String(str).replace(/\\u00A0/g, ' ').match(RegExp.jet.lib.number);\r\n            if (!match || !match[0]) { return 0; }\r\n            return Number(match[0].replaceAll(\" \", \"\").replace(\",\", \".\")) || 0;\r\n        }\r\n    },\r\n    extend:{\r\n        isNumeric: str=>!isNaN(Number(str)),\r\n        lower: str=>str.toLowerCase(),\r\n        upper: str=>str.toUpperCase(),\r\n        capitalize: str=>str.charAt(0).toUpperCase() + str.slice(1),\r\n        camelCase: str=>str.replace(/[^a-zA-Z0-9]+/g, \" \").trim().split(\" \").map((s, i)=>i ? String.jet.capitalize(s) : s).join(\"\"),\r\n        pascalCase: str=>str.replace(/[^a-zA-Z0-9]+/g, \" \").trim().split(\" \").map(s=>String.jet.capitalize(s)).join(\"\"),\r\n        snakeCase:str=>str.replace(/[^a-zA-Z0-9]+/g, \" \").trim().replaceAll(\" \", \"_\"),\r\n        delone: str=>{\r\n            let r = \"\";\r\n            for (let v of str) { let x = deloneMap.from.indexOf(v); r += (x >= 0 ? deloneMap.to[x] : v); }\r\n            return r;\r\n        },\r\n        efface: (str, remove)=>str.replaceAll(remove, \"\").replace(/[\\s\\n\\r]+/g, \" \").trim(),\r\n        simplify: (str, remove)=>String.jet.delone(String.jet.efface(str, remove)).toLowerCase(),\r\n        fight: (str1, str2, asc=true)=>(fight(str1, str2) === asc) ? str1 : str2,\r\n        carret: (str, pos)=>Number.jet.frame(Number.jet.tap(pos, str.length), 0, str.length),\r\n        quote: (str, quoteLeft=\"'\", quoteRight=\"'\")=>str ? quoteLeft+str+quoteRight : \"\",\r\n        splice: (str, index, howmany, ...strs)=>{\r\n            const s = String.jet.carret(str, index), m = Number.jet.frame(howmany, 0, str.length-s); \r\n            return str.slice(0, s) + String.jet.to(strs, \"\") + str.slice(s+m);\r\n        },\r\n        hide: (str, pat, whitespace)=>{\r\n            if (!str) { return str; } var r = \"\", s = str, p = hidePats[pat] || pat || \"\u2022\", w = (whitespace === false);\r\n            for (var i = 0; i < str.length; i++) { r += (w && (s[i] === \"\\n\" || s[i] === \" \")) ? s[i] : p.length - 1 ? jet.getRND(p) : p; }\r\n            return r;\r\n        },\r\n        bite: (str, separator)=>{\r\n            const x = str.indexOf(separator);\r\n            return x <= 0 ? [\"\", str] : [str.slice(0, x), str.slice(x + separator.length)];\r\n        },\r\n        levenshtein: (s0, s1, blend)=>{\r\n            var s = ((blend === false) ? [s0, s1] : [String.jet.simplify(s0, blend), String.jet.simplify(s1, blend)]);\r\n            if (s[0] === s[1]) { return 1; } else if (!s[0] || !s[1]) { return 0; }\r\n            var l = [s[0].length, s[1].length], c = []; if (l[1] > l[0]) { l.reverse(); s.reverse(); }\r\n            for (var i = 0; i <= l[0]; i++) {\r\n                var oV = i; for (var j = 0; j <= l[1]; j++) {\r\n                    if (i === 0) { c[j] = j; } else if (j > 0) {\r\n                        var nV = c[j - 1];\r\n                        if (s[0].charAt(i - 1) !== s[1].charAt(j - 1)) { nV = Math.min(Math.min(nV, oV), c[j]) + 1; } c[j - 1] = oV; oV = nV;\r\n                    }\r\n                } if (i > 0) { c[l[1]] = oV; }\r\n            }\r\n            return (l[0] - c[l[1]]) / parseFloat(l[0]);\r\n        },\r\n        mutate: (str, factor)=>{\r\n            var r = [], n = str.length / 2, m = str.length * 2, f = Math.abs(1000 * (factor || 1));\r\n            while (r.length < f) { var s = String.jet.rnd(n, m); r.push([s, String.jet.levenshtein(s, str)]); }\r\n            return r.sort((a, b)=>b[1] - a[1])[0][0];\r\n        }\r\n    }\r\n});", "import jet from \"../../defs\";\r\n\r\nconst to = sym=>String(sym).slice(7, -1);\r\n\r\njet.define(\"Symbol\", Symbol, {\r\n    create:Symbol,\r\n    copy:x=>Symbol(to(x)),\r\n    rnd:(...a)=>Symbol(jet.rnd.String(...a)),\r\n    to:{\r\n        Function:sym=>_=>sym\r\n    }\r\n});", "import jet from \"../../defs\";\r\n\r\njet.define(\"WeakMap\", WeakMap, {\r\n    copy:x=>new WeakMap(),\r\n    get:(x,k)=>x.get(k),\r\n    set:(x,k,v)=>x.set(k,v),\r\n    rem:(x,k)=>x.delete(k),\r\n    to:{\r\n        Function:map=>_=>map\r\n    }\r\n});", "import jet from \"./defs\";\r\n\r\nimport \"./class/native/Number\";\r\nimport \"./class/native/*\";\r\n\r\nexport default jet;", "\r\nexport const nref = (tableName, colName, filter)=>{\r\n    return {\r\n        isVirtual:true,\r\n        isTrusted:true,\r\n        ref:tableName,\r\n        separator:\"; \",\r\n        scope:tableName,\r\n        formula:(row, cache)=>row.refs(tableName, colName, filter, cache)\r\n    }\r\n};\r\n\r\nexport const timestamps = (doerRef, doerFormula, alternative=false)=>({\r\n    [\"updated\"+(alternative ? \"\" : \"_at\")]: { type: \"datetime\", formula: _ => new Date() },\r\n    updater: { ref:doerRef, formula:doerFormula },\r\n    [\"created\"+(alternative ? \"\" : \"_at\")]: { type: \"datetime\", init: _ => new Date(), isReadonly: true },\r\n    creator: { ref:doerRef, init:doerFormula, isReadonly:true }\r\n});\r\n\r\nexport const breachSelector = (selector, onOne, onMany)=>{\r\n    let alias, path;\r\n\r\n    const isArray = Array.isArray(selector);\r\n    if (!isArray) { [path, selector] = String.jet.bite(selector, \".\"); }\r\n\r\n    if (path) { [alias, path] = String.jet.bite(path, \":\"); }\r\n    else if (!isArray && !selector.includes(\",\")) { [alias, selector] = String.jet.bite(selector, \":\"); }\r\n    else { return onMany(isArray ? selector : selector.split(\",\")); }\r\n\r\n    return onOne(alias, path, selector);\r\n}", "import jet from \"@randajan/jet-core\";\r\n\r\nconst { solid, cached } = jet.prop;\r\n\r\nexport const vault = new WeakMap();\r\n\r\nconst eventsWhen = [\"before\", \"after\"];\r\nexport const events = cached.all({}, {}, {\r\n    primitive:_=>[].concat(\r\n        ...eventsWhen.map(w=>[\"set\", \"update\", \"remove\"].map(c=>[w, c, w+String.jet.capitalize(c)]))\r\n    ),\r\n    extra:_=>[].concat(\r\n        ...eventsWhen.map(w=>[\"change\", \"save\"].map(c=>[w, c, w+String.jet.capitalize(c)]))\r\n    )\r\n});\r\n\r\n\r\n\r\nexport const formatKey = (key, def)=>key != null ? String(key) : def;\r\nexport const numberPositive = (num, def=0)=>num == null ? def : Math.max(0, Number.jet.to(num));\r\nexport const functionOrNull = val=>val == null ? undefined : Function.jet.to(val);\r\nexport const boolDef = (val, def)=>val == null ? def : !!val;\r\n\r\n\r\nconst _sortBy = (colName, descending=false, list=[])=>{\r\n    const _sb = (colName, descending)=>_sortBy(colName, descending, list);\r\n    solid(_sb, \"list\", list);\r\n    list.push([colName, Boolean.jet.to(descending)]);\r\n    return _sb;\r\n}\r\n\r\nexport const sortBy = (colName, descending=false)=>_sortBy(colName, descending);\r\n\r\nexport const fcePass = v=>v;\r\nexport const fceNone = ()=>{};\r\nexport const fceTrue = _=>true;", "import jet from \"@randajan/jet-core\";\r\nimport { events } from \"./consts\";\r\n\r\nconst { solid, cached, virtual } = jet.prop;\r\n\r\nexport class Table {\r\n\r\n  static is(any) { return any instanceof Table; }\r\n\r\n  constructor(db, name, config={}) {\r\n    const { stream, bundle, Rows, Cols, onRows } = config;\r\n    const _p = cached({}, {}, \"stream\", _=>Object.jet.to(stream, this)); //cache even config object\r\n    _p.lastChange = Date.now();\r\n\r\n    solid(this, \"db\", db, false);\r\n    solid(this, \"name\", name);\r\n\r\n    cached.all(this, _p, {\r\n      cols:_=>{\r\n        const cols = new Cols(this, _p.stream.cols);\r\n        bundle.on(\"afterReset\", _=>cols.reset(), { once:true });\r\n        return cols;\r\n      },\r\n      rows:_=>{\r\n        const rows = new Rows(this, _p.stream.rows);\r\n\r\n        for (const [when, action, name] of events.extra) {\r\n          const cleanUp = rows.on(name, (standardAction, rowLive)=>bundle.run(name, [standardAction, rowLive]));\r\n          rows.on(\"afterReset\", cleanUp, { once:true });\r\n        }\r\n\r\n        bundle.on(\"afterReset\", _=>rows.reset(), { once:true });\r\n        rows.on(\"afterChange\", _=>_p.lastChange = Date.now());\r\n        return rows;\r\n      }\r\n    }, false);\r\n\r\n    virtual.all(this, {\r\n      state:_=>this.rows.state,\r\n      isLoading:_=>this.rows.isLoading,\r\n      lastChange:_=>_p.lastChange\r\n    });\r\n\r\n  }\r\n\r\n  msg(text) { return this.db.msg(text, this.name); }\r\n\r\n  eval(selector, opt={}) {\r\n    return this.rows.eval(selector, opt);\r\n  }\r\n\r\n  getKey() {\r\n    return this.name;\r\n  }\r\n\r\n  toString() {\r\n    return this.name || \"\";\r\n  }\r\n\r\n  toJSON() {\r\n    return this;\r\n  }\r\n\r\n\r\n}\r\n  ", "import { getDefByInst } from \"../defs/base.js\";\r\nimport jet from \"../\";\r\n\r\nconst enumerable = true;\r\n\r\nexport const initContext = (value, {root, stopable, init})=>{\r\n    let path, def, brk, onStop;\r\n\r\n    const ctx = Object.defineProperties({}, {\r\n        isRoot:{enumerable, value:true},\r\n        root:{get:_=>ctx},\r\n        value:{enumerable, value},\r\n        depth:{enumerable, value:!root ? 0 : root.length},\r\n        pending:{enumerable, get:_=>!brk},\r\n        path:{enumerable, get:_=>path != null ? path : (path = jet.dot.toString(root)) },\r\n        fullpath:{enumerable, get:_=>ctx.path },\r\n        def:{enumerable, get:_=>def || (def = getDefByInst(value))}\r\n    });\r\n\r\n    ctx.result = init;\r\n\r\n    return !stopable ? ctx : Object.defineProperties(ctx, {\r\n        stop:{ value:_=>{\r\n            if (brk) { return false; }\r\n            brk = true;\r\n            if (onStop) { for (const f of onStop) { f(ctx); } }\r\n            return true;\r\n        }},\r\n        onStop:{ value:cb=>{\r\n            if (!onStop) { onStop = [cb]; }\r\n            else { onStop.push(cb); }\r\n        } }\r\n    });\r\n\r\n}\r\n\r\n\r\nexport const createContext = (parent, key, value)=>{\r\n    let def, fullpath;\r\n\r\n    const ctx = Object.defineProperties({}, {\r\n        isRoot:{enumerable, value:false},\r\n        root:{value:parent.root},\r\n        parent:{value:parent},\r\n        key:{enumerable, get:_=>key, set:k=>{ key = k; fullpath = undefined; }},\r\n        value:{enumerable, get:_=>value, set:v=>{ value = v; def = undefined; }},\r\n        depth:{enumerable, value:parent.depth+1},\r\n        pending:{enumerable, get:_=>parent.pending},\r\n        stop:{enumerable, value:parent.stop},\r\n        path:{enumerable, get:_=>parent.fullpath},\r\n        fullpath:{enumerable, get:_=>fullpath || (fullpath = jet.dot.glue(ctx.path, jet.dot.escape(key))) },\r\n        def:{enumerable, get:_=>def || (def = getDefByInst(value))},\r\n        update:{enumerable, value:(...a)=>{\r\n            if (a.length > 0) { ctx.value = a[0]; }\r\n            if (a.length > 1) { ctx.key = a[1]; }\r\n            return ctx;\r\n        }}\r\n    });\r\n\r\n    return ctx;\r\n}\r\n\r\nexport const fight = (a, b)=>{\r\n    if (a == b) { return; }\r\n    if (a == null) { return true; } else if (b == null) { return false; }\r\n    if (typeof a === \"string\" || typeof b === \"string\") { return a === String.jet.fight(a, b); }\r\n    if (isNaN(a)) { return true; } else if (isNaN(b)) { return false; }\r\n    return a < b;\r\n}\r\n\r\nexport const formatOrderBy = (orderBy)=>{\r\n    if (!Array.isArray(orderBy)) { return [[orderBy, true]]; }\r\n    const obs = [];\r\n    for (let i=0; i<orderBy.length; i++) {\r\n        const ob = orderBy[i];\r\n        if (Array.isArray(ob)) { obs.push(ob); continue; }\r\n        if (!jet.isRunnable(ob)) { continue; }\r\n        const asc = (typeof orderBy[i+1] === \"boolean\") ? orderBy[i = i+1] : true;\r\n        obs.push([ob, asc]);\r\n    }\r\n    return obs;\r\n}", "import jet from \"../\";\r\nimport { createContext, fight, formatOrderBy, initContext } from \"./each\";\r\n\r\n//options:\r\n//init | any | this will be set as context.result at initialization, useful for reducers\r\n//root | array | root path of the iteration if exist\r\n//strictArray | true/false | true = keeps undefined/empty values at result arrays;\r\n//stopable | true/false | true = iteration can be stopped via context.stop();\r\n//deep | true/false/function | true = when reach the iterable property it will iterate it too or place here a function to do custom deep-iteration\r\n\r\n\r\nconst _filter = (entries, fce)=>{\r\n    const res = [];\r\n\r\n    entries.forEach(en=>{\r\n        if (fce(en[1], en[0])) { res.push(en); }\r\n    });\r\n\r\n    return \r\n}\r\n\r\nconst _refine = (entries, { filter, orderBy })=>{\r\n    if (!filter && !orderBy) { return entries; }\r\n    entries = filter ? _filter(entries, filter) : [...entries];\r\n\r\n    if (!orderBy) { return entries; }\r\n\r\n    const obs = formatOrderBy(orderBy);\r\n    const expand = entries.map(([key, value])=>[key, value, obs.map(ob=>ob[0](value, key))]);\r\n\r\n    return expand.sort(([aK, aV, aO], [bK, bV, bO]) => {\r\n        for (const k in obs) {\r\n            const dir = fight(aO[k], bO[k]);\r\n            if (dir == null) { continue; }\r\n            const asc = obs[k][1];\r\n            return (asc == null ? !dir : dir != asc) * 2 - 1;\r\n        }\r\n        return 0;\r\n    });\r\n\r\n}\r\n\r\nconst _eachSerial = (parent, exe, options)=>{\r\n    const entries = parent.def.entries(parent.value);\r\n    const refined = !parent.isRoot ? entries : _refine(entries, options);\r\n\r\n    for (let [key, val] of refined) {\r\n        const ctx = createContext(parent, key, val);\r\n        if (ctx.pending) { exe(ctx); } // it will wait for every single item before execute the next\r\n        if (!ctx.pending) { break; }\r\n    };\r\n}\r\n\r\nexport const each = (any, fce, options={})=>{\r\n    if (!jet.isRunnable(fce)) { throw new Error(`fce expect an Function`); }\r\n    const root = initContext(any, options);\r\n    \r\n    const deep = options.deep;\r\n    const dprun = jet.isRunnable(deep);\r\n\r\n    const _each = _eachSerial;\r\n\r\n    const exe = (ctx, skipDeep=false)=>{\r\n        const de = ctx.def?.entries;\r\n        if (!de || (!deep && !ctx.isRoot)) { fce(ctx.value, ctx); }\r\n        else if (dprun && !skipDeep) { deep(ctx.value, ctx, (...a)=>{ exe(ctx.update(...a), true) }); }\r\n        else { _each(ctx, exe, options); }\r\n        return ctx.result;\r\n    }\r\n    \r\n    return exe(root, true);\r\n};\r\n\r\n\r\n//implementation of each iterator\r\n\r\nexport const find = (any, fce, options={})=>{\r\n    options.stopable = true;\r\n    \r\n    return each(any, (val, ctx)=>{\r\n        val = fce(val, ctx);\r\n        if (val !== undefined && ctx.pending) {\r\n            ctx.root.result = val;\r\n            ctx.stop();\r\n        }\r\n    }, options);\r\n};\r\n\r\nexport const list = (any, fce, options={})=>{\r\n    if (!Array.isArray(options.init)) { options.init = []; }\r\n\r\n    return each(any, (val, ctx)=>{\r\n        val = fce(val, ctx);\r\n        if (val !== undefined && ctx.pending) { ctx.root.result.push(val); }\r\n    }, options);\r\n};\r\n\r\nexport const map = (any, fce, options={})=>{\r\n    delete options.init;\r\n\r\n    const set = (ctx, key, val)=>{\r\n        if (!ctx) { return; }\r\n        if (!ctx.result) { set(ctx.parent, ctx.key, ctx.result = ctx.def.create()); }\r\n\r\n        if (!options.strictArray && ctx.def.name === \"Array\") { ctx.result.push(val); }\r\n        else { ctx.def.set(ctx.result, key, val); }\r\n    }\r\n\r\n    return each(any, (val, ctx)=>{\r\n        val = fce(val, ctx);\r\n        if (val !== undefined && ctx.pending) { set(ctx.parent, ctx.key, val); }\r\n    }, options);\r\n};\r\n", "\r\n\r\nexport const solid = (obj, name, value, enumerable=true, configurable=false)=>{\r\n    return Object.defineProperty(obj, name, { enumerable, value, configurable });\r\n}\r\n\r\nexport const solids = (obj, namedValues, enumerable=true, configurable=false)=>{\r\n    for (const name in namedValues) {\r\n        const value = namedValues[name];\r\n        solid(obj, name, value, enumerable, configurable);\r\n    }\r\n    return obj;\r\n}", "\r\n\r\nexport const virtual = (obj, name, get, enumerable=true, configurable=false)=>{\r\n    return Object.defineProperty(obj, name, { enumerable, get, configurable })\r\n}\r\n\r\nexport const virtuals = (obj, namedGets, enumerable=true, configurable=false)=>{\r\n    for (const name in namedGets) {\r\n        const get = namedGets[name];\r\n        virtual(obj, name, get, enumerable, configurable);\r\n    }\r\n    return obj;\r\n}", "\r\n\r\nexport const safe = (obj, priv, name, set, get, enumerable=true, configurable=false)=>{\r\n    return Object.defineProperty(obj, name, {\r\n        set:set ? v=>priv[name] = set(v, priv[name], name) : undefined,\r\n        get:get ? _=>get(priv[name], name) : _=>priv[name],\r\n        enumerable, configurable\r\n    });\r\n}\r\n\r\nexport const safes = (obj, priv, namedSetsAndGets, enumerable=true, configurable=false)=>{\r\n    for (const name in namedSetsAndGets) {\r\n        const setGet = namedSetsAndGets[name];\r\n        \r\n        let set, get;\r\n        if (typeof setGet !== \"object\") { set = setGet; }\r\n        else { set = setGet.set || setGet[0]; get = setGet.get || setGet[1]; }\r\n\r\n        safe(obj, priv, name, set, get, enumerable, configurable);\r\n    }\r\n    return obj;\r\n}", "import { safe } from \"./safe\";\r\n\r\n\r\nexport const cached = (obj, priv, name, reset, get, enumerable=true, configurable=false)=>{\r\n    const setAndGet = v=>{\r\n        if (!priv.hasOwnProperty(name)) { v = priv[name] = reset(name); }\r\n        return get ? get(v, name) : v;\r\n    };\r\n    return safe(obj, priv, name, null, setAndGet, enumerable, configurable);\r\n};\r\n\r\nexport const cacheds = (obj, priv, namedResetsAndGets, enumerable=true)=>{\r\n    for (const name in namedResetsAndGets) {\r\n        const resetGet = namedResetsAndGets[name];\r\n        \r\n        let reset, get;\r\n        if (typeof resetGet !== \"object\") { reset = resetGet; }\r\n        else { reset = resetGet.reset || resetGet[0]; get = resetGet.get || resetGet[1]; }\r\n\r\n        cached(obj, priv, name, reset, get, enumerable);\r\n    }\r\n    return obj;\r\n}", "\r\n\r\nexport const unbracket = (str, br=\"()\")=>{\r\n    if (!str) { return str; }\r\n    if (!str.startsWith(br[0])) { return str; }\r\n    if (!str.endsWith(br[1])) { return; }\r\n    return str.slice(1, -1).trim();\r\n}\r\n\r\nconst splitCommon = fstr=>{\r\n    const lba = fstr.indexOf(\"(\");\r\n    if (lba < 0) { throw Error( \"Parsing common function - arguments are missing left bracket '('\" ); }\r\n    fstr = fstr.slice(lba);\r\n\r\n    const rba = fstr.indexOf(\")\")+1;\r\n    if (rba <= 0) { throw Error( \"Parsing common function - arguments are missing right bracket ')'\" ); }\r\n\r\n    const args = fstr.slice(0, rba).trim();\r\n    const body = fstr.slice(rba).trim();\r\n\r\n    if (!body.startsWith(\"{\") || !body.endsWith(\"}\")) {\r\n        throw Error( \"Parsing common function - body missing brackets '{...}'\" );\r\n    }\r\n\r\n    return [args, body.slice(1, -1).trim()];\r\n}\r\n\r\nconst splitArrow = fstr=>{\r\n    const frags = fstr.split(\"=>\");\r\n    if (frags.length <= 1) {\r\n        throw Error( \"Parsing arrow function - missing the arrow '=>'\" );\r\n    }\r\n\r\n    const args = frags.shift().trim();\r\n    let body = frags.join(\"=>\").trim();\r\n\r\n    if (!body.startsWith(\"{\")) { body = `return ${body}`; }\r\n    else if (!body.endsWith(\"}\")) {\r\n        throw Error( \"Parsing arrow function - body missing right bracket '}'\" );\r\n    }\r\n    else { body = body.slice(1, -1).trim(); }\r\n\r\n    return [args, body];\r\n}\r\n\r\nexport const split = fstr=>{\r\n    fstr = fstr.trim().replace(/\\s+/g, \" \");\r\n    return fstr.startsWith(\"function\") ? splitCommon(fstr) : splitArrow(fstr);\r\n}", "import { unbracket } from \"./_tools\";\r\n\r\nexport const argRegExp = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\r\nexport const parseArgs = (args)=>{\r\n    if (args == null) { throw Error(\"Parsing arguments - missing\"); }\r\n    args = unbracket(args.trim());\r\n\r\n    let result = [];\r\n    if (args) {\r\n        for (let a of args.split(\",\")) {\r\n            a = a.trim();\r\n            if (!argRegExp.test(a)) { throw Error(\"Parsing arguments - malformatted\"); }\r\n            result.push(a);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}", "import { unbracket, split } from \"./_tools\";\r\nimport { argRegExp } from \"./arguments\";\r\n\r\n\r\nexport const fnToStr = fn=>{\r\n    const t = typeof fn;\r\n    if (t !== \"function\") { throw Error(\"Stringify function - not a function\"); }\r\n\r\n    const f = split(fn.toString());\r\n\r\n    let args = unbracket(f[0]);\r\n    if (!args || !argRegExp.test(args)) { args = `(${args})`; }\r\n\r\n    let body = f[1];\r\n    if (!body.startsWith(\"return\")) { body = `{${body}}`; }\r\n    else {\r\n        body = body.slice(6).trim().replace(/;[\\s\\S]*$/, \"\");\r\n        if (!body) { body = \"{}\"; }\r\n        else if (body.startsWith(\"{\")) { body = \"(\"+body+\")\"; }\r\n    }\r\n\r\n    return `${args}=>${body}`;\r\n    \r\n}", "import { split } from \"./_tools\";\r\nimport { parseArgs } from \"./arguments\";\r\n\r\nconst fromStr = str=>{\r\n    const f = split(str);\r\n    return new Function(parseArgs(f[0]), f[1]);\r\n}\r\n\r\nconst fromAny = (any, type=\"string\")=>{\r\n    let body;\r\n    if (any === undefined) { return new Function(); }\r\n\r\n    if (type === \"string\" || type === \"number\" || type === \"boolean\" || type === \"bigint\") { body = `${any}`; }\r\n    else if (type === \"symbol\") { throw Error(\"Creating function - symbol is not supported\"); }\r\n    else if (any instanceof Date) { body = `new Date('${any}')`; }\r\n    else if (type === \"object\") {\r\n        try { body = `(${JSON.stringify(any)})`; }\r\n        catch(e) { throw Error(\"Creating function - object replication failed\"); }\r\n    }\r\n    \r\n    if (!body) { throw Error(\"Creating function - unknown input\"); }\r\n    return new Function(`return ${body}`);\r\n}\r\n\r\nexport const anyToFn = any=>{\r\n    const type = typeof any;\r\n    return (type !== \"string\" || any.startsWith(\"'\")) ? fromAny(any, type) : fromStr(any);\r\n}\r\n\r\nexport const strToFn = str=>{\r\n    const t = typeof str;\r\n    if (t !== \"string\") { throw Error(\"Stringify function - not a string\"); }\r\n\r\n    return fromStr(str);\r\n}", "import jet from \"@randajan/jet-core\";\r\nimport { breachSelector } from \"../uni/tools\";\r\n\r\nexport const reductor = (getList, callback, init) => {\r\n    return row => {\r\n        let val = init;\r\n        for (const x of getList(row)) { val = callback(val, x); }\r\n        return val;\r\n    }\r\n}\r\n\r\nexport const summary = (colList, colSum) => reductor(row => row(colList), (total, child) => total += child(colSum), 0);\r\n\r\nexport const remap = (arr, onItem, byKey = false) => {\r\n    const rk = byKey ? {} : null;\r\n    const rl = arr.map(item => onItem(item, rk));\r\n    return rk || rl;\r\n}\r\n\r\n\r\n\r\nexport const evaluate = (base, selector, opt, to, forceAlias)=>{\r\n    if (!base?.get) { return; }\r\n\r\n    const { byKey, throwError } = opt;\r\n\r\n    return breachSelector(selector, \r\n        (alias, path, selector)=>{\r\n            let res;\r\n            if (!path) { res = base.get(selector, throwError !== false); }\r\n            else if (path !== \"*\") {\r\n                const ref = base.get(path, throwError !== false);\r\n                if (!ref?.eval) { return; }\r\n                res = ref.eval(selector, opt);\r\n            } else {\r\n                if (!base.getList) { return; }\r\n                const arr = base.getList();\r\n                return remap(arr, (item, rk) => {\r\n                    const r = item?.eval(selector, opt);\r\n                    return rk ? rk[item] = r : r;\r\n                }, byKey);\r\n            }\r\n\r\n            if (!byKey) { return res; }\r\n            const key = forceAlias || alias || path || selector;\r\n            if (!to) { return { [key]: res }; }\r\n            if (to.hasOwnProperty(key)) { throw Error(`selector collision at ${key}, please use alias`); }\r\n            to[key] = res;\r\n            return to;\r\n        },\r\n        arr=>remap(arr, (item, rk) => evaluate(base, item, opt, to || rk), byKey)\r\n    );\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\nimport { each } from \"@randajan/jet-core/eachSync\";\r\nimport { Table } from \"../../uni/Table\";\r\nimport { Chop } from \"../privates/Chop\";\r\nimport { Rows } from \"./Rows\";\r\nimport { Cols } from \"./Cols\";\r\nimport { numberPositive, vault } from \"../../uni/consts\";\r\n\r\nconst { solid, virtual } = jet.prop;\r\n\r\nexport class DB extends Chop {\r\n\r\n    constructor(name, stream, config={}) {\r\n        \r\n        const { displayDefault, decimalDefault, maxAge, maxAgeError } = config;\r\n        super(name, {\r\n            stream,\r\n            loader: (self, bundle, tables) => {\r\n                each(tables, (stream, ctx) =>{ bundle.set(new Table(this, ctx.key, { bundle, stream, Rows, Cols })); });\r\n            },\r\n            childName: \"table\",\r\n            defaultContext: \"all\",\r\n            maxAge,\r\n            maxAgeError\r\n        });\r\n\r\n        const _p = vault.get(this);\r\n        _p.lastChange = Date.now();\r\n\r\n        this.on(\"afterChange\", _=>_p.lastChange = Date.now());\r\n\r\n        virtual(this, \"lastChange\", _=>_p.lastChange);\r\n        solid(this, \"displayDefault\", numberPositive(displayDefault));\r\n        solid(this, \"decimalDefault\", numberPositive(decimalDefault, 2));\r\n        \r\n    }\r\n\r\n    exist(name, throwError = false) {\r\n        return super.exist(name, undefined, throwError);\r\n    }\r\n\r\n    get(name, throwError = true) {\r\n        return super.get(name, undefined, throwError);\r\n    }\r\n\r\n    count(throwError = true) {\r\n        return super.count(undefined, throwError);\r\n    }\r\n\r\n    getList(throwError = true) {\r\n        return super.getList(undefined, throwError);\r\n    }\r\n\r\n    getIndex(throwError = true) {\r\n        return super.getIndex(undefined, throwError);\r\n    }\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\nimport { formatKey, vault } from \"../../uni/consts\";\r\nimport { Bundle } from \"./Bundle\";\r\nimport { Transactions } from \"./Transactions\";\r\nimport { evaluate } from \"../tools\";\r\n\r\nconst { solid, virtual } = jet.prop;\r\n\r\nexport class Chop extends jet.types.Plex {\r\n\r\n  constructor(name, config = {}) {\r\n    const { stream, loader, parent, childName, getContext, defaultContext, maxAge, maxAgeError, extra } = Object.jet.to(config);    \r\n    super((...args) => this.get(...args));\r\n\r\n    const _p = {\r\n      isLoaded:false,\r\n      loader,\r\n      stream: jet.isRunnable(stream) ? stream : _ => stream,\r\n      transactions:new Transactions(_=>{\r\n        if (!this.maxAgeError) { return; }\r\n        clearTimeout(_p.intError);\r\n        _p.intError = setTimeout(_=>this.reset(), this.maxAgeError);\r\n      }),\r\n      bundle:new Bundle(\r\n        parent?.name,\r\n        name,\r\n        childName,\r\n        getContext,\r\n        defaultContext\r\n      ),\r\n      subs:{}\r\n    }\r\n    vault.set(this, _p);\r\n\r\n    solid.all(this, {\r\n      parent,\r\n      maxAge: Math.max(0, Number.jet.to(maxAge)),\r\n      maxAgeError: Math.max(0, Number.jet.to(maxAgeError)),\r\n      extra: solid.all({}, Object.jet.to(extra))\r\n    }, false);\r\n\r\n    virtual.all(this, {\r\n      state:_=>(!_p.isLoaded && _p.transactions.state === \"ready\") ? \"concept\" : _p.transactions.state,\r\n      name:_=>_p.bundle.name,\r\n      fullName:_=>_p.bundle.fullName,\r\n      childName:_=>_p.bundle.childName,\r\n      isLoading:_=>_p.transactions.state === \"loading\"\r\n    });\r\n\r\n    _p.bundle.on(\"afterReset\", _=>{\r\n      clearTimeout(_p.intError);\r\n      clearTimeout(_p.intAge);\r\n      _p.isLoaded = false;\r\n      _p.transactions.reset();\r\n    });\r\n\r\n    _p.bundle.on(\"afterLoad\", _=>{\r\n      if (this.maxAge) {\r\n        clearTimeout(_p.intAge);\r\n        _p.intAge = setTimeout(_=>this.reset(), this.maxAge);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  on(event, callback, opt={}) {\r\n    return vault.get(this).bundle.on(event, callback, opt);\r\n  }\r\n\r\n  msg(text, key, context) {\r\n    return vault.get(this).bundle.msg(text, key, context);\r\n  }\r\n\r\n  exist(key, context, throwError = false) {\r\n    this.untilLoaded();\r\n    return vault.get(this).bundle.exist(key, context, throwError);\r\n  }\r\n\r\n  get(key, context, throwError = true) {\r\n    this.untilLoaded();\r\n    return vault.get(this).bundle.get(key, context, throwError);\r\n  }\r\n\r\n  eval(selector, opt={}) {\r\n    return evaluate(this, selector, opt);\r\n  }\r\n\r\n  count(context, throwError=false) {\r\n    this.untilLoaded();\r\n    return vault.get(this).bundle.getData(context, throwError).list.length;\r\n  }\r\n\r\n  getList(context, throwError=false) {\r\n    this.untilLoaded();\r\n    return [...vault.get(this).bundle.getData(context, throwError).list];\r\n  }\r\n\r\n  getIndex(context, throwError=false) {\r\n    this.untilLoaded();\r\n    return {...vault.get(this).bundle.getData(context, throwError).index};\r\n  }\r\n\r\n  getContextList() {\r\n    this.untilLoaded();\r\n    return Object.keys(vault.get(this).bundle.data);\r\n  }\r\n\r\n  map(callback, opt={}) {\r\n    this.untilLoaded();\r\n    return vault.get(this).bundle.map(callback, opt);\r\n  }\r\n\r\n  find(checker, opt={}) {\r\n    this.untilLoaded();\r\n    return vault.get(this).bundle.find(checker, opt);\r\n  }\r\n\r\n  reset(throwError=true) {\r\n    return vault.get(this).bundle.reset(throwError);\r\n  }\r\n\r\n  untilLoaded(throwError = true) {\r\n    const _p = vault.get(this);\r\n    if (_p.isLoaded) { return true; }\r\n\r\n    const { state, last } = _p.transactions;\r\n    if (state === \"error\") { return throwError ? last : false; }\r\n    if (state === \"loading\") { return last; }\r\n\r\n    return _p.transactions.execute(\"loading\", _=>{\r\n      if (_p.isLoaded) { return; }\r\n      _p.bundle.run(\"beforeLoad\", [this]);\r\n      const data = _p.stream(this);\r\n      _p.loader(this, _p.bundle, data);\r\n      _p.isLoaded = true;\r\n      _p.bundle.run(\"afterLoad\", [this]);\r\n    }, { stopOnError:false });\r\n  }\r\n\r\n  withUntilLoaded(execute) {\r\n    return (...args) => {\r\n      this.untilLoaded();\r\n      return execute(...args);\r\n    }\r\n  }\r\n\r\n  addChop(name, config={}) {\r\n    const subs = vault.get(this).subs; //sub chops\r\n    const { useCache, throwError, getContext, defaultContext, loader, extra } = config;\r\n\r\n    name = formatKey(name);\r\n\r\n    if (useCache !== false && subs[name]) {\r\n      if (throwError !== false) { throw Error(this.msg(`chop '${name}' allready exist`)); }\r\n      return subs[name];\r\n    }\r\n\r\n    const sub = new Chop(name, {\r\n      parent:this,\r\n      childName:this.childName,\r\n      maxAge:0,\r\n      maxAgeError:this.maxAgeError,\r\n      getContext,\r\n      defaultContext,\r\n      loader: (chop, bundle) =>{\r\n        this.map(child =>bundle.set(child));\r\n        chop.on(\"afterReset\", this.on(\"afterSet\", child=>bundle.set(child)), { once:true });\r\n        chop.on(\"afterReset\", this.on(\"afterRemove\", child=>bundle.remove(child)), { once:true });\r\n        this.on(\"afterReset\", _=>chop.reset(), { once:true });\r\n        if (loader) { loader(chop, bundle); }\r\n      },\r\n      extra\r\n    });\r\n\r\n    return (useCache !== false) ? subs[name] = sub : sub;\r\n  }\r\n\r\n  getChop(name, throwError=true) {\r\n    const subs = vault.get(this).subs; //sub chops\r\n    if (subs[name]) { return subs[name]; }\r\n    if (throwError) { throw Error(this.msg(`chop '${name}' doesn't exist`)); }\r\n  }\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\nimport * as _ from \"@randajan/jet-core/eachSync\";\r\nimport { formatKey } from \"../../uni/consts\";\r\n\r\nconst { solid, virtual } = jet.prop;\r\n\r\nexport class Bundle {\r\n\r\n  constructor(parentName, name, childName, getContext, def) {\r\n\r\n    name = formatKey(name, \"Bundle\");\r\n\r\n    solid.all(this, {\r\n      name,\r\n      fullName:(parentName && name) ? (parentName + \".\" + name) : parentName ? parentName : name ? name : \"\",\r\n      childName:formatKey(childName, \"key\"),\r\n      data:{},\r\n      handlers: {},\r\n      getContext: jet.isRunnable(getContext) ? getContext : _=>null,\r\n      def:formatKey(def, \"undefined\")\r\n    });\r\n\r\n    if (!this.name) { throw Error(this.msg(\"critical error - missing name\")); }\r\n\r\n  }\r\n\r\n  msg(text, key, context) {\r\n    const { fullName, childName, def } = this;\r\n    key = formatKey(key);\r\n    context = formatKey(context, def);\r\n    let msg = fullName || \"\";\r\n    if (context !== def) { msg += ` context('${context}')`; }\r\n    if (key) { msg += ` ${childName}('${key}')`; }\r\n    if (text) { msg += \" \"+text; }\r\n    return msg.trim();\r\n  }\r\n\r\n  getData(context, throwError=true, autoCreate=false) {\r\n    const { data, def } = this;\r\n    context = formatKey(context, def);\r\n    if (data[context]) { return data[context]; }\r\n    if (autoCreate || context === def) { return data[context] = { context, index:{}, list:[] }; }\r\n    if (throwError) { throw Error(this.msg(`not found`, undefined, context)); }\r\n    return { context, index:{}, list:[] }\r\n  };\r\n\r\n  validateKey(key, action=\"validateKey\", throwError=true) {\r\n    if (key = key = formatKey(key)) { return key; }\r\n    if (throwError) { throw Error(this.msg(`${action}(...) failed - key undefined`));}\r\n  }\r\n\r\n  on(event, callback, opt={}) {\r\n    if (!jet.isRunnable(callback)) { throw Error(this.msg(`on(...) require callback`)); }\r\n    const { once, bufferMs, maxQueueMs, maxQueueSize } = opt;\r\n    const { handlers } = this;\r\n    const list = (handlers[event] || (handlers[event] = []));\r\n\r\n    let remove;\r\n    let cb = once ? (...args)=>{ callback(...args); remove(); } : callback;\r\n    cb = bufferMs ? jet.buffer(cb, bufferMs, maxQueueMs, maxQueueSize) : cb;\r\n    \r\n    if (event.startsWith(\"before\")) { list.push(cb); } else { list.unshift(cb); }\r\n\r\n    return remove = _ => {\r\n      const id = list.indexOf(cb);\r\n      if (id >= 0) { list.splice(id, 1); }\r\n      return callback;\r\n    }\r\n  }\r\n\r\n  run(event, args=[], opt={}) {\r\n    const throwError = opt.throwError !== false;\r\n    const handlers = this.handlers[event];\r\n    if (!handlers?.length) { return true; }\r\n    const isBefore = event.startsWith(\"before\");\r\n\r\n    for (let i=handlers.length-1; i>=0; i--) {\r\n      const cb = handlers[i];\r\n      if (!cb) { continue; }\r\n      try { cb(...args, opt); } catch(err) {\r\n        if (isBefore && throwError) { throw err; }\r\n        else if (isBefore) { return false; }\r\n        else if (throwError) { console.warn(this.msg(err?.message || \"unknown error\"), err?.stack); }\r\n      }\r\n    }\r\n    \r\n    return true;\r\n  }\r\n\r\n  reset(throwError=true) {\r\n    const opt = { throwError };\r\n    if (!this.run(\"beforeReset\", [], opt)) { return false; }\r\n    for (let i in this.data) { delete this.data[i]; }\r\n    return this.run(\"afterReset\", [], opt);\r\n  }\r\n\r\n  _set(context, key, child, opt={}, afterEffect) {\r\n    const { context:ctx, index, list } = this.getData(context, opt.throwError, true);\r\n    \r\n    if (index.hasOwnProperty(key)) {\r\n      if (opt.throwError !== false) { throw Error(this.msg(`set(...) failed - duplicate`, key, ctx)); }\r\n      return false;\r\n    }\r\n\r\n    if (!(this.run(\"beforeSet\", [child, ctx], opt))) { return false; }\r\n    \r\n    list.push(index[key] = child);\r\n\r\n    if (afterEffect) { afterEffect(child, ctx, opt); }\r\n\r\n    return this.run(\"afterSet\", [child, ctx], opt);\r\n  }\r\n\r\n  set(child, opt={}, afterEffect) {\r\n    const context = this.getContext(child, true);\r\n    const key = this.validateKey(child.getKey(true), \"set\", opt.throwError);\r\n    if (!Array.isArray(context)) { return this._set(context, key, child, opt, afterEffect); }\r\n    let ok = true;\r\n    for (const ctx of context) { ok = (this._set(ctx, key, child, opt, afterEffect)) && ok; }\r\n    return ok;\r\n  }\r\n\r\n  _remove(context, key, child, opt={}, afterEffect) {\r\n    const { context:ctx, index, list } = this.getData(context, opt.throwError);\r\n    const id = list.indexOf(child);\r\n\r\n    if (id < 0) {\r\n      if (opt.throwError !== false) { throw Error(this.msg(`remove(...) failed - missing`, key, ctx)); }\r\n      return false;\r\n    }\r\n\r\n    if (!(this.run(\"beforeRemove\", [child, ctx], opt))) { return false; }\r\n\r\n    if (list.length === 1) { delete this.data[ctx]; } else {\r\n      list.splice(id, 1);\r\n      delete index[key];\r\n    }\r\n\r\n    if (afterEffect) { afterEffect(child, ctx, opt); }\r\n    \r\n    return this.run(\"afterRemove\", [child, ctx], opt);\r\n  }\r\n\r\n  remove(child, opt={}, afterEffect) {\r\n    const context = this.getContext(child, false);\r\n    const key = this.validateKey(child.getKey(false), \"remove\", opt.throwError);\r\n    if (!Array.isArray(context)) { return this._remove(context, key, child, opt, afterEffect); }\r\n    let ok = true;\r\n    for (const ctx of context) { ok = (this._remove(ctx, key, child, opt, afterEffect)) && ok; }\r\n    return ok;\r\n  }\r\n\r\n  exist(key, context, throwError = false) {\r\n    const { context:ctx, index } = this.getData(context, throwError);\r\n    key = this.validateKey(key, \"exist\", throwError);\r\n    if (index.hasOwnProperty(key)) { return true; }\r\n    if (throwError) { throw Error(this.msg(`exist failed - not exist`, key, ctx)); }\r\n    return false;\r\n  }\r\n\r\n  get(key, context, throwError = true) {\r\n    const { context:ctx, index } = this.getData(context, throwError);\r\n    key = this.validateKey(key, \"get\", throwError);\r\n    const child = index[key];\r\n    if (child) { return child; }\r\n    if (throwError) { throw Error(this.msg(`get failed - not exist`, key, ctx)); }\r\n  }\r\n\r\n  map(callback, opt={}) {\r\n    const { context, throwError, filter, orderBy, stopable, byKey } = opt;\r\n    const { list, index } = this.getData(context, throwError);\r\n    const optPass = { filter, orderBy, stopable};\r\n    return byKey ? _.map(index, callback, optPass) : _.list(list, callback, optPass);\r\n  }\r\n\r\n  find(checker, opt={}) {\r\n    const { context, throwError, filter, orderBy, stopable } = opt;\r\n    const { list } = this.getData(context, throwError);\r\n    return _.find(list, checker, { filter, orderBy, stopable });\r\n  }\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\n\r\nexport class Transactions {\r\n\r\n    constructor(onError) {\r\n        this.ticks = 0;\r\n        this.state = \"ready\";\r\n        this.queue = [];\r\n        this.onError = jet.isRunnable(onError) ? onError : ()=>{};\r\n        //this.last\r\n        //this.error\r\n    }\r\n\r\n    execute(name, execution, opt={ stopOnError:false, throwError:true }) {\r\n        const exe = last=>{\r\n            try { last; } catch(e) {}\r\n\r\n            if (this.queue[0] === exe) { return false; } //it was removed before it started\r\n            else { this.queue.shift(); }\r\n\r\n            //transaction before raised in error and it has stopOnError parametr active\r\n            let isErr = this.state === \"error\";\r\n            let err = this.error; \r\n\r\n            if (!isErr) { \r\n                this.state = name;\r\n                try { execution(this.ticks++); } catch(e) { isErr = true; err = e; }\r\n                this.state = (isErr || opt.stopOnError === false) ? \"ready\" : \"error\";\r\n                if (this.state === \"error\") { this.onError(this.error = err); }\r\n            }\r\n            \r\n            if (isErr && opt.throwError !== false) { throw err; }\r\n            \r\n            return !isErr;\r\n        }\r\n\r\n        return this.last = exe(this.last);\r\n    }\r\n\r\n    reset() {\r\n        this.state = \"ready\";\r\n        this.queue = [];\r\n    }\r\n\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\nimport { events, vault } from \"../../uni/consts.js\";\r\nimport { Chop } from \"../privates/Chop.js\";\r\nimport { Step } from \"../privates/Step.js\";\r\nimport { Row } from \"./Row.js\";\r\n\r\nconst { solid } = jet.prop;\r\n\r\nconst initStep = (table, vals) => {\r\n  const step = Step.create(table);\r\n  if (jet.isMapable(vals)) { step.push(vals); }\r\n  return step;\r\n}\r\n\r\nexport class Rows extends Chop {\r\n  constructor(table, stream) {\r\n\r\n    super(`${table.name}.rows`, {\r\n      childName: \"row\",\r\n      defaultContext: \"all\",\r\n      stream,\r\n      loader: (rows, bundle, data) => {\r\n        for (let index in data) {\r\n          const vals = data[index];\r\n          if (!jet.isMapable(vals)) { return; }\r\n          Row.create(rows, _p.onSave).set(vals, { throwError: false, silentSave: true });\r\n        }\r\n      }\r\n    });\r\n\r\n    const _p = vault.get(this);\r\n\r\n    const save = (row, opt={}, afterEffect) => {\r\n      const keySaved = row.key;\r\n      const wasRemoved = row.isRemoved;\r\n      const key = row.live.key;\r\n      const isRemoved = row.live.isRemoved;\r\n    \r\n      const rekey = key !== keySaved;\r\n      const remove = isRemoved !== wasRemoved;\r\n    \r\n      if (key && !isRemoved) {\r\n        if (rekey) { _p.bundle.set(row, opt, afterEffect); }\r\n        else {\r\n          _p.bundle.run(\"beforeUpdate\", [row, undefined], opt);\r\n          if (afterEffect) { afterEffect(row, undefined, opt); }\r\n          _p.bundle.run(\"afterUpdate\", [row, undefined], opt);\r\n        }\r\n      }\r\n      if (keySaved && (rekey || remove)) { _p.bundle.remove(row, opt, afterEffect); }\r\n    \r\n    }\r\n\r\n    _p.onSave = (...args) => this.isLoading ? save(...args) : _p.transactions.execute(\"saving\", _ => save(...args));\r\n\r\n    solid.all(this, {\r\n      db:table.db,\r\n      table,\r\n    }, false);\r\n\r\n    //translate primitive events to extra events\r\n    for (const [when, action, name] of events.primitive) {\r\n      this.on(name, (row, ctx, opt)=>{\r\n        if (this.state === \"loading\" || opt.silentSave) { return; }\r\n        return _p.bundle.run(when+\"Save\", [action, row], opt);\r\n      });\r\n      this.on(name, (row, ctx, opt)=>{\r\n        if (this.state === \"loading\") { return; }\r\n        return _p.bundle.run(when+\"Change\", [action, row], opt);\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  exist(key, throwError = false) {\r\n    return super.exist(key, undefined, throwError);\r\n  }\r\n\r\n  get(key, throwError = true) {\r\n    return super.get(key, undefined, throwError);\r\n  }\r\n\r\n  count(throwError = true) {\r\n    return super.count(undefined, throwError);\r\n  }\r\n\r\n  getList(throwError = true) {\r\n    return super.getList(undefined, throwError);\r\n  }\r\n\r\n  getIndex(throwError = true) {\r\n    return super.getIndex(undefined, throwError);\r\n  }\r\n\r\n  addOrUpdate(vals, opt = { add: true, update: true, autoSave: true, resetOnError: true, throwError: true }) {\r\n    const { table } = this;\r\n    const _p = vault.get(this);\r\n    this.untilLoaded(); //load\r\n    _p.transactions.last; //any operation\r\n\r\n    let step, key;\r\n    const ck = table.cols.primary;\r\n    if (!ck.formula && !ck.resetIf) { key = ck.toRaw(ck.fetch(vals)); } // quick key\r\n    if (key == null) { step = initStep(table, vals); key = step.getKey(); }\r\n    if (key == null) { if (opt.throwError !== false) { throw Error(this.msg(\"push failed - missing key\", vals)); } return; }\r\n\r\n    const rowFrom = this.get(key, false);\r\n\r\n    if (opt.update !== false) {\r\n      if (rowFrom) { rowFrom.update(vals, opt); return rowFrom; }\r\n      if (!opt.add) { if (opt.throwError !== false) { throw Error(this.msg(\"update failed - key not found\", key)); } return; }\r\n    }\r\n\r\n    if (opt.add !== false) {\r\n      if (rowFrom) { if (opt.throwError !== false) { throw Error(this.msg(\"add failed - duplicate key\", key)); } return; }\r\n      const rowTo = Row.create(this, _p.onSave, step || initStep(table, vals));\r\n      if (opt.autoSave !== false) { rowTo.save(opt); }\r\n      return rowTo;\r\n    }\r\n\r\n  }\r\n\r\n  add(vals, opt = { autoSave: true, resetOnError: true, throwError: true }) {\r\n    opt.add = true;\r\n    opt.update = false;\r\n    return this.addOrUpdate(vals, opt);\r\n  }\r\n\r\n  update(vals, opt = { autoSave: true, resetOnError: true, throwError: true }) {\r\n    opt.add = false;\r\n    opt.update = true;\r\n    return this.addOrUpdate(vals, opt);\r\n  }\r\n\r\n  addChop(name, opt = {}) {\r\n    return super.addChop(name, {\r\n      ...opt,\r\n      loader: (chop, bundle) => {\r\n        chop.on(\"afterReset\", this.on(\"beforeUpdate\", row=>bundle.remove(row)), false);\r\n        chop.on(\"afterReset\", this.on(\"afterUpdate\", row=>bundle.set(row)), false);\r\n      }\r\n    });\r\n  }\r\n\r\n  chopByCol(colName, filter, cacheAs = true, morphSeparator=\"$$\") {\r\n    const c = this.table.cols(colName);\r\n    const { separator, ref, isMorph } = c;\r\n    const extra = { isRef:!!ref, isMorph };\r\n    const toRaw = !isMorph ? v=>c._toRaw(v) : v=>{ if (v) { return v.table.name + morphSeparator + v.key } }\r\n    if (isMorph) { extra.morphSeparator = morphSeparator; }\r\n\r\n    return this.addChop(\r\n      typeof cacheAs == \"string\" ? cacheAs : colName,\r\n      {\r\n        useCache: cacheAs,\r\n        getContext: row => {\r\n          if (filter && (filter(row)) === false) { return; }\r\n          const val = row.saved?.get(colName);\r\n          if (!separator) { return toRaw(val, row); }\r\n          let res = [];\r\n          for (const v of val) {\r\n            const r = toRaw(v, row);\r\n            if (r != null) { res.push(r); }\r\n          }\r\n          return res;\r\n        },\r\n        extra\r\n      }\r\n    );\r\n\r\n  }\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\nimport { Wrap } from \"../interfaces/Wrap\";\r\nimport { evaluate } from \"../tools\";\r\n\r\nconst { solid, virtual } = jet.prop;\r\n\r\nexport class Step {\r\n\r\n  static is(any) { return any instanceof Step; }\r\n\r\n  static create(table, before) { return new Step(table, before); }\r\n\r\n  constructor(table, before) {\r\n\r\n    this.key = before?.key;\r\n    let state = \"ready\";\r\n\r\n    solid.all(this, {\r\n      db: table.db,\r\n      table,\r\n      wrap:Wrap.create(table, this),\r\n      lock:_=>state !== \"ready\" ? false : ((state = \"locked\") && true),\r\n      unlock:_=>state !== \"locked\" ? false : ((state = \"ready\") && true),\r\n      retire:_=>{ before = null; state = \"retired\"; }\r\n    }, false);\r\n\r\n    virtual.all(this, {\r\n      before:_=>before,\r\n      state:_=>state,\r\n      label:_=>this.pull(table.cols.label),\r\n      isExist:_=>!this.isRemoved && table.rows.exist(this.key),\r\n      isDirty:_=>!!this.changeList.length || this.key !== before?.key || !this.isRemoved !== !(before?.isRemoved)\r\n    });\r\n\r\n    this.reset();\r\n  }\r\n\r\n  getKey() { return this.key; }\r\n\r\n  pull(col) {\r\n    if (!col) { return; }\r\n\r\n    const { vals, raws, vStamp, vSolid, before, wrap } = this;\r\n    const { isVirtual, init, resetIf, formula, isReadonly, separator } = col;\r\n    const cacheStamp = col.getCacheStamp();\r\n\r\n    if (vals.hasOwnProperty(col) && (!isVirtual || vStamp[col] === cacheStamp)) {\r\n      const cval = vals[col];\r\n      return (separator && cval) ? [...cval] : cval; //revive cached value\r\n    }\r\n\r\n    let raw = raws[col];\r\n    const self = _ => col.toVal(raw, wrap);\r\n\r\n    if (!vSolid[col]) { //reset raws if is not solid\r\n      vSolid[col] = !isVirtual; //reset everytime if isVirtual\r\n      if (formula) { raw = formula(wrap); } //formula\r\n      else {\r\n        const bew = before ? before.raws[col] : raw;\r\n        if (raw !== bew && isReadonly && isReadonly(wrap, self)) { raw = bew; } //revive value\r\n        if (!before ? (init && raw == null) : (resetIf && resetIf(wrap, self))) { raw = init ? init(wrap) : undefined; } //init or reset\r\n      }\r\n    }\r\n\r\n    const val = self();\r\n    if (cacheStamp) {\r\n      vals[col] = val; //cache value\r\n      vStamp[col] = cacheStamp; //create cacheStamp\r\n    } \r\n\r\n    if (!isVirtual || col.isPrimary) { raws[col] = col.toRaw(val); }\r\n\r\n    return val;\r\n  };\r\n\r\n  push(vals, force = true) {\r\n    if (this.state !== \"ready\") { return false; }\r\n\r\n    const { table: { rows:{ isLoading }, cols }, raws, before } = this;\r\n\r\n    const reals = cols.virtuals.getList(false);\r\n    const changeList = this.changeList = [];\r\n    const changes = this.changes = {};\r\n    this.vals = {};\r\n    this.vStamp = {};\r\n    this.vSolid = {};\r\n\r\n    for (const col of reals) {\r\n      this.vSolid[col] = isLoading; //no reset raws on pull\r\n      const raw = col.fetch(vals);\r\n      if (raw !== undefined) { raws[col] = col.toRaw(raw); }\r\n      else if (force) { delete raws[col]; }\r\n      if (isLoading) {\r\n        changeList.push(col);\r\n        changes[col] = raws[col];\r\n      }\r\n    }\r\n\r\n    if (!isLoading) {\r\n      for (const col of reals) {\r\n        this.pull(col);\r\n        if (before && raws[col] !== before.raws[col]) { //is isDirty column\r\n          changeList.push(col);\r\n          changes[col] = raws[col];\r\n        } \r\n      };\r\n    }\r\n\r\n    this.key = this.pull(cols.primary);\r\n\r\n    return !!changeList.length;\r\n  }\r\n\r\n  get(col, throwError=true) {\r\n    const { table: { cols } } = this;\r\n    if (!Array.isArray(col)) { return this.pull(cols.get(col, throwError !== false)); }\r\n    let row;\r\n    for (const c of col) {\r\n      if (c === col[0]) { row = this.pull(cols.get(c, throwError !== false)); }\r\n      else if (row?.get) { row = row.get(c, throwError); }\r\n      else { return; }\r\n    }\r\n    return row;\r\n  }\r\n\r\n  getRaw(col, throwError=true) {\r\n    const { table: { cols } } = this;\r\n    if (this.raws.hasOwnProperty(col)) { return this.raws[col]; }\r\n    const c = cols(col, throwError);\r\n    if (c && c.isVirtual) { return c.toRaw(this.pull(c)); }\r\n  }\r\n\r\n  eval(selector, opt={}) {\r\n    return evaluate(this, selector, opt);\r\n  }\r\n\r\n  extract(noVals, filter) {\r\n    const { table: { cols } } = this;\r\n    return cols.map(c=>{\r\n      if (filter && !filter(c)) { return; }\r\n      return !noVals ? this.pull(c) : !c.isVirtual ? this.raws[c] : c.toRaw(this.pull(c));\r\n    }, { byKey:true });\r\n  }\r\n\r\n  remove() {\r\n    if (this.state !== \"ready\") { return false; }\r\n    return this.isRemoved = true;\r\n  }\r\n\r\n  reset() {\r\n    if (this.state !== \"ready\") { return false; }\r\n    const { before} = this;\r\n    this.isRemoved = before?.isRemoved || false;\r\n    this.raws = before ? { ...before.raws } : {}; // raw data stored\r\n    this.vals = before ? { ...before.vals } : {}; // values ready to use\r\n    this.vStamp = before ? { ...before.vStamp } : {}; // keep track of when value was cached\r\n    this.vSolid = before ? { ...before.vSolid } : {}; // keep track of values that should be reseted (formula bug repair)\r\n    this.changeList = [];\r\n    this.changes = {};\r\n    return true;\r\n  }\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\n\r\nconst { solid, virtual } = jet.prop;\r\n\r\nexport class Wrap extends jet.types.Plex {\r\n\r\n  static is(any) { return any instanceof Wrap; }\r\n\r\n  static create(table, step) { return new Wrap(table, step); }\r\n\r\n  constructor(table, step) {\r\n    const { db, rows, cols } = table;\r\n\r\n    const get = (col, throwError = true) => step.get(col, throwError);\r\n\r\n    super(get);\r\n\r\n    solid.all(this, {\r\n      db,\r\n      table,\r\n      rows,\r\n      get,\r\n      getRaw:(col, throwError=true) => step.getRaw(col, throwError),\r\n      eval:(selector, opt = {}) => step.eval(selector, opt),\r\n      getRaws:filter=>step.extract(true, filter),\r\n      getVals:filter=>step.extract(false, filter)\r\n    }, false);\r\n\r\n    virtual.all(this, {\r\n      key: _ => step.key,\r\n      label: _ => step.label,\r\n      before: _ => step.before?.wrap,\r\n      isExist: _ => step.isExist,\r\n      isDirty: _ => step.isDirty,\r\n      isRemoved: _ => step.isRemoved,\r\n      raws: _ => ({ ...step.raws }),\r\n      vals: _ => cols.map(col => step.pull(col), { byKey: true }),\r\n      changeList: _ => ([...step.changeList]),\r\n      changes: _ => ({ ...step.changes })\r\n    });\r\n\r\n  }\r\n\r\n  chopByRef(tableName, colName, filter, cacheAs = true, morphSeparator = \"$$\") {\r\n    const table = this.db.get(tableName);\r\n    const chop = table.rows.chopByCol(colName, filter, cacheAs, morphSeparator);\r\n    if (chop.extra.isRef) { return chop; }\r\n    throw Error(this.table.msg(`chopByRef table('${tableName}') column('${colName}') failed because column is not ref`));\r\n  }\r\n\r\n  refs(tableName, colName, filter, cache = {}) {\r\n    const chop = (cache.current || (cache.current = this.chopByRef(tableName, colName, filter, false)));\r\n    return chop.getList((chop.extra.isMorph ? this.table.name + chop.extra.morphSeparator : \"\") + this.key, false);\r\n  }\r\n\r\n  getKey() {\r\n    return this.key;\r\n  }\r\n\r\n  toJSON() {\r\n    return this.key || null;\r\n  }\r\n\r\n  toString() {\r\n    return this.key || \"\";\r\n  }\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\nimport { Step } from \"../privates/Step\";\r\n\r\nconst { solid, virtual } = jet.prop;\r\n\r\nexport class Row extends jet.types.Plex {\r\n\r\n  static create(rows, onSave, iniStep) { return new Row(rows, onSave, iniStep); };\r\n\r\n  constructor(rows, onSave, iniStep) {\r\n    const { db, table } = rows;\r\n    const _p = {};\r\n\r\n    const get = (col, throwError=true) => _p.live.get(col, throwError);\r\n    const push = (vals, force, opt = { autoSave: true, resetOnError: true, throwError: true, silentSave:false }) => {\r\n      return (_p.live.push(vals, force)) && (opt.autoSave === false || this.save(opt));\r\n    }\r\n\r\n    const markAsSaved = _=>{ _p.live = Step.create(table, _p.saved = _p.live); }\r\n\r\n    super(get);\r\n\r\n    solid.all(this, {\r\n      db,\r\n      table,\r\n      rows,\r\n      get,\r\n      getRaw: (col, throwError=true) => _p.live.getRaw(col, throwError),\r\n      eval:(selector, opt = {}) => _p.live.eval(selector, opt),\r\n      set: (vals, opt = { autoSave: true, resetOnError: true, throwError: true }) => push(vals, true, opt),\r\n      update: (vals, opt = { autoSave: true, resetOnError: true, throwError: true }) => push(vals, false, opt),\r\n      reset: _ => !this.isDirty || _p.live.reset(),\r\n      remove: (opt = { autoSave: true, resetOnError: true, throwError: true }) => {\r\n        return _p.live.remove() && (opt.autoSave === false || this.save(opt));\r\n      },\r\n      save: (opt = { resetOnError: true, throwError: true, silentSave:false }) => {\r\n        if (!this.isDirty) { return true; }\r\n        const live = _p.live;\r\n        try {\r\n          live.lock();\r\n          onSave(this, { throwError:true, silentSave:opt.silentSave === true }, markAsSaved);\r\n          live.retire(); // for duration of on(\"after...\") effects row.saved.before is still present\r\n          return true;\r\n        } catch (err) {\r\n          live.unlock();\r\n          if (opt.resetOnError !== false) { this.reset(); }\r\n          if (opt.throwError !== false) { throw err; }\r\n          console.warn(this.msg(err?.message || \"unknown error\"), err?.stack);\r\n          return false;\r\n        }\r\n      }\r\n    }, false);\r\n\r\n    virtual.all(this, {\r\n      key: _ => _p.saved?.key,\r\n      label: _ => _p.saved?.label,\r\n      isRemoved: _ => !_p.saved || _p.saved.isRemoved,\r\n      isExist: _ => !!(_p.saved?.isExist),\r\n      isDirty: _ => _p.live.isDirty,\r\n      live: _ => _p.live.wrap,\r\n      saved: _ => _p.saved?.wrap\r\n    });\r\n\r\n    _p.live = iniStep || Step.create(table);\r\n\r\n  }\r\n\r\n  msg(text) {\r\n    return this.rows.msg(text, this.key || JSON.stringify(this.raws));\r\n  }\r\n\r\n  getKey(isSet) { return isSet ? this.live.key : this.key; }\r\n\r\n  toJSON() {\r\n    return this.key;\r\n  }\r\n\r\n  toString() {\r\n    return this.key || \"\";\r\n  }\r\n\r\n}\r\n", "import jet from \"@randajan/jet-core\";\r\nimport { vault, formatKey } from \"../../uni/consts.js\";\r\nimport { colsTraits } from \"../traits.js\";\r\n\r\nimport { Chop } from \"../privates/Chop.js\";\r\nimport { Col } from \"../interfaces/Col.js\";\r\n\r\n\r\n\r\nconst { solid, virtual } = jet.prop;\r\n\r\nconst loader = (cols, bundle, data) => {\r\n  const _p = vault.get(cols);\r\n  const isArray = Array.isArray(data);\r\n  const { list } = _p.bundle.getData();\r\n\r\n  delete _p.primary;\r\n  delete _p.label;\r\n\r\n  for (const index in data) {\r\n    let value = data[index];\r\n    const isObj = Object.jet.is(value);\r\n\r\n    const name = formatKey((isArray && !isObj) ? value : value.name, index);\r\n    const traits = isObj ? {...value} : {};\r\n\r\n    if (isObj) {\r\n      delete traits.name;\r\n      for (const trait in colsTraits) {\r\n        const v = traits[trait];\r\n        delete traits[trait];\r\n        if (!v) { continue; }\r\n        const prop = colsTraits[trait];\r\n        if (_p[prop]) { throw Error(cols.msg(`${prop} column is allready set as '${_p[prop]}'`, name)); }\r\n        _p[prop] = name;\r\n      }\r\n    }\r\n    \r\n    bundle.set(new Col(cols, list.length, name, traits));\r\n  }\r\n\r\n  if (!list.length) { throw Error(cols.msg(\"at least one column is required\")); }\r\n\r\n  if (!_p.primary) { _p.primary = list[0]; }\r\n  if (!_p.label) { _p.label = _p.primary; }\r\n\r\n}\r\n\r\nexport class Cols extends Chop {\r\n\r\n  constructor(table, stream) {\r\n\r\n    super(`${table.name}.cols`, {\r\n      childName:\"column\",\r\n      defaultContext:\"all\",\r\n      stream,\r\n      loader\r\n    });\r\n\r\n    const _p = vault.get(this);\r\n\r\n    solid.all(this, {\r\n      db:table.db,\r\n      table,\r\n      virtuals:this.addChop(\"virtuals\", { getContext:c=>c.isVirtual, defaultContext:true }),\r\n      refs:this.addChop(\"refs\", { getContext:c=>!!c.ref, defaultContext:true })\r\n    }, false);\r\n  \r\n    virtual.all(this, {\r\n      primary:this.withUntilLoaded(_=>_p.bundle.get(_p.primary)),\r\n      label:this.withUntilLoaded(_=>_p.bundle.get(_p.label))\r\n    });\r\n\r\n  }\r\n\r\n  exist(name, throwError = false) {\r\n    return super.exist(name, undefined, throwError);\r\n  }\r\n\r\n  get(name, throwError = true) {\r\n    return super.get(name, undefined, throwError);\r\n  }\r\n\r\n  count(throwError=true) {\r\n    return super.count(undefined, throwError);\r\n  }\r\n\r\n  getList(throwError=true) {\r\n    return super.getList(undefined, throwError);\r\n  }\r\n\r\n  getIndex(throwError=true) {\r\n    return super.getIndex(undefined, throwError);\r\n  }\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\nimport { map } from \"@randajan/jet-core/eachSync\";\r\nimport { functionOrNull, numberPositive } from \"../uni/consts\";\r\nimport { breachSelector } from \"../uni/tools\";\r\n\r\n\r\nconst _scopes = [\"global\", \"db\", \"table\", \"self\"];\r\nexport const colsTraits = {\r\n    isPrimary: \"primary\",\r\n    isLabel: \"label\"\r\n};\r\n\r\nconst functionWithCacheOrNull = (trait, col)=>{\r\n    const selector = col.selector;\r\n    const formula = functionOrNull(trait);\r\n    if (!formula) { return selector ? row=>row.eval(selector) : null; }\r\n    const cache = {};\r\n    if (!selector) { return row=>formula(row, cache); }\r\n    return row=>formula(row.eval(selector), row, cache);\r\n}\r\n\r\nexport const colTo = map({\r\n    boolean:{val:Boolean.jet.to},\r\n    string:{val:(v, c)=>String.jet.to(v).substr(0, c.max)},\r\n    ref:{val:String, raw:v=>v.key || v},\r\n    number:{val:(v, c)=>Number.jet.round(Number.jet.frame(Number.jet.to(v), c.min, c.max), c.dec)},\r\n    datetime:{val:v=>v == null ? new Date() : new Date(v)},\r\n    duration:{val:v=>Math.max(0, Math.round(Number.jet.to(v)))},\r\n    object:{val:v=>jet.json.from(v)}\r\n}, t=>t.raw ? t : {...t, raw:t.val});\r\n\r\n\r\nexport const colTraits = {\r\n    type: jet.enumFactory(Object.keys(colTo), {\r\n        before:raw=>String.jet.simplify(String.jet.to(raw)), \r\n        after:(output, col)=>col.ref ? \"ref\" : output != null ? output : \"string\"\r\n    }),\r\n    isReadonly: functionOrNull,\r\n    resetIf: functionOrNull,\r\n    init: functionOrNull,\r\n    selector:val=>(Array.isArray(val) || typeof val === \"string\") ? val : null,\r\n    formula: functionWithCacheOrNull,\r\n    ref: functionOrNull,\r\n    display: (val, col)=>numberPositive(val, col.db.displayDefault),\r\n    separator: String.jet.to,\r\n    isVirtual: Boolean.jet.to,\r\n    isTrusted: Boolean.jet.to,\r\n    isMorph:(val, col)=>typeof col._ref === \"function\",\r\n    dec:(val, col)=>Math.round(numberPositive(val, col.db.decimalDefault)),\r\n    min:val=>val == null ? undefined : Number.jet.to(val),\r\n    max:val=>val == null ? undefined : Number.jet.to(val),\r\n    noNull: Boolean.jet.to,\r\n    extra: Object.jet.to,\r\n    scope: (raw, col)=>{\r\n        if (!col.isVirtual) { return _=>\"self\"; }\r\n        if (typeof raw === \"string\") {\r\n            raw = String.jet.simplify(String.jet.to(raw));\r\n            return _scopes.includes(raw) ? _=>raw : _=>raw.split(\",\");\r\n        }\r\n        if (Array.isArray(raw)) { return _=>[...raw]; }\r\n        if (!col.selector) { return _=>\"self\"; }\r\n\r\n        let ready, pending;\r\n        const tables = new Set(), scopes = new Set();\r\n\r\n        return _=>{\r\n            if (pending) { pending; }\r\n            else if (!ready) {\r\n                (pending = collectDeps(col.cols, col.selector, tables, scopes));\r\n                ready = true;\r\n                pending = null;\r\n            }\r\n            if (scopes.has(\"global\")) { return \"global\"; }\r\n            if (scopes.has(\"db\")) { return \"db\"; }\r\n            if (!tables.size) { return \"self\"; }\r\n    \r\n            return [...tables];\r\n        }\r\n\r\n    }\r\n\r\n};\r\n\r\nconst collectDeps = (cols, selector, tables, scopes)=>{\r\n    if (!cols) { return; }\r\n    if (scopes.has(\"global\") || scopes.has(\"db\")) { return; }\r\n\r\n    breachSelector(selector, \r\n        (alias, path, selector)=>{\r\n            if (path === \"*\") { return; } //not allowed here\r\n            const c = cols(path || selector);\r\n            const s = c.scope();\r\n            if (!Array.isArray(s)) { scopes.add(s); }\r\n            else { for (const t of s) { tables.add(t); } }\r\n            if (!c._ref) { return; }\r\n            if (c.isMorph) { scopes.add(\"db\"); return; }\r\n            if (!path) { return; }\r\n            tables.add(c._ref);\r\n            const tbl = cols.db(c._ref);\r\n            return collectDeps(tbl.cols, selector, tables, scopes);\r\n        },\r\n        arr=>arr.map(selector=>collectDeps(cols, selector, tables, scopes))\r\n    );\r\n}\r\n", "import jet from \"@randajan/jet-core\";\r\nimport { vault } from \"../../uni/consts\";\r\nimport { evaluate } from \"../tools\";\r\nimport { colTraits, colTo, } from \"../traits\";\r\n\r\nconst { solid, virtual, cached } = jet.prop;\r\n\r\nconst cacheStampFactory = col=>{\r\n    const { db, table } = col;\r\n    const scope = col.scope();\r\n    if (scope === \"self\") { return _=>1; }\r\n    if (scope === \"table\") { return _=>table.lastChange; }\r\n    if (scope === \"db\") { return _=>db.lastChange; }\r\n    if (scope === \"global\") { return _=>0; }\r\n    \r\n    const getLastChanges = tn=>db(tn).lastChange;\r\n    return _=>Math.max(...scope.map(getLastChanges));\r\n}\r\n\r\nexport class Col {\r\n\r\n    constructor(cols, id, name, traits) {\r\n        const { db, table } = cols;\r\n        const _c = vault.get(cols);\r\n        const _p = {};\r\n\r\n        let _gcs;\r\n        solid.all(this, {\r\n            db,\r\n            table,\r\n            cols,\r\n            getCacheStamp: _=>(_gcs || (_gcs = cacheStampFactory(this)))(),\r\n            _ref:traits.ref\r\n        }, false);\r\n\r\n        solid.all(this, {\r\n            id,\r\n            name\r\n        });\r\n        \r\n        virtual.all(this, {\r\n            isPrimary: _ => _c.primary === name,\r\n            isLabel: _ => _c.label === name\r\n        });\r\n\r\n        for (const tn in colTraits) {\r\n            const trait = traits[tn];\r\n            delete traits[tn];\r\n            cached(this, _p, tn, _=>colTraits[tn](trait, this));\r\n        }\r\n\r\n        if (this.isVirtual && !this.formula) {\r\n            throw Error(this.msg(\"virtual column require formula to be set\"));\r\n        }\r\n\r\n        if (this.ref && (this.isPrimary || this.isLabel)) {\r\n            throw Error(this.msg(\"columns with ref couldn't be primary or label\"));\r\n        }\r\n\r\n        const unknownTraits = Object.keys(traits);\r\n\r\n        if (unknownTraits.length) {\r\n            throw Error(this.msg(`unknown trait${unknownTraits.length > 1 ? \"s\" : \"\"} '${unknownTraits.join(\"', '\")}'`));\r\n        }\r\n\r\n    }\r\n\r\n    get(trait, throwError=true) {\r\n        if (trait === \"name\" || colTraits[trait]) { return this[trait]; }\r\n        if (throwError) { throw Error(`unknown trait '${trait}'`); }\r\n    }\r\n\r\n    eval(selector, opt={}) {\r\n        return evaluate(this, selector, opt);\r\n    }\r\n\r\n    msg(text) {\r\n        return this.cols.msg(text, this.name);\r\n    }\r\n\r\n    getKey() { return this.name; }\r\n\r\n    _toRaw(val) {\r\n        if (val != null || this.noNull) { return colTo[this.type].raw(val, this); }\r\n    }\r\n\r\n    toRaw(val) {\r\n        const { separator } = this;\r\n        if (!separator) { return this._toRaw(val); }\r\n        if (!Array.isArray(val)) { val = Array.jet.to(String.jet.to(val, separator)); }\r\n        let raw = \"\";\r\n        for (let v of val) {\r\n            v = this._toRaw(v);           \r\n            if (v == null || v == \"\") { continue; }\r\n            raw += (raw ? separator : \"\") + v;\r\n        }\r\n        if (raw) { return raw; }\r\n    }\r\n\r\n    _toVal(raw, refName) {\r\n        if (raw != null || this.noNull) { raw = colTo[this.type].val(raw, this); }\r\n        if (raw != null) { return refName ? (this.db(refName)).rows.get(raw, false) : raw; }\r\n    }\r\n\r\n    toVal(raw, row) {\r\n        const { separator, ref, isTrusted } = this;\r\n        const refName = (ref && row) ? ref(row) : null;\r\n\r\n        if (!separator) { return this._toVal(raw, refName); }\r\n\r\n        const list = raw == null ? [] : Array.isArray(raw) ? raw : String(raw).split(separator);\r\n        if (!list.length || (isTrusted && raw === list)) { return list; }\r\n\r\n        for (let i in list) { list[i] = this._toVal(list[i], refName); }\r\n\r\n        return list;\r\n    }\r\n\r\n    fetch(vals) {\r\n        return Array.isArray(vals) ? vals[this.id] : vals ? vals[this.name] : undefined;\r\n    }\r\n\r\n    toJSON() {\r\n        return this.name || null;\r\n    }\r\n\r\n    toString() {\r\n        return this.name || \"\";\r\n    }\r\n\r\n}", "\r\n\r\nexport const toRefId = ref=>(typeof ref !== \"string\") ? ref?.id : ref;\r\n\r\nexport const isNull = v=>(v == null || (typeof v === \"number\" && isNaN(v)));\r\n\r\nexport const isFce = fce=>typeof fce === \"function\";\r\nexport const toFce = (fce, defReturn)=>isFce(fce) ? fce : ()=>defReturn;\r\nexport const wrapFce = (wrap, what)=>(...args)=>wrap(what(...args));\r\n\r\nexport const toStr = (any, def)=>isNull(any) ? def : String(any);\r\nexport const toArr = (any)=>any instanceof Array ? any : [any];\r\n\r\nexport const toNum = (val, min, max, dec)=>{\r\n    val = Number(val);\r\n    if (isNaN(val)) { return val; }\r\n    if (!isNull(max)) { val = Math.min(val, max); }\r\n    if (!isNull(min)) { val = Math.max(val, min); }\r\n    if (dec == 0) { val = Math.round(val); }\r\n    else if (dec > 0) {\r\n        const pow = Math.pow(10, dec);\r\n        val = Math.round(val*pow)/pow;\r\n    }\r\n    return val;\r\n}\r\n\r\nexport const toDate = (val, min, max)=>{\r\n    if (!(val instanceof Date)) { val = Date.parse(val); }\r\n    if (isNull(min) && isNull(max)) { return val; }\r\n    return new Date(toNum(x.getTime(), min, max));\r\n}\r\n\r\nexport const reArray = (val, trait)=>{\r\n    const res = [];\r\n    if (isNull(val)) { return res; }\r\n    if (!Array.isArray(val)) { res.push(trait(val)); return res; }\r\n\r\n    for (const v of val) {\r\n        const r = trait(v);\r\n        if (!isNull(r)) { res.push(r); }\r\n    }\r\n\r\n    return res;\r\n}\r\n\r\nexport const join = (separator, ...vals)=>{\r\n    let s = \"\";\r\n    for (let v of vals) {\r\n        v = toStr(v);\r\n        if (!v) { return; }\r\n        s += (!s ? \"\" : separator) + v;\r\n    }\r\n    return s;\r\n}", "import { vault } from \"../../uni/consts\";\r\n\r\nconst prepareRecs = (chop, recsByGroupId, groupId, throwError = true, autoCreate = false)=>{\r\n    let recs = recsByGroupId.get(groupId);\r\n    if (recs) { return recs; }\r\n    if (autoCreate) { recsByGroupId.set(groupId, recs = new Map()); }\r\n    else if (throwError) { throw Error(chop.msg(`not found`, {group:groupId})); }\r\n    return recs;\r\n};\r\n\r\nexport const deleteRec = (chop, recsByGroupId, groupId, rec)=>{\r\n    const recs = prepareRecs(chop, recsByGroupId, groupId, true, false);\r\n\r\n    if (!recs?.has(rec.id)) { throw Error(chop.msg(`delete(...) critical error - inconsistency`, { group:groupId, row:rec.id }));}\r\n\r\n    if (recs.size <= 1) { recsByGroupId.delete(groupId); }\r\n    else { recs.delete(rec.id); }\r\n}\r\n\r\nexport const setRec = (chop, recsByGroupId, groupId, rec)=>{\r\n    const recs = prepareRecs(chop, recsByGroupId, groupId, false, true);\r\n\r\n    const current = recs.get(rec.id);\r\n\r\n    if (!current) { recs.set(rec.id, rec); return; }\r\n    if (current === rec) { return; }\r\n\r\n    throw Error(chop.msg(`add(...) failed - duplicate`, { group:groupId, row:rec.id }));\r\n}\r\n\r\n\r\nexport const getRec = (chop, groupId, recId, throwError = false)=>{\r\n\r\n    if (!recId) {\r\n        if (throwError) { throw Error(chop.msg(`get(...) failed - id undefined`, { group:groupId })); }\r\n        return;\r\n    }\r\n\r\n    const { recsByGroupId } = vault.get(chop);\r\n    const recs = prepareRecs(chop, recsByGroupId, groupId, throwError, false);\r\n\r\n    return recs?.get(recId);\r\n}\r\n\r\nexport const getRecs = (chop, groupId, throwError = false)=>{\r\n    const { recsByGroupId } = vault.get(chop);\r\n    return prepareRecs(chop, recsByGroupId, groupId, throwError, false);\r\n}\r\n\r\nexport const getAllRecs = chop=>vault.get(chop).groupIdsByRec;\r\n", "import { vault } from \"../../uni/consts\";\r\nimport { deleteRec } from \"./_bits\";\r\nimport { runEvent } from \"./eventHandlers\";\r\n\r\n\r\nexport const afterRemove = (chop, res, ctx)=>{\r\n    const { isMultiGroup, recsByGroupId, groupIdsByRec, filter, handlers, childs, state } = vault.get(chop);\r\n    const rec = res.current;\r\n\r\n    const from = groupIdsByRec.get(rec);\r\n    if (!from) {\r\n        if (filter(rec)) { throw Error(chop.msg(`remove(...) failed - missing`, { row:rec.id })); }\r\n        return false;\r\n    }\r\n\r\n    if (isMultiGroup) {\r\n        for (const groupId of from) { deleteRec(chop, recsByGroupId, groupId, rec); }\r\n    } else {\r\n        deleteRec(chop, recsByGroupId, from, rec);\r\n    }\r\n    \r\n    groupIdsByRec.delete(rec);\r\n\r\n    return runEvent(handlers, childs, state, \"remove\", res, ctx);\r\n}\r\n", "import { vault } from \"../../uni/consts\";\r\nimport { runEvent } from \"./eventHandlers\";\r\n\r\nexport const afterReset = (chop, ctx)=>{\r\n    const _p = vault.get(chop);\r\n    const { recsByGroupId, groupIdsByRec, init, handlers, childs, state } = _p;\r\n    \r\n    groupIdsByRec.clear();\r\n    recsByGroupId.clear();\r\n    \r\n    _p.state = \"init\";\r\n    init(chop, ctx);\r\n\r\n    _p.state = \"reset\";\r\n    runEvent(handlers, childs, _p.state, \"reset\", undefined, ctx);\r\n\r\n    _p.state = \"ready\";\r\n    return true;\r\n}", "import { vault } from \"../../uni/consts\";\r\nimport { deleteRec, setRec } from \"./_bits\";\r\nimport { runEvent } from \"./eventHandlers\";\r\n\r\n\r\nexport const afterUpdate = (chop, res, ctx)=>{\r\n    const { isMultiGroup, recsByGroupId, groupIdsByRec, filter, handlers, childs, state } = vault.get(chop);\r\n    const rec = res.current;\r\n\r\n    const from = groupIdsByRec.get(rec);\r\n    if (!from) {\r\n        if (filter(rec)) { throw Error(chop.msg(`update(...) failed - missing`, { row:rec.id })); }\r\n        return false;\r\n    }\r\n\r\n    const to = chop.getGroup(rec);\r\n\r\n    if (isMultiGroup) {\r\n        const results = new Set();\r\n\r\n        for (const groupId of to) {\r\n            if (results.has(groupId)) { continue; } //duplicate control\r\n            results.add(groupId);\r\n            if (from.has(groupId)) { from.delete(groupId); continue; } //remove to from\r\n            setRec(chop, recsByGroupId, groupId, rec); //add new\r\n        }\r\n\r\n        for (const groupId of from) {\r\n            deleteRec(chop, recsByGroupId, groupId, rec); //remove old\r\n        }\r\n\r\n        groupIdsByRec.set(rec, results);\r\n\r\n    } else if (to !== from) {\r\n        setRec(chop, recsByGroupId, to, rec);\r\n        deleteRec(chop, recsByGroupId, from, rec);\r\n        groupIdsByRec.set(rec, to);\r\n    }\r\n\r\n    return runEvent(handlers, childs, state, \"update\", res, ctx);\r\n}", "import { vault } from \"../../uni/consts\";\r\nimport { isFce } from \"../../uni/formats\";\r\nimport { afterAdd } from \"./afterAdd\";\r\nimport { afterRemove } from \"./afterRemove\";\r\nimport { afterReset } from \"./afterReset\";\r\nimport { afterUpdate } from \"./afterUpdate\";\r\n\r\n\r\nexport const runEvent = (handlers, childs, state, event, res, ctx)=>{\r\n    if (state === \"init\") { return; }\r\n\r\n    if (childs.size) {\r\n        if (event === \"reset\") {\r\n            for (const child of childs) { afterReset(child, ctx); }\r\n        }\r\n        else if (event === \"add\") {\r\n            for (const child of childs) { afterAdd(child, res, ctx); }\r\n        }\r\n        else if (event === \"remove\") {\r\n            for (const child of childs) { afterRemove(child, res, ctx); }\r\n        }\r\n        else if (event === \"update\") {\r\n            for (const child of childs) { afterUpdate(child, res, ctx); }\r\n        }\r\n    }\r\n\r\n    if (handlers?.length) {\r\n        for (let i = handlers.length - 1; i >= 0; i--) {\r\n            try { if (handlers[i]) { handlers[i](event, res, ctx); } }\r\n            catch(err) { console.error(err); } //TODO better fail handler\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nexport const onEvent = (chop, callback, onlyOnce = false)=>{\r\n    if (!isFce(callback)) { throw Error(chop.msg(`on(...) require callback`)); }\r\n    const { handlers } = vault.get(chop);\r\n\r\n    let remove;\r\n    const cb = onlyOnce ? (...args) => { callback(...args); remove(); } : callback;\r\n\r\n    handlers.unshift(cb);\r\n\r\n    return remove = _ => {\r\n        const x = handlers.indexOf(cb);\r\n        if (x >= 0) { handlers.splice(x, 1); }\r\n        return callback;\r\n    }\r\n}", "import { vault } from \"../../uni/consts\";\r\nimport { setRec } from \"./_bits\";\r\nimport { runEvent } from \"./eventHandlers\";\r\n\r\n\r\nconst put = (chop, rec, event, res, ctx)=>{\r\n    const { isMultiGroup, recsByGroupId, groupIdsByRec, filter, handlers, childs, state } = vault.get(chop);\r\n    if (!filter(rec)) { return false; }\r\n\r\n    const valid = chop.getGroup(rec);\r\n    if (isMultiGroup) {\r\n        const results = new Set();\r\n\r\n        for (const groupId of valid) {\r\n            if (results.has(groupId)) { continue; }\r\n            setRec(chop, recsByGroupId, groupId, rec);\r\n            results.add(groupId);\r\n        }\r\n\r\n        groupIdsByRec.set(rec, results);\r\n\r\n    } else {\r\n        setRec(chop, recsByGroupId, valid, rec)\r\n        groupIdsByRec.set(rec, valid);\r\n    }\r\n\r\n    if (!event) { return true; }\r\n\r\n    return runEvent(handlers, childs, state, event, res, ctx);\r\n}\r\n\r\nexport const afterLoad = (chop, rec)=>put(chop, rec);\r\nexport const afterAdd = (chop, res, ctx)=>put(chop, res.current, \"add\", res, ctx);", "import { vault } from \"../../../uni/consts\";\r\n\r\nimport { toArr, toFce, toStr, wrapFce } from \"../../../uni/formats\";\r\nimport { afterLoad } from \"../../effects/afterAdd\";\r\nimport { onEvent } from \"../../effects/eventHandlers\";\r\nimport { getAllRecs, getRec, getRecs } from \"../../effects/_bits\";\r\nimport { afterReset } from \"../../effects/afterReset\";\r\nimport { solids, virtuals } from \"@randajan/props\";\r\nimport { exportFn } from \"../../traits/functions\";\r\nimport { Major } from \"../Exceptions\";\r\n\r\nexport class Chop {\r\n\r\n    constructor(id, opt={}, parent) {\r\n        id = toStr(id);\r\n        if (!id) { throw Major.fail(\"missing id\"); }\r\n\r\n        const { init, group, autoReset=true, isMultiGroup=false } = opt;\r\n        const filter = toFce(opt.filter, true);\r\n\r\n        const _p = {\r\n            state:\"pending\",\r\n            handlers:[],\r\n            childs:new Set(),\r\n            groupIdsByRec:new Map(), // rec -> groupIds\r\n            recsByGroupId:new Map(), // groupId -> recs\r\n            isMultiGroup,\r\n            init:toFce(init),\r\n            filter:parent ? rec=>(parent.getGroup(rec) === id && filter(rec)) : filter,\r\n        }\r\n\r\n        solids(this, {\r\n            id,\r\n            db:parent?.db || this,\r\n            parent,\r\n            getGroup:!isMultiGroup ? toFce(group) : wrapFce(toArr, toFce(group, [undefined])),\r\n            isMultiGroup\r\n        }, false);\r\n\r\n        virtuals(this, {\r\n            state:_=>_p.state,\r\n            size:_=>_p.groupIdsByRec.size,\r\n            childs:_=>[..._p.childs],\r\n        });\r\n\r\n        vault.set(this, _p);\r\n\r\n        if (parent) {\r\n            const _pp = vault.get(parent);\r\n            _pp.childs.add(this);\r\n            _p.init = _=>{\r\n                for (const [rec] of _pp.groupIdsByRec) { afterLoad(this, rec); }\r\n            }\r\n        }\r\n\r\n        if (autoReset) { this.reset(); }\r\n\r\n    }\r\n\r\n    msg(text, details={}) {\r\n        let msg = this.id;\r\n        for (let i in details) { msg += ` ${i}[${details[i]}]`; }\r\n        if (text) { msg += \" \" + text; }\r\n        return msg.trim();\r\n    }\r\n\r\n    on(callback, onlyOnce = false) {\r\n        return onEvent(this, callback, onlyOnce);\r\n    }\r\n\r\n    reset(ctx) {\r\n        return afterReset(this, ctx);\r\n    }\r\n\r\n    get(groupId, recId, throwError = false) {\r\n        return getRec(this, groupId, recId, throwError);\r\n    }\r\n\r\n    getMap(groupId, throwError = false) {\r\n        const recs = getRecs(this, groupId, throwError);\r\n        return recs ? new Map(recs) : new Map(); \r\n    }\r\n\r\n    getList(groupId, throwError = false) {\r\n        const recs = getRecs(this, groupId, throwError);\r\n        return recs ? Array.from(recs.values()) : []; \r\n    }\r\n\r\n    getSize(groupId, throwError=false) {\r\n        return getRecs(this, groupId, throwError)?.size || 0;\r\n    }\r\n\r\n    map(callback) {\r\n        const result = [];\r\n        const recs = getAllRecs(this);\r\n        for (const [rec] of recs) {\r\n            const r = callback(rec);\r\n            if (r !== undefined) { result.push(r); }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    export(rec) {\r\n        const res = {};\r\n        for (const i in rec) {\r\n            const v = rec[i];\r\n            \r\n            res[i] = Array.isArray(v) ? v.map(exportFn) : exportFn(v);\r\n        }\r\n        return res;\r\n    }\r\n\r\n    exportAll() {\r\n        return this.map(this.export);\r\n    }\r\n\r\n    chop(id, opt={}) {\r\n        return new Chop(id, opt, this);\r\n    }\r\n}", "import { anyToFn, fnToStr, strToFn } from \"@randajan/function-parser\";\r\n\r\nexport const saveFn = (any, col)=>anyToFn(any);\r\n\r\n\r\nexport const exportFn = any=>{\r\n    return (typeof any !== \"function\") ? any : fnToStr(any);\r\n}\r\n", "import { solid, solids } from \"@randajan/props\";\r\n\r\nclass Fail {\r\n\r\n    constructor(severity, reason, details) {\r\n        solids(this, { severity, reason, details });\r\n    }\r\n\r\n    setEnt(entId) {\r\n        solid(this, \"ent\", entId);\r\n        return this;\r\n    }\r\n\r\n    setCol(colId) {\r\n        solid(this, \"col\", colId);\r\n        return this;\r\n    }\r\n\r\n    setRow(rowId) {\r\n        solid(this, \"row\", rowId);\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\nexport class Minor extends Fail {\r\n\r\n    static fail(reason, details) { return new Minor(reason, details); }\r\n\r\n    constructor(reason, details) {\r\n        super(\"minor\", reason, details);\r\n    }\r\n}\r\n\r\nexport class Major extends Fail {\r\n\r\n    static fail(reason, details) { return new Major(reason, details); }\r\n\r\n    constructor(reason, details) {\r\n        super(\"major\", reason, details);\r\n    }\r\n}\r\n\r\nexport class Critical extends Fail {\r\n\r\n    static fail(reason, details) { return new Critical(reason, details); }\r\n\r\n    constructor(reason, details) {\r\n        super(\"critical\", reason, details);\r\n    }\r\n}\r\n\r\nexport const toFail = err=>{\r\n    if (err instanceof Fail) { return err; }\r\n    if (err instanceof Error) { return Critical.fail(err.message, err.stack); }\r\n    return Critical.fail(\"Unknown error\", err);\r\n}", "\r\nimport parseRegExp from \"regex-parser\";\r\nimport { Major } from \"../class/Exceptions\";\r\n\r\n\r\nexport const saveRegExp = (any, col)=>{\r\n    if (any instanceof RegExp) { return any; }\r\n    \r\n    if (typeof any != \"string\") {\r\n        throw Major.fail(\"not a regexp\");\r\n    }\r\n\r\n    try {\r\n        return parseRegExp(any);\r\n    } catch(err) {\r\n        throw Major.fail(\"unparseable\");\r\n    }\r\n    \r\n}", "const _bols = /^(0|n|no|not|off|false)$/i;\r\n\r\nexport const saveBol = (val, col)=>typeof val !== \"string\" ? !!val : !_bols.test(val);", "import { Major } from \"../class/Exceptions\";\r\n\r\nconst _nums = /-?(\\d+(\\s+\\d+)*)*[,.]?\\d+/;\r\nconst strToNum = str=>{\r\n    const match = String(str).replace(/\\u00A0/g, ' ').match(_nums);\r\n    if (!match || !match[0]) { return NaN; }\r\n    const res = Number(match[0].replaceAll(\" \", \"\").replace(\",\", \".\"));\r\n    return res;\r\n}\r\n\r\nexport const saveNum = (num, col)=>{\r\n    const t = typeof num;\r\n    if (t === \"string\") { num = strToNum(num); }\r\n    else if (t !== \"number\") { num = Number(num); }\r\n\r\n    const { name, min, max, dec } = col;\r\n\r\n    if (isNaN(num)) { throw Major.fail(\"not a number\"); }\r\n    if (max != null) { num = Math.min(num, max); }\r\n    if (min != null) { num = Math.max(num, min); }\r\n\r\n    if (dec == 0) { num = Math.round(num); }\r\n    else if (dec > 0) {\r\n        const pow = Math.pow(10, dec);\r\n        num = Math.round(num*pow)/pow;\r\n    }\r\n\r\n    return num;\r\n}", "import { isNull } from \"../../uni/formats\"\r\nimport { Major } from \"../class/Exceptions\";\r\n\r\n\r\nexport const saveStr = (str, col)=>{\r\n    str = isNull(str) ? \"\" : String(str);\r\n    if (str === \"[object Object]\") {\r\n        try { str = JSON.stringify(str); }\r\n        catch(e) { throw Major.fail(\"unparseable\"); }\r\n    }\r\n\r\n    const { name, min, max } = col;\r\n    if (min != null && str.length < min) { throw Major(\"too short\", min); }\r\n    if (max != null && str.length > max) { str = str.substr(0, max); }\r\n\r\n    return str;\r\n}", "import { Major } from \"../class/Exceptions\";\r\n\r\n\r\n\r\nexport const saveObj = (obj, col)=>{\r\n    const t = typeof obj;\r\n    if (t === \"object\") { return obj; }\r\n    if (t !== \"string\") { throw Major.fail(\"unparseable\"); }\r\n    try { return JSON.parse(obj); }\r\n    catch(e) { throw Major.fail(\"unparseable\"); }\r\n    \r\n}", "import { Major } from \"../class/Exceptions\";\r\n\r\nexport const saveDate = (date, col)=>{\r\n    if (!(date instanceof Date)) { date = new Date(date); }\r\n\r\n    const { name, min, max } = col;\r\n    let num = date.getTime();\r\n\r\n    if (isNaN(num)) { throw Major.fail(\"not a date\"); }\r\n    if (min == null && max == null) { return date; }\r\n\r\n    if (max != null) { num = Math.min(num, max); }\r\n    if (min != null) { num = Math.max(num, min); }\r\n\r\n    return new Date(num);\r\n}", "import { fcePass, fceTrue } from \"../../uni/consts\";\r\nimport { saveFn } from \"../traits/functions\";\r\nimport { join, toRefId } from \"../../uni/formats\";\r\nimport { saveRegExp } from \"../traits/regexp\";\r\n\r\nimport { saveBol } from \"../traits/booleans\";\r\nimport { saveNum } from \"../traits/numbers\";\r\nimport { saveStr } from \"../traits/string\";\r\nimport { saveObj } from \"../traits/objects\";\r\nimport { saveDate } from \"../traits/dates\";\r\n\r\n\r\nconst getter = fcePass;\r\nconst setter = fcePass;\r\nconst isRequired = fceTrue;\r\nconst isReadonly = fceTrue;\r\n\r\nconst metaSoft = Symbol(\"soft\");\r\nconst metaHard = Symbol(\"hard\");\r\nconst metaNumb = Symbol(\"numb\");\r\n\r\nexport const metaToStr = v=>v===metaNumb ? \"numb\" : v === metaHard ? \"hard\" : v === metaSoft ? \"soft\" : undefined;\r\nexport const isMetaEnt = v=>v === \"_ents\" || v === \"_types\" || v === \"_cols\";\r\n\r\n\r\nexport const metaData = {\r\n    \"_ents\": {\r\n        \"_ents\": { meta:metaNumb },\r\n        \"_cols\": { meta:metaNumb },\r\n        \"_types\": { meta:metaNumb }\r\n    },\r\n    \"_types\": {\r\n        \"meta\":{ meta:metaNumb, setter:metaToStr, getter },\r\n        \"string\": { meta:metaNumb, setter:saveStr, getter },\r\n        \"boolean\": { meta:metaNumb, setter:saveBol, getter },\r\n        \"number\": { meta:metaNumb, setter:saveNum, getter },\r\n        \"datetime\": { meta:metaNumb, setter:saveDate, getter },\r\n        \"duration\": { meta:metaNumb, setter:saveNum, getter },\r\n        \"function\": { meta:metaNumb, setter:saveFn, getter },\r\n        \"regexp\": { meta:metaNumb, setter:saveRegExp, getter },\r\n        \"object\": { meta:metaNumb, setter:saveObj, getter },\r\n        \"ref\": { meta:metaNumb, setter:toRefId, getter },\r\n        \"nref\": { meta:metaNumb, setter, getter },\r\n    },\r\n    \"_cols\": {\r\n        \"_ents-meta\":{\r\n            meta:metaNumb, ent: \"_ents\", name: \"meta\", type: \"meta\", isReadonly,\r\n        },\r\n        \"_ents-cols\":{\r\n            meta:metaNumb, ent: \"_ents\", name: \"cols\", type: \"ref\", ref:\"_cols\", parent:\"_cols-ent\", isList:true, noCache:true,\r\n            store:(c, db)=>{\r\n                const { ref, parent:{ name, isList }} = c;\r\n                return db.chop(ref.id, {\r\n                    group:r=>r[name],\r\n                    isMultiGroup:isList\r\n                })\r\n            },\r\n            formula:(r, b, s)=>s.getList(r, false)\r\n        },\r\n        \"_ents-size\":{\r\n            meta:metaNumb, ent: \"_ents\", name: \"size\", type: \"number\", noCache:true,\r\n            store:(c, db)=>db,\r\n            formula:(r, b, s)=>s.getSize(r.id, false)\r\n        },\r\n        //_types\r\n        \"_types-meta\":{\r\n            meta:metaNumb, ent: \"_types\", name: \"meta\", type: \"meta\", isReadonly\r\n        },\r\n        \"_types-setter\":{\r\n            meta:metaNumb, ent: \"_types\", name: \"setter\", type: \"function\", isReadonly, fallback:_=>setter\r\n        },\r\n        \"_types-getter\":{\r\n            meta:metaNumb, ent: \"_types\", name: \"getter\", type: \"function\", isReadonly, fallback:_=>getter\r\n        },\r\n\r\n        //_cols\r\n        \"_cols-meta\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"meta\", type: \"meta\", isReadonly\r\n        },\r\n        \"_cols-ent\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"ent\", type: \"ref\", ref: \"_ents\", isReadonly, isRequired\r\n        },\r\n        \"_cols-name\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"name\", type: \"string\", isReadonly, isRequired\r\n        },\r\n        \"_cols-type\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"type\", type: \"ref\", ref: \"_types\", fallback:_=>\"string\"\r\n        },\r\n        \"_cols-ref\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"ref\", type: \"ref\", ref: \"_ents\",\r\n        },\r\n        \"_cols-parent\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"parent\", type: \"ref\", ref: \"_cols\",\r\n        },\r\n        \"_cols-store\":{\r\n            meta:metaNumb, ent: \"_cols\", name:\"store\", type:\"function\"\r\n        },\r\n        \"_cols-isList\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"isList\", type: \"boolean\",\r\n        },\r\n        \"_cols-isReadonly\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"isReadonly\", type: \"function\"\r\n        },\r\n        \"_cols-isRequired\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"isRequired\", type: \"function\"\r\n        },\r\n        \"_cols-resetIf\":{\r\n            meta:metaNumb, ent:\"_cols\", name:\"resetIf\", type:\"function\"\r\n        },\r\n        \"_cols-init\":{\r\n            meta:metaHard, ent: \"_cols\", name: \"init\", type: \"function\", //Type should be defined as a function\r\n        },\r\n        \"_cols-fallback\":{\r\n            meta:metaHard, ent: \"_cols\", name: \"fallback\", type: \"function\", //Type should be defined as a function\r\n        },\r\n        \"_cols-validator\":{\r\n            meta:metaHard, ent: \"_cols\", name: \"validator\", type:\"function\"\r\n        },\r\n        \"_cols-decimal\":{\r\n            meta:metaHard, ent: \"_cols\", name: \"decimal\", type: \"number\", decimal: 0, min: 0\r\n        },\r\n        \"_cols-min\":{\r\n            meta:metaHard, ent: \"_cols\", name: \"min\", type: \"number\",\r\n            //decimal:_=>r.decimal //decimal should be defined as a function\r\n        },\r\n        \"_cols-max\":{\r\n            meta:metaHard, ent: \"_cols\", name: \"max\", type: \"number\",\r\n            //decimal:_=>r.decimal, min:_=>r.min //decimal & min should be defined as a function\r\n        },\r\n        \"_cols-formula\":{\r\n            meta:metaHard, ent: \"_cols\", name: \"formula\", type: \"function\",\r\n        },\r\n        \"_cols-noCache\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"noCache\", type: \"boolean\",\r\n        },\r\n        \"_cols-omitChange\":{\r\n            meta:metaNumb, ent: \"_cols\", name: \"omitChange\", type:\"boolean\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const metaDataDynamic = entId=>{\r\n    return [\r\n        {\r\n            _ent:`_cols`, id:`${entId}-_ent`, ent:entId, name: \"_ent\", type: \"ref\", ref:\"_ents\",\r\n            isReadonly, isRequired, meta:metaNumb\r\n        },\r\n        {\r\n            _ent:`_cols`, id:`${entId}-id`, ent:entId, name: \"id\", type: \"string\",\r\n            isReadonly, isRequired,\r\n            meta:isMetaEnt(entId) ? metaNumb : metaSoft,\r\n            formula:entId === \"_cols\" ? r=>join(\"-\", r.ent?.id, r.name) : undefined\r\n        }   \r\n    ];\r\n}", "import { isNull, reArray, toRefId } from \"../../../uni/formats\";\r\nimport { getRecPriv } from \"./_records\";\r\nimport { metaData } from \"../../metaData/interface\";\r\nimport { getRecs } from \"../../effects/_bits\";\r\nimport { cacheds, solid } from \"@randajan/props\";\r\nimport { Critical, Major, Minor } from \"../Exceptions\";\r\nimport { vault } from \"../../../uni/consts\";\r\n\r\nconst nregCol = (db, entId, _col, action)=>{\r\n    const colsByEnt = vault.get(db)?.colsByEnt;\r\n    if (!colsByEnt) { throw Critical.fail(\"columns not found\"); }\r\n    let cols = colsByEnt.get(entId);\r\n\r\n    if (action) {\r\n        if (cols) { cols.add(_col); }\r\n        else { colsByEnt.set(entId, new Set([_col]));  }\r\n    } else if (cols) {\r\n        if (cols.size > 1) {cols.delete(_col);  }\r\n        else { colsByEnt.delete(entId); }\r\n    }\r\n};\r\n\r\nexport const getColsPriv = (db, entId)=>vault.get(db)?.colsByEnt?.get(entId);\r\n\r\nconst createGetter = _col=>{\r\n    const { db, current:col, values:v } = _col;\r\n    \r\n    const { getter } = (metaData._types[v.type] || col.type);\r\n\r\n    const typize = v.type == \"ref\" ? from=>db.get(v.ref, from, false) : v=>getter(v, col);\r\n    const n = !v.isList ? typize : f=>reArray(f, typize);\r\n\r\n    return n;\r\n}\r\n\r\nconst createSetter = _col=>{\r\n    const { db, current:col, values:v } = _col;\r\n\r\n    const { name, ref, parent, formula, store, noCache, validator, isReadonly, resetIf, init, fallback, isRequired, isList } = col;\r\n    const { setter } = (metaData._types[v.type] || col.type);\r\n\r\n    const typize = t=>isNull(t) ? undefined : setter(t, col);\r\n    const n = !isList ? typize : t=>isNull(t) ? undefined : reArray(t, typize);\r\n\r\n    const stored = !store ? undefined : store(col, db);\r\n\r\n    return (current, output, to, before)=>{\r\n\r\n        if (formula) { to = output[name] = n(formula(current, before, stored)); }\r\n        else {\r\n            if (isReadonly && isReadonly(current, before, stored)) {\r\n                if (before) { throw Minor.fail(`is readonly`); }\r\n            } else {\r\n                to = output[name] = n(to);\r\n                if (validator && !validator(current, before, stored)) {\r\n                    throw Major.fail(\"is invalid\");\r\n                }\r\n            }\r\n\r\n            if ((!before && isNull(to)) || (resetIf && resetIf(current, before, stored))) { \r\n                to = output[name] = !init ? undefined : n(init(current, before, stored));\r\n            }\r\n        }\r\n\r\n        if (fallback && isNull(to)) { to = output[name] = n(fallback(current, before, stored)); }\r\n        if (isRequired && isNull(to) && isRequired(current, before, stored)) { throw Major.fail(\"is required\"); }\r\n        \r\n        return output[name];\r\n    }\r\n}\r\n\r\nconst createTraits = _col=>{\r\n    return cacheds({}, {}, {\r\n        getter:_=>createGetter(_col),\r\n        setter:_=>createSetter(_col)\r\n    });\r\n}\r\n\r\nexport const setCol = (_rec, ctx)=>{\r\n    const { db, values } = _rec;\r\n    if (values._ent !== \"_cols\") { return; }\r\n\r\n    const ent = values.ent;\r\n\r\n    nregCol(db, ent, _rec, true);\r\n\r\n    solid(_rec, \"traits\", createTraits(_rec), true, true);\r\n\r\n    const rows = getRecs(db, ent);\r\n    if (rows) {\r\n        for (const [_, row] of rows) { getRecPriv(db, row).colAdd(_rec); }\r\n    }\r\n\r\n}\r\n\r\nexport const remCol = (_rec, ctx)=>{\r\n    const { db, values } = _rec;\r\n    if (values._ent !== \"_cols\") { return; }\r\n\r\n    nregCol(db, values.ent, _rec, false);\r\n\r\n    const rows = getRecs(db, values.ent);\r\n    if (rows) {\r\n        for (const [_, row] of rows) { getRecPriv(db, row).colRem(values.name); }\r\n    }\r\n\r\n}\r\n\r\n", "import { metaDataDynamic } from \"../../metaData/interface\";\r\nimport { getColsPriv } from \"./_columns\";\r\nimport { addRec, loadRec } from \"./_records\";\r\n\r\nexport const addEnt = (_rec, ctx)=>{\r\n    const { db, values } = _rec;\r\n    if (values._ent !== \"_ents\") { return; }\r\n\r\n    for (const mdd of metaDataDynamic(values.id)) { addRec(db, mdd, ctx); }\r\n}\r\n\r\nexport const loadEnt = (_rec, ctx)=>{\r\n    const { db, values } = _rec;\r\n    if (values._ent !== \"_ents\") { return; }\r\n\r\n    for (const mdd of metaDataDynamic(values.id)) { loadRec(db, mdd, ctx); }\r\n}\r\n\r\n\r\nexport const remEnt = (_rec, ctx)=>{\r\n    const { db, values } = _rec;\r\n    if (values._ent !== \"_ents\") { return; }\r\n\r\n    for (const _col of getColsPriv(db, values.id)) { _col.remove(ctx, true); };\r\n}", "import { solids } from \"@randajan/props\";\r\nimport { toRefId } from \"../../../uni/formats\";\r\nimport { afterRemove } from \"../../effects/afterRemove\";\r\nimport { afterUpdate } from \"../../effects/afterUpdate\";\r\nimport { metaToStr, isMetaEnt } from \"../../metaData/interface\";\r\nimport { Turn } from \"./Turn\";\r\nimport { getColsPriv, setCol } from \"./_columns\";\r\nimport { Major } from \"../Exceptions\";\r\nimport { regRec, unregRec } from \"./_records\";\r\nimport { Record } from \"./Record\";\r\nimport { Result } from \"./Result\";\r\n\r\nexport class RecordPrivate {\r\n\r\n    constructor(db) {\r\n        \r\n        solids(this, {\r\n            db,\r\n            current: new Record(),\r\n            before: new Record()\r\n        });\r\n\r\n        this.state = \"pending\"; //ready, removed;\r\n        this.values = {};\r\n\r\n        regRec(this);\r\n    }\r\n\r\n    msg(text, details={}) {\r\n        return this.db.msg(text, {\r\n            ent:this.values._ent,\r\n            row:this.values.id,\r\n            ...details\r\n        });\r\n    }\r\n\r\n    colAdd(_col) {\r\n        const { current, before, state } = this;\r\n\r\n        const { name, formula, noCache } = _col.current;\r\n        const t = _col.traits;\r\n        const isVirtual = (formula && noCache);\r\n    \r\n        const prop = {\r\n            enumerable:true, configurable:true,\r\n            set:_=>{ throw new Error(this.msg(\"for update use db.update(...) interface\", {column:name})) }\r\n        };\r\n\r\n        if (isVirtual) { prop.get = _=>t.getter(t.setter(current, this.values, this.values[name], this.state === \"ready\" ? before : undefined), this.state === \"ready\"); }\r\n        else { prop.get = _=>t.getter(this.turn ? this.turn.pull(_col) : this.values[name], this); }\r\n        Object.defineProperty(current, name, prop);\r\n\r\n        if (!isVirtual) { prop.get = _=>t.getter(this.values[name], this); }\r\n        Object.defineProperty(before, name, prop);\r\n\r\n        if (state === \"ready\") { t.setter(current, this.values, this.values[name]); }\r\n    }\r\n\r\n    colRem(name) {\r\n        const { current, before } = this;\r\n        delete this.values[name];\r\n        delete current[name];\r\n        delete before[name];\r\n    }\r\n\r\n    colsInit() {\r\n        const { db, values } = this;\r\n        const cols = getColsPriv(db, values._ent);\r\n        if (cols) { for (const _col of cols) { this.colAdd(_col); } }\r\n        return this;\r\n    }\r\n\r\n    colsPrepare() {\r\n        const { state, values } = this;\r\n        if (state === \"pending\") { Turn.attach(this, values); }\r\n        return this;\r\n    }\r\n\r\n    colsFinish() {\r\n        const { state, turn } = this;\r\n        if (state === \"pending\") {\r\n            this.values = turn.execute();\r\n            this.state = \"ready\";\r\n        }\r\n\r\n        return this.turn.detach();\r\n    }\r\n\r\n    valsLoad(values) {\r\n        const { state, current, values:v } = this;\r\n        if (state !== \"pending\") {  } //TODO\r\n\r\n        Object.assign(v, values);\r\n\r\n        v._ent = toRefId(v._ent);\r\n        if (v._ent === \"_cols\") { v.ent = toRefId(v.ent); }\r\n        this.meta = isMetaEnt(v._ent) ? v.meta = metaToStr(v.meta) : undefined;\r\n\r\n        Object.assign(this.current, v);\r\n\r\n        return this;\r\n    }\r\n\r\n    valsPush(values, ctx, isUpdate=false) {\r\n\r\n        this.values = Turn.attach(this, values, isUpdate).execute();\r\n        const result = this.turn.detach();\r\n\r\n        if (this.turn.isReal) {\r\n            setCol(this, ctx);\r\n            afterUpdate(this.db, result, ctx);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    remove(ctx, force=false) {\r\n        const { db, meta } = this;\r\n        const result = new Result(this);\r\n\r\n        if (!force && meta) { result.addFail(Major.fail(\"is meta\")); }\r\n        else {\r\n            this.state = \"removed\";\r\n            afterRemove(db, result, ctx);\r\n            unregRec(this);\r\n        }\r\n        \r\n        return result;\r\n    }\r\n\r\n}", "import { solids } from \"@randajan/props\";\r\nimport { getColsPriv } from \"./_columns\";\r\nimport { Major, Minor, toFail } from \"../Exceptions\";\r\nimport { ResultTurn } from \"./Result\";\r\n\r\n\r\nexport class Turn {\r\n\r\n    static attach(_rec, input, isUpdate=false) {\r\n        return _rec.turn = new Turn(_rec, input, isUpdate);\r\n    }\r\n\r\n    constructor(_rec, input, isUpdate=false) {\r\n\r\n        this._rec = _rec;\r\n        this.result = new ResultTurn(_rec);\r\n        \r\n        solids(this, {\r\n            isUpdate,\r\n            input,\r\n            output:{},\r\n            pendings:new Set(),\r\n        });\r\n\r\n        this.isPending = false;\r\n\r\n        try { this._prepare(); } catch(err) { result.addFail(toFail(err)); }\r\n\r\n    }\r\n\r\n    _prepare() {\r\n        const { _rec, result } = this;\r\n        const { db, values, state } = _rec;\r\n\r\n        if (!values._ent) { throw Major.fail(\"is required\").setCol(\"_ent\"); }\r\n\r\n        const _cols = getColsPriv(db, values._ent);\r\n        if (!_cols) { throw Major.fail(\"invalid\").setCol(\"_ent\"); }\r\n\r\n        for (const _col of _cols) {\r\n            try { this._prepareCol(_col); } catch(err) {\r\n                result.addFail(toFail(err).setCol(_col.values.name));\r\n            }\r\n        }\r\n\r\n        if (state === \"ready\" && !this.isPending) { throw Major.fail(\"blank\"); }\r\n    }\r\n\r\n    _prepareCol(_col) {\r\n        const { _rec, isUpdate, input, output, pendings } = this;\r\n        const { meta:metaRec, values, state } = _rec;\r\n        const { meta:metaCol, values:{ name, formula, resetIf, noCache } } = _col;\r\n\r\n        const isReal = input.hasOwnProperty(name);\r\n        const isMeta = (metaRec && metaCol && (metaCol === \"numb\" || metaRec !== \"soft\"));\r\n\r\n        output[name] = values[name]; //default output is value without change\r\n\r\n        //fail quick\r\n        if (isReal && state === \"ready\") {\r\n            if (isMeta) { throw Minor.fail(\"is meta\"); }\r\n            if (formula) { throw Minor.fail(`has formula`); }\r\n        }\r\n\r\n        if (formula && noCache) { return; }\r\n        if (isMeta && state === \"pending\") { return; } //meta records should never pending\r\n        if (formula) { pendings.add(_col); return; }\r\n        \r\n        if (!isUpdate || isReal) { pendings.add(_col); this.isPending = true; return; }\r\n        if (resetIf) { input[name] = values[name]; pendings.add(_col); return; } //default input \r\n    }\r\n\r\n    execute() {\r\n        const { _rec, pendings, result } = this;\r\n\r\n        if (this.isPending) {\r\n            for (const _col of pendings) { this.pull(_col); }\r\n        }\r\n\r\n        return (result.isOk && result.isReal) ? this.output : _rec.values;\r\n    }\r\n\r\n    pull(_col) {\r\n        const { _rec, pendings, output, input, result } = this;\r\n        const { state, current, before } = _rec;\r\n        const { name, omitChange } = _col.values;\r\n        \r\n        if (pendings.has(_col)) {\r\n            const { setter } = _col.traits;\r\n\r\n            //because computed value of column can reference itself\r\n            pendings.delete(_col);\r\n\r\n            try {\r\n                setter(current, output, input[name], state === \"ready\" ? before : undefined);\r\n            } catch(err) {\r\n                result.addFail(toFail(err).setCol(name));\r\n            }\r\n            \r\n            //detect changes\r\n            if (output[name] !== _rec.values[name]) {\r\n                result.addChange(name, !omitChange);\r\n            }\r\n\r\n        }\r\n\r\n        return output[name];\r\n    }\r\n\r\n    detach() {\r\n        const { _rec, result } = this;\r\n        \r\n        delete this._rec;\r\n        delete this.result;\r\n        delete _rec.turn;\r\n\r\n        return result;\r\n    }\r\n\r\n}", "import { solid, solids, virtual, virtuals } from \"@randajan/props\";\r\nimport { vault } from \"../../../uni/consts\";\r\n\r\nconst _results = new WeakMap();\r\n\r\nexport class Result {\r\n\r\n    constructor(_rec) {\r\n        const _p = {\r\n            _rec,\r\n            isOk:true,\r\n            fails:[]\r\n        }\r\n\r\n        solid(this, \"current\", _rec.current);\r\n\r\n        virtuals(this, {\r\n            isOk:_=>_p.isOk,\r\n            fails:_=>[..._p.fails]\r\n        });\r\n\r\n        _results.set(this, _p);\r\n    }\r\n\r\n    addFail(fail, nonMinorThrow=false) {\r\n        const _p = _results.get(this);\r\n\r\n        const { values } = _p._rec;\r\n        fail.setRow(values.id).setEnt(values._ent);\r\n\r\n        if (fail.severity !== \"minor\") {\r\n            if (nonMinorThrow) { throw fail; }\r\n            else { _p.isOk = false; } \r\n        }\r\n\r\n        _p.fails.push(fail);\r\n\r\n        return true;\r\n    }\r\n\r\n}\r\n\r\nexport class ResultTurn extends Result {\r\n\r\n    constructor(_rec) {\r\n        super(_rec);\r\n\r\n        const _p = _results.get(this);\r\n\r\n        _p.changed = new Set();\r\n        _p.isReal = _rec.state === \"pending\";\r\n\r\n        virtuals(this, {\r\n            isReal:_=>_p.isReal,\r\n            changed:_=>new Set(_p.changed)\r\n        });\r\n\r\n    }\r\n\r\n    addChange(change, isReal=false) {\r\n        const _p = _results.get(this);\r\n\r\n        _p.changed.add(change);\r\n        if (isReal) { _p.isReal = true; }\r\n\r\n        return true;\r\n    }\r\n\r\n}", "export class Record {\r\n    toString() { return this.id; }\r\n    toJSON() { return this.id; }\r\n}", "import { toRefId } from \"../../../uni/formats\";\r\nimport { getRec } from \"../../effects/_bits\";\r\nimport { afterAdd, afterLoad } from \"../../effects/afterAdd\";\r\nimport { afterUpdate } from \"../../effects/afterUpdate\";\r\nimport { loadEnt } from \"./_ents\";\r\nimport { RecordPrivate } from \"./RecordPrivate\";\r\n\r\nconst _records = new WeakMap();\r\n\r\nexport const regRec = _rec=>{\r\n    _records.set(_rec.current, _rec);\r\n    return _rec;\r\n}\r\n\r\nexport const unregRec = _rec=>{\r\n    _records.delete(_rec.current);\r\n    return _rec;\r\n}\r\n\r\nconst createRec = (db, values)=>(new RecordPrivate(db)).valsLoad(values);\r\n\r\nexport const getRecPriv = (db, any, throwError=true)=>{\r\n    const _p = _records.get(any);\r\n    if (_p && (!db || db === _p.db)) { return _p; }\r\n    if (throwError) { throw Error(db.msg(\"is not record\", {row:toRefId(any)})); };\r\n}\r\n\r\nexport const loadRec = (db, values, ctx)=>{\r\n    const id = toRefId(values);\r\n    const _ent = toRefId(values._ent);\r\n\r\n    const brother = getRec(db, _ent, id);\r\n    const _rec = brother ? getRecPriv(db, brother) : createRec(db, values);\r\n\r\n    if (brother) {\r\n        _rec.valsLoad(values);\r\n        afterUpdate(db, { current:_rec.current }, ctx); //TODO!!!\r\n    }\r\n    else {\r\n        afterLoad(db, _rec.current);\r\n        loadEnt(_rec, ctx);\r\n    }\r\n    \r\n    return _rec;\r\n}\r\n\r\nexport const addRec = (db, values, ctx)=>{\r\n    const _rec = createRec(db, values);\r\n    const res = _rec.colsInit().colsPrepare().colsFinish();\r\n    if (res.isOk) { afterAdd(db, res, ctx); }\r\n    return res;\r\n}\r\n\r\nexport const addOrSetRec = (db, values, ctx, isUpdate)=>{\r\n    const _rec = createRec(db, values).valsLoad(values).colsInit().colsPrepare();\r\n    const { _ent, id } = _rec.current;\r\n\r\n    const brother = getRec(db, toRefId(_ent), id);\r\n    if (brother) { return getRecPriv(db, brother).valsPush(values, ctx, isUpdate); }\r\n\r\n    const res = _rec.colsFinish();\r\n    if (res.isOk) { afterAdd(db, res, ctx); }\r\n    return res;\r\n}\r\n\r\nexport const removeRec = (db, record, ctx, force)=>getRecPriv(db, record).remove(ctx, force);", "\r\nimport { Chop } from \"./Chop\";\r\n\r\nimport { toRefId } from \"../../../uni/formats\";\r\nimport { metaData } from \"../../metaData/interface\";\r\nimport { addOrSetRec, addRec, getRecPriv, loadRec, removeRec } from \"../Records/_records\";\r\nimport { getAllRecs, getRecs } from \"../../effects/_bits\";\r\nimport { vault } from \"../../../uni/consts\";\r\nimport { getColsPriv, remCol, setCol } from \"../Records/_columns\";\r\nimport { addEnt, remEnt } from \"../Records/_ents\";\r\n\r\nexport class DB extends Chop {\r\n\r\n    constructor(id, opt={}) {\r\n\r\n        const { init } = opt;\r\n\r\n        super(id, {\r\n            autoReset:false,\r\n            group:rec=>toRefId(rec._ent),\r\n            init:(self, ctx)=>{\r\n\r\n                const load = values=>loadRec(this, values, ctx);\r\n\r\n                //load database\r\n                init(load, ctx);\r\n\r\n                //override with metadata\r\n                for (const _ent in metaData) {\r\n                    for (const id in metaData[_ent]) {\r\n                        load({_ent, id, ...metaData[_ent][id]}); //TODO\r\n                    };\r\n                }\r\n\r\n                //set columns definitions\r\n                for (const [_, rec] of getRecs(this, \"_cols\")) {\r\n                    const _rec = getRecPriv(this, rec);\r\n                    setCol(_rec, ctx);\r\n                }\r\n\r\n                //prepare columns for rows\r\n                const _recs = [];\r\n                for (const [rec] of getAllRecs(this)) {\r\n                    const _rec = getRecPriv(this, rec);\r\n                    if (_rec.state === \"pending\") { _recs.push(_rec.colsPrepare()); }\r\n                }\r\n                \r\n                //set columns for rows\r\n                for (const _rec of _recs) { \r\n                    _rec.colsFinish();\r\n                }\r\n\r\n                return _recs;\r\n\r\n            }\r\n        });\r\n\r\n        this.on((event, res, ctx)=>{\r\n            if (!res) { return; }\r\n            const _rec = getRecPriv(this, res.current);\r\n            const { _ent } = _rec.values;\r\n\r\n            if (_ent == \"_ents\") {\r\n                if (event === \"remove\") { remEnt(_rec, ctx); }\r\n                else if (event === \"add\") { addEnt(_rec, ctx); }\r\n            }\r\n            else if (_ent === \"_cols\") {\r\n                if (event === \"add\" || event === \"update\") { setCol(_rec, ctx); }\r\n                else if (event === \"remove\") { remCol(_rec, ctx); }\r\n            }\r\n\r\n        });\r\n\r\n        vault.get(this).colsByEnt = new Map();     \r\n\r\n        this.reset();\r\n    }\r\n\r\n    isRecord(any, throwError=false) { return !!getRecPriv(this, any, throwError); }\r\n\r\n    remove(record, ctx) {\r\n        return removeRec(this, record, ctx);\r\n    }\r\n\r\n    add(values, ctx) {\r\n        return addRec(this, values, ctx);\r\n    }\r\n\r\n    addOrSet(values, ctx) {\r\n        return addOrSetRec(this, values, ctx);\r\n    }\r\n\r\n    addOrUpdate(values, ctx) {\r\n        return addOrSetRec(this, values, ctx, true);\r\n    }\r\n\r\n    set(record, values, ctx) {\r\n        return getRecPriv(this, record).valsPush(values, ctx);\r\n    }\r\n\r\n    update(record, values, ctx) {\r\n        return getRecPriv(this, record).valsPush(values, ctx, true);\r\n    }\r\n\r\n    removeBy(groupId, recId, ctx) {\r\n        const rec = this.get(groupId, recId);\r\n        if (rec) { return this.remove(rec, ctx); }\r\n    }\r\n\r\n    setBy(groupId, recId, values, ctx) {\r\n        const rec = this.get(groupId, recId);\r\n        if (rec) { return this.set(rec, values, ctx); }\r\n    }\r\n\r\n    updateBy(groupId, recId, values, ctx) {\r\n        const rec = this.get(groupId, recId);\r\n        if (rec) { return this.update(rec, values, ctx); }\r\n    }\r\n\r\n}", "import { nref, timestamps } from \"./components/uni/tools\";\r\nimport { reductor, summary } from \"./components/sync/tools\";\r\nimport { DB } from \"./components/sync/interfaces/DB\";\r\n\r\n\r\nexport default (name, stream, config={}) => new DB(name, stream, config);\r\n\r\nimport { DB as DBv3 } from \"./components/v3/index.js\";\r\n\r\nexport {\r\n    nref,\r\n    timestamps,\r\n    reductor,\r\n    summary,\r\n    DBv3\r\n}"],
  "mappings": "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",
  "names": ["value", "result", "brand", "styles", "chalk", "styles", "level", "self", "chalk", "log", "self", "withNativeArrayBuffer", "isBinary", "on", "decode", "_a", "value", "decode", "msg", "to", "protocol", "protocol", "withNativeArrayBuffer", "isView", "withNativeBlob", "protocol", "PacketType", "value", "RESERVED_EVENTS", "Socket", "self", "socket", "self", "Socket", "lookup", "Socket", "toArray", "args", "self", "extend", "socket", "list", "map", "enumerable", "register", "_privates", "socket", "beam", "self", "msg", "list", "proto", "enumerable", "to", "value", "is", "isFull", "copy", "extend", "__export", "toArray", "toString", "ctx", "json", "throwError", "to", "log", "map", "solid", "cached", "virtual", "jet", "enumerable", "value", "fight", "filter", "value", "fight", "each", "solid", "value", "enumerable", "virtual", "safe", "cached", "enumerable", "safe", "split", "result", "to", "throwError", "selector", "solid", "virtual", "jet", "_", "msg", "list", "filter", "loader", "cache", "isReadonly", "self", "changeList", "cache", "map", "jet", "_", "selector", "solid", "virtual", "cached", "solid", "virtual", "jet", "solid", "virtual", "jet", "throwError", "filter", "to", "_", "x", "solid", "Chop", "solids", "msg", "result", "parseRegExp", "getter", "v", "isReadonly", "isRequired", "setter", "virtuals", "DB", "self", "id", "lookup"]
}
